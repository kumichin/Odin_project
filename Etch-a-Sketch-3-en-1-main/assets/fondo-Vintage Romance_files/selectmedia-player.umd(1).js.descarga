var Ma=Object.defineProperty,Pa=Object.defineProperties;var Ea=Object.getOwnPropertyDescriptors;var or=Object.getOwnPropertySymbols;var Da=Object.prototype.hasOwnProperty,ka=Object.prototype.propertyIsEnumerable;var Wi=(Ye,Le,Ke)=>Le in Ye?Ma(Ye,Le,{enumerable:!0,configurable:!0,writable:!0,value:Ke}):Ye[Le]=Ke,Ft=(Ye,Le)=>{for(var Ke in Le||(Le={}))Da.call(Le,Ke)&&Wi(Ye,Ke,Le[Ke]);if(or)for(var Ke of or(Le))ka.call(Le,Ke)&&Wi(Ye,Ke,Le[Ke]);return Ye},Ki=(Ye,Le)=>Pa(Ye,Ea(Le));var l=(Ye,Le,Ke)=>(Wi(Ye,typeof Le!="symbol"?Le+"":Le,Ke),Ke);var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.pl-ps-frame.svelte-1kly348{border:none;min-width:300px;min-height:250px;background-color:transparent;vertical-align:middle}.vidsplay-frame.svelte-owa1u0{border:none;min-width:300px;min-height:250px;background-color:transparent}.hidden.svelte-17qie27{display:none}.ad-manager-container.svelte-17qie27{position:absolute;top:0;left:0;bottom:0;right:0;background-color:#000;z-index:1;overflow:hidden}.ad-manager-frame.svelte-17qie27{position:absolute;border:none;top:0;left:0;bottom:0;right:0}.close-icon-container.svelte-vj8jc1{width:20px;height:20px;cursor:pointer}.close-icon-container-p.svelte-vj8jc1{padding:30px;margin:-30px}.hidden.svelte-wbzynq.svelte-wbzynq{display:none!important}.loader-wrapper-ad-video.svelte-wbzynq.svelte-wbzynq{display:flex;align-items:center;justify-content:center;background-color:#000;position:absolute;top:0;left:0;z-index:3}.vid-display-video-frame.svelte-wbzynq.svelte-wbzynq{border:none;min-width:300px;min-height:250px;background-color:transparent;top:-17px;position:relative}.progress-bar.svelte-wbzynq.svelte-wbzynq{position:fixed;top:0;height:5px;background:yellow;transition:width .25s;z-index:9999}.svelte-wbzynq.svelte-wbzynq{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.container.svelte-wbzynq.svelte-wbzynq,.video-controls.svelte-wbzynq.svelte-wbzynq,.video-timer.svelte-wbzynq.svelte-wbzynq,.options.svelte-wbzynq.svelte-wbzynq{display:flex;align-items:center;justify-content:center}.container.svelte-wbzynq.svelte-wbzynq{border-radius:5px;background:#000}.wrapper.svelte-wbzynq.svelte-wbzynq{position:absolute;left:0;right:0;z-index:1;opacity:0;bottom:-15px;transition:all .08s ease}.container.show-controls.svelte-wbzynq .wrapper.svelte-wbzynq{opacity:1;bottom:0;transition:all .13s ease}.wrapper.svelte-wbzynq.svelte-wbzynq:before{content:"";bottom:0;width:100%;z-index:-1;position:absolute;height:calc(100% + 35px);pointer-events:none;background:linear-gradient(to top,rgba(0,0,0,.7),transparent)}.video-timeline.svelte-wbzynq.svelte-wbzynq{height:7px;width:100%;cursor:pointer}.video-timeline.svelte-wbzynq .progress-area.svelte-wbzynq{height:3px;position:relative;background:rgba(255,255,255,.6)}.progress-area.svelte-wbzynq span.svelte-wbzynq{position:absolute;left:50%;top:-25px;font-size:13px;color:#fff;pointer-events:none;transform:translate(-50%)}.progress-area.svelte-wbzynq .progress-bar.svelte-wbzynq{width:0%;height:100%;position:relative;background:#2289ff}.progress-bar.svelte-wbzynq.svelte-wbzynq:before{content:"";right:0;top:50%;height:13px;width:13px;position:absolute;border-radius:50%;background:#2289ff;transform:translateY(-50%)}.progress-bar.svelte-wbzynq.svelte-wbzynq:before,.progress-area.svelte-wbzynq span.svelte-wbzynq{display:none}.video-timeline.svelte-wbzynq:hover .progress-bar.svelte-wbzynq:before,.video-timeline.svelte-wbzynq:hover .progress-area span.svelte-wbzynq{display:block}.wrapper.svelte-wbzynq .video-controls.svelte-wbzynq{padding:5px 20px 10px}.video-controls.svelte-wbzynq .options.svelte-wbzynq{width:100%}.video-controls.svelte-wbzynq .options.svelte-wbzynq:first-child{justify-content:flex-start}.video-controls.svelte-wbzynq .options.svelte-wbzynq:last-child{justify-content:flex-end}.options.svelte-wbzynq button.svelte-wbzynq{height:10px;width:40px;font-size:19px;border:none;cursor:pointer;background:none;color:#efefef;border-radius:3px;transition:all .3s ease}.options.svelte-wbzynq button .svelte-wbzynq:where(i,span){height:100%;width:100%;line-height:40px}.options.svelte-wbzynq button:hover .svelte-wbzynq:where(i,span){color:#fff}.options.svelte-wbzynq button:active .svelte-wbzynq:where(i,span){transform:scale(.9)}.options.svelte-wbzynq button span.svelte-wbzynq{font-size:23px}.options.svelte-wbzynq .video-timer.svelte-wbzynq{color:#efefef;margin-left:15px;font-size:14px}.video-timer.svelte-wbzynq .separator.svelte-wbzynq{margin:0 5px;font-size:16px;font-family:Open sans}@media screen and (max-width: 540px){.wrapper.svelte-wbzynq .video-controls.svelte-wbzynq{padding:3px 10px 7px}.progress-area.svelte-wbzynq span.svelte-wbzynq{display:none!important}.options.svelte-wbzynq button.svelte-wbzynq{height:30px;width:30px;font-size:17px}.options.svelte-wbzynq .video-timer.svelte-wbzynq{margin-left:5px}.video-timer.svelte-wbzynq .separator.svelte-wbzynq{font-size:14px;margin:0 2px}.options.svelte-wbzynq button .svelte-wbzynq:where(i,span){line-height:30px}.options.svelte-wbzynq button span.svelte-wbzynq{font-size:21px}.options.svelte-wbzynq .video-timer.svelte-wbzynq,.progress-area.svelte-wbzynq span.svelte-wbzynq{font-size:12px}}.hidden.svelte-11jsstl{display:none!important}.loader-wrapper.svelte-11jsstl{display:flex;align-items:center;justify-content:center;background-color:#fff;position:absolute;top:0;left:0;z-index:2}.sm-unit-header-container.svelte-xurmir{color:gray;font-family:arial,sans-serif;font-size:14px;width:100%;text-align:center;z-index:5;padding:5px 0;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;height:20px}.is-has-close-button.svelte-xurmir{background-color:#000;color:#fff}.sm-unit-header-button-container.svelte-xurmir{display:flex;width:30px;align-items:center}.ad-unit-wrapper.svelte-xurmir{position:relative;width:100%;background-color:#000;z-index:1;overflow:hidden;display:flex;justify-content:center;align-items:center}.sm-unit-display.svelte-xurmir{display:grid}.content.svelte-xurmir,.overlay.svelte-xurmir{grid-area:1 / 1}
`;document.head.appendChild(__vite_style__);(function(){"use strict";class Ye{constructor(){l(this,"code");l(this,"mediaTypes");l(this,"ad");l(this,"bids");l(this,"getFloor")}}function Le(t,e){return t.ad.advertiserEnableSellerIdOverride==!1?{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"selectmedia.asia",sid:e,hp:1}]}}:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:t.ad.advertiserSellerDomainOverride,sid:t.ad.advertiserSellerIdOverride,hp:t.ad.advertiserSellerHP1Override}]}}}function Ke(t){return t.bids[0].bidder}function lr(t,e){const i=t.ad.advertiserEnableSellerIdOverride,n=e.ad.advertiserEnableSellerIdOverride;if(i==n&&n==!0){const r=t.ad.advertiserSellerDomainOverride==e.ad.advertiserSellerDomainOverride,a=t.ad.advertiserSellerIdOverride==e.ad.advertiserSellerIdOverride,s=t.ad.advertiserSellerHP1Override==e.ad.advertiserSellerHP1Override,o=t.bids[0].bidder==e.bids[0].bidder;return a&&r&&s&&o}return i==n&&n==!1?t.bids[0].bidder==e.bids[0].bidder:!1}var le=(t=>(t[t.IMA=1]="IMA",t[t.PREBID=2]="PREBID",t[t.AMAZON=3]="AMAZON",t[t.Display=4]="Display",t))(le||{});class wt{constructor(e,i,n){this.success=e,this.tcData=i,this.err=n}}var Rt=(t=>(t[t.VidsPlayer=1]="VidsPlayer",t[t.INSTREAM=2]="INSTREAM",t))(Rt||{});const cr={playerCloseButtonPositioning:"RIGHT",headerHeight:30,isDebug:!0,baseTrackUrl:"//track-selectmedia.com/track/?",width:640,height:480,channelId:"c1",publisherId:"1234a",tagId:"1234",templateId:"default",isSticky:!1,isFloating:!1,isDetachToFloating:!1,isDetachToFloatingOnStart:!1,floatingWidth:300,floatingHeight:250,floatingHorizontal:"right",floatingVertical:"bottom",floatingDetachLimit:!0,floatingVerticalOffset:0,floatingHorizontalOffset:0,selector:"body",waterfallServer:"//serv-selectmedia.com/serving",domain:"",vastLoadTimeout:2e3,consent:"",gdpr:!1,url:"",timeBetweenWaterfalls:100,waterfallCallsLimit:1e3,isHasCloseButton:!1,isHasPlayAdsButton:!1,autoPlay:!1,zIndexCustom:99999,customCSS:"",advertisementText:"Ad",unitRatioParams:[16,9],isExpandable:!1,openingAnimationTime:300,prebidScriptUrl:"serv-selectmedia.com/cdn/player/prebid/8_45_1/prebid.js",pauseOnUnseen:!0,firstImpression:!1,prebidTimeOut:6e3,errorLimit:33,unlimitedWaterfallRuns:!0,requestUntilBidReady:1,preBidDuplicateLoad:5,backGroundPreBidDuplicateLoad:1,enableAutoPlayAfterTimePass:!1,autoPlayAfterTimePassSec:20,ignoreErrorLog:!1,schain:"",displaySchain:"",isDesktop:!0,waterfallErrorLimitEnabled:!0,waterfallRuns:20,enablePassBack:!1,passBackHeight:"",passBackUrl:"",passBackWidth:"",enablePreloader:!1,preloaderHeight:"",preloaderUrl:"",preloaderWidth:"",playerSize:"RESPONSIVE",advertisementLocation:"OUT",posConf:{},iframeWorkers:20,mockServer:!1,mockServerUrl:"",viewAbilityTimeout:30,enableViewAbilityTimeout:!0,preloaderBeforeWaitInMil:0,passBeforeWaitInMil:0,floatOnlyOnBottom:!1,positioning:"",offsetWidth:0,offsetHeight:0,floaterMaxWidth:400,floaterMaxHeight:300,floaterSize:"",prebidWorkerLimit:-1,amazonWorkerLimit:1,googleWorkerLimit:-1,playerType:"",defaultDomain:"",allEventsGet:!1,allEventsNotGetDoubleCheck:!1,hideAli:!1,autoHideDisplay:!1,enableTimeWaitBetweenGoogle:!1,timeWaitBetweenGoogleInSec:10,enableMultiGoogleAccounts:!1,googlePauseOnUnseen:!0,drainGoogleAds:!1,enableGoogleInSticky:!1,isAmazonSizeRange:!1,googleAutoPlay:!1,notGoogleAutoPlay:!1,googleWorkers:1,fwLog:!1,displayOnly:!1,enableTimeBetweenGoogle:!1,timeBetweenGoogle:0,enableAdSourcesABCpm:!1,houseAdImageSrc:"",houseAdClick:"",multiPlayer:!1,ignoreGFPR:!1,newSize:!1,enableIas:!1,inventoryIgnore:!1,heavyAd:!1,heavyAdAfter:5e3,flowType:"googleFirst",schainDomainMap:{},useGpp:!1,safeFrame:!1,amazonWorkerApi:3,tagMacro:{},urlEndPointParamMacros:[],ignoreNotLexicon:!1,ignoreLexicon:!1,enableIntentIQ:!1,houseAdImageSrcArray:[],adDuration:0,macroAdvertiserVasts:[],fullWaterFallScan:!1,passBackType:1,instreamVideoUrl:"//sm1.selectmedia.asia/cdn/files/1ec07602-37cd-4536-ae7a-d0166cda90b4",instreamVideoType:"video/webm",adsSoundOn:!1,enableOptimizeUser:!1,optimizeUser:{emptyWF:0,ignoreInMinutes:0}},dr=["channelId","height","publisherId","tagId","templateId","width"],Ut=1884;function ur(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(i==="x"?n:n&3|8).toString(16)})}const Gi=ur();let ji=0,Hi=0;class P{static incWFRun(){ji++}static async error(e,i=null,n={}){return new Promise((r,a)=>{const s="1_12_"+Ut;try{n.uuid=Gi,n.error=!0,n.version=s;try{n.href=top.window.location.href}catch{n.href=window.location.href}e=e+"_"+n.version,i!=null&&i!=null&&(i.message!==void 0&&(n.message=i.message),i.stack!==void 0&&(n.stack=i.stack)),n.context=e,n.wfRun=ji,n.time=new Date().toISOString(),fetch("//player-logs-service-32k5odxu2a-uw.a.run.app/player-logs/log?error=true&version="+s+"&context="+e,{mode:"no-cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(o){this.error("error_catch",o,{context_error:e})}r()})}static async errorv2(e,i={}){return new Promise((n,r)=>{i.uuid=Gi,i.context=e,fetch("//player-logs-service-32k5odxu2a-uw.a.run.app/player-logs/log?context="+i.context,{mode:"no-cors",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),n()})}static async reportError(e,i,n,r,a,s="",o=""){try{Hi>0;let c="";try{c=encodeURIComponent(top.window.location.href)}catch{c=encodeURIComponent(window.location.href)}let y=`//track-selectmedia.com/trackv2/?url=${c}&publisher=${i}&channel=${n}&tag=${r}&template=${a}&errorType=PL_${e}&selector=${o}&selectorPriority=${o}&p1=${s}`;const f=document.createElement("img");f.src=y,Hi=1}catch(c){console.log(c)}}}const Fi=class{constructor(e,i){l(this,"config");l(this,"domain");l(this,"hostname");l(this,"isDebug");l(this,"isDebugError");l(this,"autoPlay");l(this,"baseUrl");l(this,"waterfallServer");l(this,"windowsHelper");l(this,"isInArticle");l(this,"minPlayerDuration",-1);l(this,"sessionUser",Ct.NotAvailable);l(this,"dailyUser",Ct.NotAvailable);l(this,"newUser",Ct.NotAvailable);l(this,"startUpTime",performance.now());l(this,"isDebugLog",!1);l(this,"debugStep",{});l(this,"gdpr",null);l(this,"webView",0);l(this,"utmSource",0);l(this,"getHeaderHeight",()=>this.config.headerHeight);l(this,"isNewUserAndUpdate",e=>Ct.NotAvailable);l(this,"initGDPR",async()=>new Promise(async(e,i)=>{if(this.config.ignoreGFPR){this.gdpr=new wt(!1,null,null),e(this.gdpr);return}this.gdpr!=null&&e(this.gdpr);try{top.__tcfapi("getTCData",2,(n,r)=>{this.gdpr=new wt(r,n,null),e(this.gdpr)},[775,10,755,32,241,76,52,102,45,285,28,793,13,91,69])}catch(n){this.gdpr=new wt(null,null,n),e(this.gdpr)}}));l(this,"isWebView",()=>{let e="";try{e=navigator.userAgent;const i=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Android.*(wv|Version/d.d .*Chrome/d)","Linux; U; Android"],n=new RegExp("("+i.join("|")+")","ig");if(!!e.match(n))return 6}catch(i){return P.error("isWebView",i,{userAgent:e}),8}return 7});l(this,"isUtmSource",()=>{try{let e;try{e=new URLSearchParams(top.window.location.search)}catch{e=new URLSearchParams(window.location.search)}return e.get("utm_source")!=null?5:6}catch{return 7}});e.displaySchain=e.schain,e.tagId=="tag_d663b8d3-4143-4464-b293-1be61f1f6ef1"&&navigator.userAgent=="Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/20B101 [FBAN/FBIOS;FBDV/iPhone13,4;FBMD/iPhone;FBSN/iOS;FBSV/16.1.1;FBSS/3;FBID/phone;FBLC/en_GB;FBOP/5]"&&(this.isDebugLog=!0),e.enableIntentIQ=!0,e.flowType="CPM",this.sessionUser=this.isNewUserAndUpdate(Wt.SessionUser),this.dailyUser=this.isNewUserAndUpdate(Wt.DailyUser),this.newUser=this.isNewUserAndUpdate(Wt.NewUser),e.amazonWorkerLimit==-1&&(e.amazonWorkerLimit=1),e.playerType=="FLOATING"?e.playerType="1":e.playerType=="STICKY"?e.playerType="2":e.playerType="3",this.webView=this.isWebView(),this.utmSource=this.isUtmSource();let n=0;e.waterfallErrorLimitEnabled&&(n=e.errorLimit),e.unlimitedWaterfallRuns||e.waterfallRuns>n&&(n=e.waterfallRuns),n>0&&(this.minPlayerDuration=n*(e.timeBetweenWaterfalls/1e3)),this.isInArticle=!e.isSticky&&!e.isFloating,this.config=e,this.domain=i.getDomain(),this.hostname=i.getHostName(),this.domain.includes("safeframe.googlesyndication.com")&&e.defaultDomain!=""&&(this.domain=e.defaultDomain),this.hostname.includes("safeframe.googlesyndication.com")&&e.defaultDomain!=""&&(this.hostname=e.defaultDomain),e.defaultDomain!=""&&(this.domain=e.defaultDomain,this.hostname=e.defaultDomain,e.domain=e.defaultDomain),this.isDebugError=i.isDebugError(),i.isAmazonDebug()&&(e.amazonWorkerLimit=1),Fi.IGNORE_ERROR_LOG=e.ignoreErrorLog,this.isDebug=i.isDebug(),this.isDebugError=i.isDebugError(),this.windowsHelper=i,this.waterfallServer=this.config.waterfallServer+`&domain=${this.hostname}&hostname=${this.domain}&url=${this.domain}`,this.baseUrl=`${this.config.baseTrackUrl}&d3=${this.config.publisherId}&d4=${this.config.channelId}&d2=${Math.floor(Date.now()/1e3)}`,e.enableTimeWaitBetweenGoogle||(e.timeWaitBetweenGoogleInSec=0,e.enableTimeWaitBetweenGoogle=!0),e.googleAutoPlay=!0,e.notGoogleAutoPlay&&(e.googleAutoPlay=!1);try{if(e.schainDomainMap){const r=e.schainDomainMap[this.domain];r&&(this.config.schain=r,e.schain=r)}}catch{}}};let Be=Fi;l(Be,"IGNORE_ERROR_LOG",!1),l(Be,"KEY",{});var Wt=(t=>(t.SessionUser="SESSION_USER",t.DailyUser="DAILY_USER",t.NewUser="NEW_USER",t))(Wt||{}),Ct=(t=>(t[t.NotAvailable=0]="NotAvailable",t[t.New=1]="New",t[t.Old=2]="Old",t))(Ct||{});class Ji{isAmazonDebug(){try{return new URLSearchParams(top.window.location.search).get("amzn_debug_mode")==="1"}catch{return new URLSearchParams(window.location.search).get("amzn_debug_mode")==="1"}}getDomain(){try{let e=top.document.location.hostname;e.includes("translate.goog")&&(e=e.split(".translate.goog").join(""),e=e.split("-").join("."),e.startsWith("www.")&&(e=e.slice(4)));let i,n,r="weird_get_top_level_domain=cookie",a=e.split(".");for(i=a.length-1;i>=0;i--)if(n=a.slice(i).join("."),top.document.cookie=r+";domain=."+n+";",top.document.cookie.indexOf(r)>-1)return top.document.cookie=r.split("=")[0]+"=;domain=."+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",n;return top.document.location.hostname}catch{}try{let e=document.location.hostname;e.includes("translate.goog")&&(e=e.split(".translate.goog").join(""),e=e.split("-").join("."),e.startsWith("www.")&&(e=e.slice(4)));let i,n,r="weird_get_top_level_domain=cookie",a=e.split(".");for(i=a.length-1;i>=0;i--)if(n=a.slice(i).join("."),document.cookie=r+";domain=."+n+";",document.cookie.indexOf(r)>-1)return document.cookie=r.split("=")[0]+"=;domain=."+n+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",n;return document.location.hostname}catch{}try{return Yi(top.document.location.hostname.replace("www.",""),!0)}catch{}return Yi(document.location.hostname.replace("www.",""),!0)}getHostName(){let e,i;try{e=top.window,i=top.document}catch{e=window,i=document}let n=e.location.hostname;try{n.includes("translate.goog")&&(n=n.split(".translate.goog").join(""),n=n.split("-").join("."),n.startsWith("www.")&&(n=n.slice(4)))}catch{}return e.location.hostname.startsWith("www.")&&(n=e.location.hostname.slice(4)),n}isDebug(){try{return new URLSearchParams(top.window.location.search).get("sm_debug")==="true"}catch{return new URLSearchParams(window.location.search).get("sm_debug")==="true"}}isMockTagId(){try{return new URLSearchParams(top.window.location.search).get("sm_tagid")}catch{return new URLSearchParams(window.location.search).get("sm_tagid")}}isDebugError(){try{return new URLSearchParams(top.window.location.search).get("sm_debug_error")==="true"}catch{return new URLSearchParams(window.location.search).get("sm_debug_error")==="true"}}}function Yi(t,e){let i;if(t.indexOf("://")>-1?i=t.split("/")[2]:i=t.split("/")[0],i=i.split(":")[0],i=i.split("?")[0],e){let n=i.split(".");i=n[n.length-2]+"."+n[n.length-1]}return i}function ne(){}function Qi(t){return t()}function Xi(){return Object.create(null)}function yt(t){t.forEach(Qi)}function Zi(t){return typeof t=="function"}function Ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Kt;function ot(t,e){return Kt||(Kt=document.createElement("a")),Kt.href=e,t===Kt.href}function fr(t){return Object.keys(t).length===0}function bi(t,...e){if(t==null)return ne;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function j(t){let e;return bi(t,i=>e=i)(),e}function Ne(t,e,i){t.$$.on_destroy.push(bi(e,i))}function N(t,e){t.appendChild(e)}function ke(t,e,i){t.insertBefore(e,i||null)}function Pe(t){t.parentNode.removeChild(t)}function hr(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function G(t){return document.createElement(t)}function It(t){return document.createTextNode(t)}function ue(){return It(" ")}function wi(){return It("")}function Ot(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function L(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function gr(t){return Array.from(t.childNodes)}function Gt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e,i,n){i===null?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function ve(t,e,i){t.classList[i?"add":"remove"](e)}let Lt;function qt(t){Lt=t}function jt(){if(!Lt)throw new Error("Function called outside component initialization");return Lt}function dt(t){jt().$$.on_mount.push(t)}function pr(t){jt().$$.on_destroy.push(t)}function Z(t,e){return jt().$$.context.set(t,e),e}function R(t){return jt().$$.context.get(t)}function xr(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const zt=[],Re=[],Ht=[],$i=[],en=Promise.resolve();let Ii=!1;function tn(){Ii||(Ii=!0,en.then(nn))}function Mt(){return tn(),en}function Mi(t){Ht.push(t)}const Pi=new Set;let Jt=0;function nn(){const t=Lt;do{for(;Jt<zt.length;){const e=zt[Jt];Jt++,qt(e),mr(e.$$)}for(qt(null),zt.length=0,Jt=0;Re.length;)Re.pop()();for(let e=0;e<Ht.length;e+=1){const i=Ht[e];Pi.has(i)||(Pi.add(i),i())}Ht.length=0}while(zt.length);for(;$i.length;)$i.pop()();Ii=!1,Pi.clear(),qt(t)}function mr(t){if(t.fragment!==null){t.update(),yt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Mi)}}const Yt=new Set;let At;function Fe(){At={r:0,c:[],p:At}}function Ue(){At.r||yt(At.c),At=At.p}function B(t,e){t&&t.i&&(Yt.delete(t),t.i(e))}function H(t,e,i,n){if(t&&t.o){if(Yt.has(t))return;Yt.add(t),At.c.push(()=>{Yt.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}}function Ce(t){t&&t.c()}function Ee(t,e,i,n){const{fragment:r,on_mount:a,on_destroy:s,after_update:o}=t.$$;r&&r.m(e,i),n||Mi(()=>{const c=a.map(Qi).filter(Zi);s?s.push(...c):yt(c),t.$$.on_mount=[]}),o.forEach(Mi)}function De(t,e){const i=t.$$;i.fragment!==null&&(yt(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function yr(t,e){t.$$.dirty[0]===-1&&(zt.push(t),tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function je(t,e,i,n,r,a,s,o=[-1]){const c=Lt;qt(t);const d=t.$$={fragment:null,ctx:null,props:a,update:ne,not_equal:r,bound:Xi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Xi(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};s&&s(d.root);let y=!1;if(d.ctx=i?i(t,e.props||{},(f,p,...x)=>{const E=x.length?x[0]:p;return d.ctx&&r(d.ctx[f],d.ctx[f]=E)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](E),y&&yr(t,f)),p}):[],d.update(),y=!0,yt(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const f=gr(e.target);d.fragment&&d.fragment.l(f),f.forEach(Pe)}else d.fragment&&d.fragment.c();e.intro&&B(t.$$.fragment),Ee(t,e.target,e.anchor,e.customElement),nn()}qt(c)}class He{$destroy(){De(this,1),this.$destroy=ne}$on(e,i){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!fr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pt=[];function Ar(t,e){return{subscribe:re(t,e).subscribe}}function re(t,e=ne){let i;const n=new Set;function r(o){if(Ge(t,o)&&(t=o,i)){const c=!Pt.length;for(const d of n)d[1](),Pt.push(d,t);if(c){for(let d=0;d<Pt.length;d+=2)Pt[d][0](Pt[d+1]);Pt.length=0}}}function a(o){r(o(t))}function s(o,c=ne){const d=[o,c];return n.add(d),n.size===1&&(i=e(r)||ne),o(t),()=>{n.delete(d),n.size===0&&(i(),i=null)}}return{set:r,update:a,subscribe:s}}function rn(t,e,i){const n=!Array.isArray(t),r=n?[t]:t,a=e.length<2;return Ar(i,s=>{let o=!1;const c=[];let d=0,y=ne;const f=()=>{if(d)return;y();const x=e(n?c[0]:c,s);a?s(x):y=Zi(x)?x:ne},p=r.map((x,E)=>bi(x,v=>{c[E]=v,d&=~(1<<E),o&&f()},()=>{d|=1<<E}));return o=!0,f(),function(){yt(p),y()}})}class Qt{constructor(e,i){this.width=e,this.height=i}}const Et={},$e={},Tt={},Xt={},Ei={},Zt={},sn={},an={},Di={},on={},$t={},ki={},Ri={},ln={},ei={};var Oe=(t=>(t[t.PLAY=0]="PLAY",t[t.STOP=1]="STOP",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.HEAVY_AD=4]="HEAVY_AD",t))(Oe||{});const ti={},Ci={};class Nt{constructor(e,i){this.show=e,this.vidSplayURL=i}}class ii{constructor(e,i,n){l(this,"show",!1);this.viewAbility=e,this.top=i,this.height=n}}function Sr(t){return new Promise((e,i)=>{let n=document.createElement("script");n.src=t,n.async=!0,n.onload=function(){e(!0)},n.onerror=function(){e(!1)},document.head.appendChild(n)})}function vr(t,e){return new Promise((i,n)=>{let r=t.createElement("script");r.src=e,r.async=!0,r.onload=function(){i(!0)},r.onerror=function(){i(!1)},t.head.appendChild(r)})}function br(t){if(t.length==0)return[];const e=[];for(let i=0;i<t.length;i++)try{let n=[],r=new Ye,a=!0;const s=t[i];if(s.type!=le.PREBID)continue;const o=JSON.parse(s.prebidJson);o.bids[0].params.floorPrice=s.floorPrice,n.push(...o.bids),r.code=o.code,r.mediaTypes=o.mediaTypes,r.ad=s,r.bids=n,e.push(r)}catch{}return e}function wr(t){let e={};for(let i=0;i<t.length;i++){const n=t[i].ad,r=t[i].bids[0].bidder;if(n.advertiserEnableSellerIdOverride==!1){if(e[r]==null){e[r]=t[i];continue}Math.random()<.5&&(e[r]=t[i]);continue}if(e[r]==null){e[r]=t[i];continue}Math.random()<.5&&(e[r]=t[i])}return Ir(t,e)}function Ir(t,e){let i=[];for(let n in e){const r=e[n];for(let a=0;a<t.length;a++){const s=t[a];lr(r,s)&&i.push(t[a])}}return i}const ut=async(t,e={timeout:1e3,retry:10})=>{const{timeout:i=6e3,retry:n=10}=e,r=new AbortController;let a;try{const s=setTimeout(()=>{r.abort()},i);a=await fetch(t,Ki(Ft({},e),{signal:r.signal})),clearTimeout(s)}catch{if(e.retry=n-1,e.retry<0)throw new Error("time out to "+t);return e.timeout=e.timeout+2e3,ut(t,e)}return a};function Mr(t,e,i){return new Promise((n,r)=>{let a=0;const s=()=>{const o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=()=>{o.status===200?n(o.response):a<e?(a++,s()):r(new Error(`Request failed after ${e} retries`))},o.onerror=()=>{a<e?(a++,s()):r(new Error(`Request failed after ${e} retries`))},o.timeout=i,o.ontimeout=()=>{a<e?(a++,s()):r(new Error(`Request timed out after ${e} retries`))},o.send()};s()})}const cn={},Dt={};function Pr(t,e,i,n,r,a,s,o,c){return new St(t,e,i,n,r,a,o,c)}const Ai=class{constructor(e,i,n,r,a,s,o,c,d){l(this,"google");l(this,"adDisplayContainer");l(this,"adsLoader");l(this,"autoplayAllowed");l(this,"autoplayRequiresMuted");l(this,"adsManager");l(this,"adsInitialized");l(this,"videoElement");l(this,"adContainerElement");l(this,"url","//imasdk.googleapis.com/js/sdkloader/ima3.js");l(this,"store");l(this,"id");l(this,"status");l(this,"initialSize");l(this,"vastModel");l(this,"adTagUrl");l(this,"adTagXml");l(this,"isMobile");l(this,"isFirstInit",!1);l(this,"googleLimitManager");l(this,"logger");l(this,"adsLoaderAdsManagerLoaded");l(this,"calltime");l(this,"configManager");l(this,"playAdSound",!0);l(this,"waitForStatus",e=>new Promise(async(i,n)=>{if(this.status=="error"){i(!1);return}if(e===this.status){i(!0);return}i(!1)}));l(this,"init",async(e,i)=>{try{return this.googleLimitManager=i,this.status="init",this.status="ready",this.google=window.google,!0}catch(n){P.error("play1",n)}});l(this,"firstInit",()=>{try{this.isFirstInit=!0;try{const r=this;if(this.configManager.config.adsSoundOn){let a=function(s){r.playAdSound!=!1&&(r.videoElement&&(r.videoElement.volume=.01,r.videoElement.muted=!1),r.adsManager&&r.adsManager.setVolume(.01))};top.window.addEventListener("click",a)}}catch(r){console.log("err",r)}this.googleLimitManager.getPauseAdGoogleVideoAd().subscribe(r=>{try{if(this.vastModel!=null&&this.vastModel.imaVastModel!=null){if(this.vastModel.imaVastModel.type!==le.IMA)return;this.adsManager!=null&&(r?this.adsManager.resume():this.adsManager.pause())}}catch{}});const i=this.adContainerElement,n=this.videoElement;this.google.ima.settings.setVpaidMode(this.google.ima.ImaSdkSettings.VpaidMode.INSECURE),this.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adDisplayContainer=new this.google.ima.AdDisplayContainer(i,n),this.adsLoader=new this.google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(this.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsLoaderAdsManagerLoaded,!1),this.adsLoader.addEventListener(this.google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderAdError,!1),this.videoElement.onended=this.contentEndedListener,this.configManager.config.adsSoundOn==!1&&(this.videoElement.volume=0,this.videoElement.muted=!0);var e=this.videoElement.play();return e!==void 0&&(this.autoplayAllowed=!0,this.autoplayRequiresMuted=!0),!0}catch(i){this.logger.Info("firstInit err",this.id,i),P.error("play1",i)}});l(this,"onAdsLoaderAdsManagerLoaded",e=>{try{this.adsLoaderAdsManagerLoaded=!0,e.getAdsManager(this.videoElement).setVolume(0);const i=e.getUserRequestContext();this.store.set(new qe(D.ADS_LOADER_ADS_MANAGER_LOADED,this,i.imaVastModel,this.id,e))}catch(i){this.logger.Info("onAdsLoaderAdsManagerLoaded err",this.id,i)}});l(this,"onAdsLoaderAdError",e=>{try{this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,null,this.id,e.getError())),this.videoElement.play()}catch(i){P.error("play2",i)}});l(this,"contentEndedListener",()=>{this.adsLoader&&this.adsLoader.contentComplete()});l(this,"playAdsManagerLoaded",e=>{e.getUserRequestContext().imaVastModel;var i=new this.google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.bitrate=1024,i.loadVideoTimeout=1e3*50,this.adsManager=e.getAdsManager(this.videoElement,i),this.configManager.config.adsSoundOn==!1&&this.adsManager.setVolume(0),this.adsManager.addEventListener(this.google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.LOADED,this.onAdEvent),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.STARTED,this.onAdEvent),this.adsManager.addEventListener(this.google.ima.AdEvent.Type.COMPLETE,this.onAdEvent);for(const n in D)this.adsManager.addEventListener(D[n],this.onEvent(e.getUserRequestContext()));this.playAds()});l(this,"playAds",()=>{try{this.adsInitialized||(this.adDisplayContainer.initialize(),this.adsInitialized=!0),this.adsManager.init(this.initialSize.width,this.initialSize.height,this.google.ima.ViewMode.NORMAL),this.adsManager.start(),this.adsManager.setVolume(0)}catch{try{this.videoElement.play()}catch(i){P.error("play3",i)}}});l(this,"onAdEvent",e=>{var i=e.getAd();switch(e.type){case this.google.ima.AdEvent.Type.LOADED:if(!i.isLinear())try{this.videoElement.play()}catch(n){P.error("play4",n)}break}});l(this,"onEvent",e=>i=>{try{if(i.type==D.AD_CAN_PLAY){if(this.adTagXml!=""||this.adTagUrl&&!this.adTagUrl.includes("servedby.grouprvn.com")){let r="";this.adContainerElement.querySelectorAll("video").forEach(function(c){c.src!=""&&(r=c.src)});const s={adTagUrl:this.adTagUrl,videoUrl:r},o=new qe(D.AD_VIDEO_URL,this,e.imaVastModel.adSourceKey,this.id,s);this.store.set(o)}return}const n=new qe(i.type,this,e.imaVastModel.adSourceKey,this.id,i);if(i.type==D.IMPRESSION){Ai.uuids.set(e.imaVastModel.uuid,!0);try{n.duration=Math.round(i.getAd().getDuration())}catch{}}if(i.type==D.LOG,i.VOLUME_CHANGED==D.LOG&&this.configManager.config.adsSoundOn==!1)try{this.videoElement.volume=0,this.videoElement.muted=!0,this.adsManager!=null&&this.adsManager.setVolume(0)}catch{}this.store.set(n)}catch(n){P.error("event_errorv2",n,{})}});l(this,"onAdError",e=>{try{try{if(this.adTagXml!=""||this.adTagUrl&&!this.adTagUrl.includes("servedby.grouprvn.com")){let i="";this.adContainerElement.querySelectorAll("video").forEach(function(s){s.src!=""&&(i=s.src)});const r={adTagUrl:this.adTagUrl,videoUrl:i,error:e.getError().data,errorCode:e.getError().data.errorCode,type:e.getError().data.type,errorMessage:e.getError().data.errorMessage},a=new qe(D.AD_VIDEO_URL_ERROR,this,null,this.id,r);this.store.set(a)}}catch(i){P.error("vast_error_12_error",i,{})}this.store.set(new qe(D.AD_ERROR,this,null,this.id,e)),this.videoElement.play()}catch(i){P.error("play6",i)}});l(this,"onContentPauseRequested",()=>{try{this.videoElement.pause(),this.videoElement.onended=null}catch(e){P.error("play11",e)}});l(this,"onContentResumeRequested",()=>{this.videoElement.onended=this.contentEndedListener});l(this,"imaValid",()=>new Promise(async(e,i)=>{if(!await this.waitForStatus("ready")){e(!1);return}try{var r=new this.google.ima.AdsRequest}catch{e(!1);return}e(!0)}));l(this,"playVast",async(e,i,n,r)=>{if(this.playAdSound=!0,e==null&&r==null||e==""&&r==""){await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null));return}if(Ai.uuids.has(i.imaVastModel.uuid)){await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null));return}this.isFirstInit||this.firstInit();try{e&&e.startsWith("https://")&&(e=e.replace("https:",""))}catch(s){P.error("playVast_replace_http",s,{adTagUrl:e}),await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null));return}if(e&&(e.startsWith("//serv-selectmedia.com/cdn")||e.startsWith("http://localhost")))try{r=await(await ut(e,{timeout:4e3,retry:1})).text()}catch(s){P.error("playVast_fetch_cdn",s,{adTagUrl:e}),await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null));return}try{if(this.vastModel=i,await this.waitForStatus("ready")==!1){await vt(100),P.error("google_not_ready_1",null,{adTagUrl:e,vastXml:r}),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null));return}if(!this.google||!this.google.ima){await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null)),P.error("google_not_ready_v2",null,{adTagUrl:e,vastXml:r});return}var a=new this.google.ima.AdsRequest;a.vastLoadTimeout=1e4,r?(this.adTagUrl=e,a.adTagUrl="",a.adsResponse=r,this.adTagXml=r):(this.adTagUrl=e,this.adTagXml=r,a.adTagUrl=e),this.adsManager!=null&&this.adsManager.destroy(),this.calltime=new Date,this.adsLoader.requestAds(a,i)}catch(s){s.message.contins("Blocked a restricted frame with origin")||P.error("playVast_fetch",s,{adTagUrl:e,key:i,vastXml:r}),await vt(100),this.store.set(new qe(D.ADS_LOADER_AD_ERROR,this,i.imaVastModel.adSourceKey,this.id,null))}});this.videoElement=i,this.id=a,this.isMobile=e,this.store=r,this.adContainerElement=n,this.vastModel=null,d&&(this.url=d),this.status="new",this.initialSize=s,this.adsLoaderAdsManagerLoaded=!1,this.logger=o,this.configManager=c}getVastModel(){return this.vastModel}getStore(){return this.store}getActiveVastModel(){return this.vastModel}stop(){this.adsManager!=null&&this.adsManager.destroy()}skip(){this.adsManager!=null&&this.adsManager.skip()}setVolume(e){this.playAdSound=!1,this.adsManager.setVolume(e)}resizeAd(e){this.initialSize=e,this.adsManager!=null&&this.adsManager.resize(e.width,e.height)}pauseAd(){try{this.adsManager!=null&&this.adsManager.pause()}catch(e){P.error("play12",e)}}resumeAd(){this.adsManager!=null&&this.adsManager.resume()}getAdsManager(){return this.adsManager}};let St=Ai;l(St,"uuids",new Map);class qe{constructor(e,i,n,r,a,s){l(this,"duration",0);this.adEvent=e,this.imaManager=i,this.key=n,this.id=r,this.data=a,this.enableVidSplay=s}}const vt=t=>new Promise(e=>setTimeout(e,t));var D=(t=>(t.PASS_BACK="passBack",t.ENABLE_AUTO_PLAY_AFTER_TIME_PASS="enableAutoPlayAfterTimePass",t.LOGIC_VIDEO_WAITING="logic_video_waiting",t.ADS_LOADER_ADS_MANAGER_LOADED="adsLoaderAdsManagerLoaded",t.ADS_LOADER_AD_ERROR="adsLoaderAdError",t.AD_CAN_PLAY="adCanPlay",t.AD_ERROR="adError",t.VAST_ERROR="vastError",t.REQUEST="request",t.PREBID_REQUEST="prebidRequest",t.BID="Bid",t.NO_ADS="noAds",t.AD_BREAK_READY="adBreakReady",t.AD_BUFFERING="adBuffering",t.AD_METADATA="adMetadata",t.ALL_ADS_COMPLETED="allAdsCompleted",t.CLICK="click",t.COMPLETE="complete",t.CONTENT_PAUSE_REQUESTED="contentPauseRequested",t.CONTENT_RESUME_REQUESTED="contentResumeRequested",t.DURATION_CHANGE="durationChange",t.FIRST_QUARTILE="firstQuartile",t.IMPRESSION="impression",t.INTERACTION="interaction",t.LINEAR_CHANGED="linearChanged",t.LOADED="loaded",t.LOG="log",t.MIDPOINT="midpoint",t.PAUSED="pause",t.RESUMED="resume",t.SKIPPABLE_STATE_CHANGED="skippableStateChanged",t.SKIPPED="skip",t.STARTED="start",t.THIRD_QUARTILE="thirdQuartile",t.USER_CLOSE="userClose",t.VOLUME_CHANGED="volumeChange",t.VOLUME_MUTED="mute",t.AD_VIDEO_URL="AD_VIDEO_URL",t.AD_VIDEO_URL_ERROR="AD_VIDEO_URL_ERROR",t))(D||{});class ni{constructor(e,i){this.logLevel=e,this.data=i}}class st{constructor(e){l(this,"logEventStore");this.logEventStore=e}Info(...e){this.logEventStore.set(new ni("info",e))}Warn(...e){this.logEventStore.set(new ni("warn",e))}Error(...e){this.logEventStore.set(new ni("error",e))}Debug(...e){this.logEventStore.set(new ni("debug",e))}}l(st,"KEY",{});var O=(t=>(t[t.PlayerLoaded=0]="PlayerLoaded",t[t.Inventory=1]="Inventory",t[t.InventoryRequest=2]="InventoryRequest",t[t.Request=3]="Request",t[t.Bid=4]="Bid",t[t.Impression=5]="Impression",t[t.ViewableImpression=6]="ViewableImpression",t[t.Opportunity=7]="Opportunity",t[t.Error=8]="Error",t[t.Buffering=9]="Buffering",t[t.Loaded=10]="Loaded",t[t.Started=11]="Started",t[t.FirstQuartile=12]="FirstQuartile",t[t.Midpoint=13]="Midpoint",t[t.ThirdQuartile=14]="ThirdQuartile",t[t.Complete=15]="Complete",t[t.Click=16]="Click",t[t.Paused=17]="Paused",t[t.Resumed=18]="Resumed",t[t.Skipped=19]="Skipped",t[t.SkippableStateChanged=20]="SkippableStateChanged",t[t.VolumeChanged=21]="VolumeChanged",t[t.Muted=22]="Muted",t[t.Metadata=23]="Metadata",t[t.BreakReady=24]="BreakReady",t[t.ContentPauseRequested=25]="ContentPauseRequested",t[t.ContentResumeRequested=26]="ContentResumeRequested",t[t.AllAdsCompleted=27]="AllAdsCompleted",t[t.DurationChange=28]="DurationChange",t[t.Interaction=29]="Interaction",t[t.LinearChanged=30]="LinearChanged",t[t.Log=31]="Log",t[t.UserClose=32]="UserClose",t[t.CanPlay=33]="CanPlay",t[t.ExpandedChanged=34]="ExpandedChanged",t[t.PrebidRequest=35]="PrebidRequest",t[t.TrafficSourceInventory=36]="TrafficSourceInventory",t[t.PreloaderError=41]="PreloaderError",t[t.PreloaderLoaded=42]="PreloaderLoaded",t[t.PassBackError=43]="PassBackError",t[t.PassBackLoaded=44]="PassBackLoaded",t[t.AdsManagerLoaded=45]="AdsManagerLoaded",t[t.PreloaderJSONError=46]="PreloaderJSONError",t[t.FirstTimeViewable=47]="FirstTimeViewable",t[t.DuplicatePlayerLoaded=48]="DuplicatePlayerLoaded",t[t.DuplicateTagSplit=49]="DuplicateTagSplit",t[t.TagLoadError=50]="TagLoadError",t[t.Close=51]="Close",t[t.FloatingImpression=52]="FloatingImpression",t[t.PingSec15=53]="PingSec15",t[t.PingSec30=54]="PingSec30",t[t.PingSec45=55]="PingSec45",t[t.PingSec60=56]="PingSec60",t[t.PingSec90=57]="PingSec90",t[t.PingSec120=58]="PingSec120",t[t.PingSec150=59]="PingSec150",t[t.PingSec300=60]="PingSec300",t[t.PingSec600=61]="PingSec600",t[t.PingSec3=62]="PingSec3",t[t.PingSec10=63]="PingSec10",t[t.ImpressionInSession2=64]="ImpressionInSession2",t[t.ImpressionInSession3=65]="ImpressionInSession3",t[t.ImpressionInSession4=66]="ImpressionInSession4",t[t.ImpressionInSession5=67]="ImpressionInSession5",t[t.ImpressionInSession6=68]="ImpressionInSession6",t[t.ImpressionInSession7=69]="ImpressionInSession7",t[t.ImpressionInSession8=70]="ImpressionInSession8",t[t.ImpressionInSession9=71]="ImpressionInSession9",t[t.ImpressionInSession10=72]="ImpressionInSession10",t[t.ImpressionInSession11=73]="ImpressionInSession11",t[t.ImpressionInSession12=74]="ImpressionInSession12",t[t.ImpressionInSession13=75]="ImpressionInSession13",t[t.ImpressionInSession14=76]="ImpressionInSession14",t[t.ImpressionInSession15=77]="ImpressionInSession15",t[t.ImpressionInSession16AndMore=78]="ImpressionInSession16AndMore",t[t.BlockedRequest=79]="BlockedRequest",t[t.GeneralError=80]="GeneralError",t[t.VastLoadTimeout=81]="VastLoadTimeout",t[t.FailedToRequestAds=82]="FailedToRequestAds",t[t.UnknownAdResponse=83]="UnknownAdResponse",t[t.VastNoAdsAfterWrapper=84]="VastNoAdsAfterWrapper",t[t.AdBlocker=85]="AdBlocker",t[t.PlayerTerminated=86]="PlayerTerminated",t))(O||{});const dn=[3,2,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,80,81,82,83,84,79];class Er{constructor(e,i){this.eventType=e,this.url=i}}function Dr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)})}function un(){return Date.now()+"-"+Dr()}const ft={};class kr{constructor(e,i,n,r=!1,a,s,o,c,d,y,f){l(this,"baseUrl");l(this,"debug");l(this,"selectMediaEventStore");l(this,"selectMediaBulkEventStore");l(this,"windowsHelper");l(this,"viewabilityPercentageStore");l(this,"playerSizeStore");l(this,"isRunningFloatingMode");l(this,"waterFallRuns");l(this,"sessionDuration");l(this,"adsManagerLoaded");l(this,"extraEventInfo");l(this,"requestEvents",[]);l(this,"bulkEvent");l(this,"isBulkEventEmpty");l(this,"eventDispatcher");l(this,"configManager");l(this,"logger");this.baseUrl=e,this.debug=r,this.selectMediaEventStore=i,this.windowsHelper=n,this.viewabilityPercentageStore=a,this.playerSizeStore=s,this.isRunningFloatingMode=o,this.waterFallRuns=0,this.sessionDuration=0,this.adsManagerLoaded=0,this.isBulkEventEmpty=!0,this.eventDispatcher=c,this.configManager=d,this.selectMediaBulkEventStore=y,this.logger=f,this.extraEventInfo=[1,2,3,4,5,6,16,15,47,52],this.bulkEvent=new Oi,setInterval(()=>{let p=[];try{let x=this.requestEvents;if(this.requestEvents=[],x.length==0)return;ut("//track-selectmedia.com/trackv4?bulk=true&hostname="+window.location.href,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})}catch(x){P.error("post_log",x,{x:p})}},5e3),setInterval(()=>{try{let p=JSON.parse(JSON.stringify(this.bulkEvent));if(this.bulkEvent=new Oi,Cr(p.Channels))return;this.selectMediaBulkEventStore.set(p)}catch(p){this.bulkEvent=new Oi,P.error("bulkEvent_setInterval",p)}},5e3)}setAdsManagerLoaded(e){this.adsManagerLoaded=e}setSessionDuration(e){e>360&&(e=360),this.sessionDuration=e}setWaterFallRuns(e){e>70&&(e=70),this.waterFallRuns=e}setBaseUrl(e){this.baseUrl=e}DispatchEvent(e,i){try{if(e==4&&this.eventDispatcher.dispatchEvent({type:"bid",message:""}),e==3&&this.configManager.config.publisherId=="02e0283e-7e2e-49d6-8af8-041b6c5c1e33"&&Math.floor(Math.random()*90)>10)return;let n=this.baseUrl;if(location.protocol==="http:"&&(n=n.replace(/^https:\/\//i,"//")),n.includes("&d5=")||(n=n+`&d5=${this.configManager.domain}`),n=n+`&d28=${Ut}`,n=n+`&d33=${this.configManager.config.iframeWorkers}`,n=n+`&d34=${this.configManager.minPlayerDuration}`,n=n+`&d35=${this.configManager.config.playerType}`,n=n+`&d36=${this.configManager.webView}`,n=n+`&d37=${this.configManager.utmSource}`,n=n+`&d38=${this.configManager.newUser}`,n=n+`&d40=${this.configManager.config.googleWorkers}`,this.extraEventInfo.includes(e)){let o=j(this.viewabilityPercentageStore);o=Math.round(o*10)/10,j(this.isRunningFloatingMode)&&(o=1);const c=j(this.playerSizeStore);i!=null&&i.enableSelectedAdsSourceSize?n=n+`&d26=${i.selectedAdsSourceSize.width+"x"+i.selectedAdsSourceSize.height}`:n=n+`&d26=${c.width+"x"+c.height}`,n=n+`&d27=${o}`}const r=n;let a="";if(i!=null){try{i.type==le.AMAZON&&(i.eventParams.findIndex(d=>d==="cpm")===-1&&i.eventParams.push("cpm"),i.eventParams.findIndex(d=>d==="amznbId")===-1&&i.eventParams.push("amznbId")),i.type==le.Display&&i.eventParams.findIndex(c=>c==="cpm")===-1&&i.eventParams.push("cpm")}catch{}for(let o=0;o<i.eventParams.length;o++){const c=i.eventParams[o],d=i[c];d!==void 0&&(n=n+"&"+c+"="+d,a=a+"&"+c+"="+d)}e==5&&(n=n+`&d30=${i.duration}`),n=n+"&adsourceId="+i.id}n=n+`&cb=${un()}&e=${e}`,this.debug&&(n=n+`&eventName=${O[e]}`);const s=this.configManager.config.allEventsGet&&this.configManager.config.allEventsNotGetDoubleCheck;if(dn.includes(e)&&s==!1)try{i!=null?this.bulkEvent.addAdSourceEvent(r,a,e):this.bulkEvent.addChannels(r,e);return}catch(o){P.error("bulkEvent_v2",o,{channelKey:r,adSourceKey:a,eventType:e})}if(dn.includes(e)){this.requestEvents.push(n);return}this.selectMediaEventStore.set(new Er(e,n))}catch(n){P.error("send_event_error",n,{eventType:e,adSource:i})}}}class Oi{constructor(){l(this,"Channels");l(this,"addChannels",(e,i)=>{if(!this.Channels[e]){const n=new fn;this.Channels[e]=n}this.Channels[e].addEvent(i)});l(this,"addAdSourceEvent",(e,i,n)=>{if(!this.Channels[e]){const r=new fn;this.Channels[e]=r}this.Channels[e].addAdSourceEvent(i,n)});this.Channels=new Map}}class fn{constructor(){l(this,"BulkAdSource");l(this,"Event");l(this,"addEvent",e=>{this.Event[e]||(this.Event[e]=0),this.Event[e]=this.Event[e]+1});l(this,"addAdSourceEvent",(e,i)=>{this.BulkAdSource[e]||(this.BulkAdSource[e]=new Rr),this.BulkAdSource[e].addEvent(i)});this.Event={},this.BulkAdSource={}}}class Rr{constructor(){l(this,"Event");l(this,"addEvent",e=>{this.Event[e]||(this.Event[e]=0),this.Event[e]=this.Event[e]+1});this.Event={}}}function Cr(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Li=(t=>(t.preloader="preloader",t.passBack="passBack",t))(Li||{}),Ra=(()=>`.pl-ps-frame.svelte-1kly348{border:none;min-width:300px;min-height:250px;background-color:transparent;vertical-align:middle}
`)();function Or(t){let e,i,n;return{c(){e=G("iframe"),L(e,"class","pl-ps-frame svelte-1kly348"),L(e,"height",t[1]),L(e,"id",i="sm_"+t[0]),L(e,"width",t[2]),ot(e.src,n=t[3])||L(e,"src",n)},m(r,a){ke(r,e,a),t[6](e)},p(r,[a]){a&2&&L(e,"height",r[1]),a&1&&i!==(i="sm_"+r[0])&&L(e,"id",i),a&4&&L(e,"width",r[2]),a&8&&!ot(e.src,n=r[3])&&L(e,"src",n)},i:ne,o:ne,d(r){r&&Pe(e),t[6](null)}}}function Lr(t,e,i){const n=R(st.KEY);let r,{frameCode:a}=e,{frameType:s}=e,{frameHeight:o}=e,{frameWidth:c}=e;R(ft);const d=R(Be.KEY);let{url:y}=e;const f=R($e);dt(()=>{i(4,r.onload=function(){f.subscribe(x=>{let E=1;E=x.height/(o+1),!(E>2||E<0)&&r!=null&&(i(4,r.style.transform="scale("+E+")",r),i(4,r.style.border="none",r),i(4,r.style.backgroundColor="transparent",r))}),n.Info("onload",s,r,y,d.config.preloaderBeforeWaitInMil)},r),n.Info("display frame",s,r,y,d.config.preloaderBeforeWaitInMil);try{if(d.config.houseAdImageSrc!=""&&i(5,a=a.replaceAll("https://sm1.selectmedia.asia/cdn/files/b75d12e4-3091-4c6f-a6d9-d5deaf55fb5e",d.config.houseAdImageSrc)),d.config.houseAdClick!=""&&i(5,a=a.replaceAll("https://aliexpress.com",d.config.houseAdClick)),d.config.houseAdImageSrcArray!=null)try{for(let x=0;x<d.config.houseAdImageSrcArray.length;x++){const E=d.config.houseAdImageSrcArray[x];i(5,a=a.replaceAll(E.source,E.des))}}catch{}r.contentDocument.open(),r.contentDocument.write(a),r.contentDocument.close(),i(4,r.contentDocument.body.style.margin=0,r),i(4,r.contentDocument.body.style.padding=0,r)}catch{}});function p(x){Re[x?"unshift":"push"](()=>{r=x,i(4,r)})}return t.$$set=x=>{"frameCode"in x&&i(5,a=x.frameCode),"frameType"in x&&i(0,s=x.frameType),"frameHeight"in x&&i(1,o=x.frameHeight),"frameWidth"in x&&i(2,c=x.frameWidth),"url"in x&&i(3,y=x.url)},[s,o,c,y,r,a,p]}class hn extends He{constructor(e){super(),je(this,e,Lr,Or,Ge,{frameCode:5,frameType:0,frameHeight:1,frameWidth:2,url:3})}}var Ca=(()=>`.vidsplay-frame.svelte-owa1u0{border:none;min-width:300px;min-height:250px;background-color:transparent}
`)();function qr(t){let e,i;return{c(){e=G("iframe"),L(e,"class","vidsplay-frame svelte-owa1u0"),L(e,"height",t[1]),L(e,"id","sm_vidsplay"),L(e,"width",t[2]),ot(e.src,i=t[0])||L(e,"src",i)},m(n,r){ke(n,e,r),t[4](e)},p(n,[r]){r&2&&L(e,"height",n[1]),r&4&&L(e,"width",n[2]),r&1&&!ot(e.src,i=n[0])&&L(e,"src",i)},i:ne,o:ne,d(n){n&&Pe(e),t[4](null)}}}function zr(t,e,i){R(st.KEY);let n,{src:r}=e,{frameHeight:a}=e,{frameWidth:s}=e;R(ft),R($e).subscribe(d=>{let y=1;y=d.height/(a+1),!(y>2||y<0)&&n!=null&&(i(3,n.style.transform="scale("+y+")",n),i(3,n.style.border="none",n),i(3,n.style.backgroundColor="transparent",n))});function c(d){Re[d?"unshift":"push"](()=>{n=d,i(3,n)})}return t.$$set=d=>{"src"in d&&i(0,r=d.src),"frameHeight"in d&&i(1,a=d.frameHeight),"frameWidth"in d&&i(2,s=d.frameWidth)},[r,a,s,n,c]}class Tr extends He{constructor(e){super(),je(this,e,zr,qr,Ge,{src:0,frameHeight:1,frameWidth:2})}}var Oa=(()=>`.hidden.svelte-11jsstl{display:none!important}.loader-wrapper.svelte-11jsstl{display:flex;align-items:center;justify-content:center;background-color:#fff;position:absolute;top:0;left:0;z-index:2}
`)();function gn(t){let e,i,n;return{c(){e=G("a"),i=G("img"),L(i,"class","sm-preloader-img"),ot(i.src,n=t[4])||L(i,"src",n),L(i,"alt",t[5]),L(e,"href",t[5]),L(e,"target","_blank"),F(e,"cursor","pointer")},m(r,a){ke(r,e,a),N(e,i),t[20](i)},p(r,a){a[0]&16&&!ot(i.src,n=r[4])&&L(i,"src",n),a[0]&32&&L(i,"alt",r[5]),a[0]&32&&L(e,"href",r[5])},d(r){r&&Pe(e),t[20](null)}}}function pn(t){let e,i;return e=new hn({props:{frameCode:t[0],url:_r,frameHeight:t[13].config.preloaderHeight,frameWidth:t[13].config.preloaderWidth,frameType:Li.preloader}}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p(n,r){const a={};r[0]&1&&(a.frameCode=n[0]),e.$set(a)},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function xn(t){let e,i;return e=new hn({props:{frameCode:t[1],url:Vr,frameHeight:t[13].config.passBackHeight,frameWidth:t[13].config.passBackWidth,frameType:Li.passBack}}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p(n,r){const a={};r[0]&2&&(a.frameCode=n[1]),e.$set(a)},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function mn(t){let e,i;return e=new Tr({props:{frameHeight:t[13].config.passBackHeight,frameWidth:t[13].config.passBackWidth,src:t[3].vidSplayURL}}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p(n,r){const a={};r[0]&8&&(a.src=n[3].vidSplayURL),e.$set(a)},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function Nr(t){let e,i,n,r,a,s,o=t[8]&&!t[3].show&&!t[14]&&gn(t),c=t[13].config.enablePreloader&&!t[9]&&t[10]&&t[7]&&!t[3].show&&pn(t),d=t[13].config.enablePassBack&&t[9]&&t[10]&&t[7]&&!t[3].show&&xn(t),y=t[3].show&&t[7]&&mn(t);return{c(){e=G("div"),i=G("div"),o&&o.c(),n=ue(),c&&c.c(),r=ue(),d&&d.c(),a=ue(),y&&y.c(),L(e,"class","sm-prloader-passback svelte-11jsstl"),F(e,"height",t[6].height+"px"),F(e,"width",t[6].width+"px"),ve(e,"loader-wrapper",t[7]),ve(e,"hidden",!t[7])},m(f,p){ke(f,e,p),N(e,i),o&&o.m(i,null),N(i,n),c&&c.m(i,null),N(i,r),d&&d.m(i,null),N(i,a),y&&y.m(i,null),s=!0},p(f,p){f[8]&&!f[3].show&&!f[14]?o?o.p(f,p):(o=gn(f),o.c(),o.m(i,n)):o&&(o.d(1),o=null),f[13].config.enablePreloader&&!f[9]&&f[10]&&f[7]&&!f[3].show?c?(c.p(f,p),p[0]&1672&&B(c,1)):(c=pn(f),c.c(),B(c,1),c.m(i,r)):c&&(Fe(),H(c,1,1,()=>{c=null}),Ue()),f[13].config.enablePassBack&&f[9]&&f[10]&&f[7]&&!f[3].show?d?(d.p(f,p),p[0]&1672&&B(d,1)):(d=xn(f),d.c(),B(d,1),d.m(i,a)):d&&(Fe(),H(d,1,1,()=>{d=null}),Ue()),f[3].show&&f[7]?y?(y.p(f,p),p[0]&136&&B(y,1)):(y=mn(f),y.c(),B(y,1),y.m(i,null)):y&&(Fe(),H(y,1,1,()=>{y=null}),Ue()),(!s||p[0]&64)&&F(e,"height",f[6].height+"px"),(!s||p[0]&64)&&F(e,"width",f[6].width+"px"),p[0]&128&&ve(e,"loader-wrapper",f[7]),p[0]&128&&ve(e,"hidden",!f[7])},i(f){s||(B(c),B(d),B(y),s=!0)},o(f){H(c),H(d),H(y),s=!1},d(f){f&&Pe(e),o&&o.d(),c&&c.d(),d&&d.d(),y&&y.d()}}}let _r="",Vr="";function Br(t,e,i){let n,r,a,s,o;const c=R(st.KEY),d=R($e);Ne(t,d,J=>i(6,n=J));const y=R(Et);Ne(t,y,J=>i(7,r=J));const f=R(Be.KEY);R(ft),f.config.enablePassBack,f.config.enablePreloader,f.config.passBackUrl,f.config.passBackWidth,f.config.passBackHeight,f.config.preloaderHeight,f.config.preloaderWidth,f.config.preloaderUrl;const p=f.config.hideAli,x=f.config.displaySchain,E=R(Dt),v=f.domain;let{expandFunction:q=()=>{}}=e;const C=re(!1);Ne(t,C,J=>i(9,s=J));let m="",W="";const g=re(!1);Ne(t,g,J=>i(10,o=J));let{isLoading:w}=e,b;R($e).subscribe(J=>{let Y=1;Y=J.height/(f.config.preloaderHeight+1),!(Y>2||Y<0)&&b!=null&&(i(2,b.style.transform="scale("+Y+")",b),i(2,b.style.border="none",b),i(2,b.style.backgroundColor="transparent",b))});const I=async()=>{try{if(f.config.preloaderBeforeWaitInMil>0){const Q=await ut(f.config.preloaderUrl);i(0,m=await Q.text());const ae=await ut(f.config.passBackUrl);i(1,W=await ae.text()),g.set(!0);return}const Y=await(await ut("//serv-selectmedia.com/cdn/mcm/"+x+".json")).json();c.Info("tagsListResponse display ",Y),c.Info("domain display",v);const fe=Object.keys(Y);let T=Y[v]?Y[v]:Y[fe[0]];c.Info("domain PL PS display",T),q(),i(0,m=T.CODE_PL),i(1,W=T.CODE_PS?T.CODE_PS:T.CODE_PL),g.set(!0)}catch(J){c.Info("pla ps domain code error ",J)}};(f.config.enablePassBack||f.config.enablePreloader)&&I();const h=async()=>{!j(g)||C.set(!0)};E.subscribe(J=>{if(J!=null)switch(J.adEvent){case D.PASS_BACK:c.Info("PASS_BACK display"),h();break}});const S=rn([y,C,g],([J,Y,fe],T)=>{if(J){if(!f.config.enablePassBack&&!f.config.enablePreloader){T(!0);return}if(!f.config.enablePreloader&&!Y){T(!0);return}if(!f.config.enablePassBack&&Y){T(!0);return}if(!fe){T(!0);return}if(fe){T(!1);return}}});Ne(t,S,J=>i(8,a=J));const V=R(Ci);let K;V.subscribe(J=>{i(3,K=J)});let z="//sm1.selectmedia.asia/cdn/files/b75d12e4-3091-4c6f-a6d9-d5deaf55fb5e",U="https://www.aliexpress.com/";f.config.houseAdImageSrc!=""&&(z=f.config.houseAdImageSrc,U=f.config.houseAdClick,U==""&&(U="https://google.com"));function ee(J){Re[J?"unshift":"push"](()=>{b=J,i(2,b)})}return t.$$set=J=>{"expandFunction"in J&&i(18,q=J.expandFunction),"isLoading"in J&&i(19,w=J.isLoading)},[m,W,b,K,z,U,n,r,a,s,o,d,y,f,p,C,g,S,q,w,ee]}class Fr extends He{constructor(e){super(),je(this,e,Br,Nr,Ge,{expandFunction:18,isLoading:19},null,[-1,-1])}}function Ur(t){let e,i,n,r,a,s,o,c,d,y,f,p,x;return{c(){e=G("div"),i=G("div"),n=G("button"),r=G("span"),a=ue(),s=G("button"),o=G("span"),c=ue(),d=G("video"),d.innerHTML='<source src="data:video/mp4;base64,AAAAGGZ0eXBpc29tAAAAAGlzb21tcDQxAAAACGZyZWUAAAAmbWRhdCELUCh9wBQ+4cAhC1AAfcAAPuHAIQtQAH3AAD7hwAAAAlNtb292AAAAbG12aGQAAAAAxzFHd8cxR3cAAV+QAAAYfQABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAG2lvZHMAAAAAEA0AT////xX/DgQAAAACAAABxHRyYWsAAABcdGtoZAAAAAfHMUd3xzFHdwAAAAIAAAAAAAAYfQAAAAAAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAWBtZGlhAAAAIG1kaGQAAAAAxzFHd8cxR3cAAKxEAAAL/xXHAAAAAAA0aGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kIE1lZGlhIEhhbmRsZXIAAAABBG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAAyHN0YmwAAABkc3RzZAAAAAAAAAABAAAAVG1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAACsRAAAAAAAMGVzZHMAAAAAA4CAgB8AQBAEgICAFEAVAAYAAAANdQAADXUFgICAAhIQBgECAAAAGHN0dHMAAAAAAAAAAQAAAAMAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAADAAAAAQAAABRzdHN6AAAAAAAAAAoAAAADAAAAFHN0Y28AAAAAAAAAAQAAACg=" type="video/mp4"/>',y=ue(),f=G("div"),F(n,"right","0"),F(n,"bottom","0"),F(n,"position","absolute"),F(n,"cursor","pointer"),F(n,"background","none"),F(n,"border","none"),F(n,"font-size","24px"),F(n,"color","#333"),F(n,"display","flex"),F(n,"align-items","center"),F(n,"z-index","3"),F(s,"right","30px"),F(s,"bottom","0"),F(s,"position","absolute"),F(s,"cursor","pointer"),F(s,"background","none"),F(s,"border","none"),F(s,"font-size","24px"),F(s,"color","#333"),F(s,"display","flex"),F(s,"align-items","center"),F(s,"z-index","3"),d.playsInline=!0,L(d,"class","video-element"),L(d,"width","100%"),L(d,"height","100%"),d.muted=!0,d.autoplay=!0,F(d,"position","absolute"),F(d,"top","0"),F(d,"right","0"),F(d,"left","0"),F(d,"right","0"),F(d,"z-index","1"),L(f,"class","adContainer"),F(f,"position","absolute"),F(f,"top","0"),F(f,"right","0"),F(f,"left","0"),F(f,"right","0"),F(f,"z-index","2"),L(i,"id","mainContainer"),L(e,"id","main")},m(E,v){ke(E,e,v),N(e,i),N(i,n),N(n,r),t[37](r),N(i,a),N(i,s),N(s,o),t[38](o),N(i,c),N(i,d),t[39](d),N(i,y),N(i,f),t[40](f),p||(x=[Ot(n,"click",t[4]),Ot(s,"click",t[5])],p=!0)},p:ne,i:ne,o:ne,d(E){E&&Pe(e),t[37](null),t[38](null),t[39](null),t[40](null),p=!1,yt(x)}}}const ri='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"/></svg>',yn='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#fafafa}</style><path d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"/></svg>',An='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#fafcff}</style><path d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>',Sn='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>';function Wr(t,e,i){let n,r,a,s,{keyId:o}=e,{eventManager:c}=e,{store:d}=e,{prebidManagerNewFunc:y}=e,{iMAManagerNewFunc:f}=e,{logger:p}=e,{iframe:x}=e,{playerSizeStore:E}=e,{isEligibleToPlayStore:v}=e,{prebidScriptUrl:q}=e,{macroManager:C}=e,{amzUrl:m="//serv-selectmedia.com/cdn/player/amz/selectAmazon.js"}=e,{skipAmazon:W}=e,{configManager:g}=e,{googleLimitManager:w}=e,{ppidMappingsProvider:b}=e,A,I,h=[];function S(){return A}function V(){return I}function K(){return o}function z(){a.skip()}function U(){a.stop()}function ee(){a.pauseAd()}function J(){a.resumeAd()}let Y,fe=!0,T,Q=!1;async function ae(k,ge,We){i(2,Y.innerHTML=ri,Y),i(3,T.innerHTML=An,T),fe=!0,Q=!1,ge&&(k||We)&&(A=k,I=ge.adSourceKey,ge.type==le.IMA&&d.set(new qe(D.REQUEST,null,ge.adSourceKey,o,ge)),ge.type==le.PREBID&&d.set(new qe(D.PREBID_REQUEST,null,ge.adSourceKey,o,ge))),a.playVast(k,{imaVastModel:ge},j(E),We)}async function ye(k){a.playAdsManagerLoaded(k)}function Me(){return s.prebidValid()}function Qe(){return a.imaValid()}function tt(){return s.amazonValid()}function Je(k,ge,We,_,X){return new Promise((Se,mt)=>{let Xe,Ve;try{if(k==null){Se([]);return}const Te=br(JSON.parse(JSON.stringify(k)));if(Te!=null&&Te.length>0){for(let Ae=0;Ae<Te.length;Ae++)d.set(new qe(D.REQUEST,null,Te[Ae].ad.adSourceKey,o,Te[Ae].ad));s.getAdsV2(Te,We,_,X).then(Ae=>{try{let Ie=[];for(const lt in Ae)if(Ae.hasOwnProperty(lt)&&Ae[lt]&&Ae[lt].bids){Ve=Ae[lt].bids[0];const ct=Ae[lt].ad;Ve.cpm=Math.round(Ve.cpm*1e3)/1e3,ct.cpm=Ve.cpm,ct.vastUrl=Ve.vastUrl,ct.bid=Ve,ct.vast=Ve.vast,h.push(ct),ct.vastUrl===""&&ct.vast===""&&P.error(" prebidManager_getAds",null,{prebidAds:Ae}),Ie.push(ct)}Se(Ie);return}catch(Ie){P.error(" prebidManager_getAds_catch",Ie,{prebidAds:Ae})}Se([])})}else{Se([]);return}}catch(Te){P.error("error_runPreBid",Te,{adUnits:k,bid:Ve,prebidAds:Xe}),p.Error("prebidManager Error",Te),Se([])}})}function it(k,ge,We,_,X){return new Promise((Se,mt)=>{let Xe,Ve,Te=[];try{if(k==null){Se([]);return}k=JSON.parse(JSON.stringify(k));for(let Ie=0;Ie<k.length;Ie++)if(k[Ie].type!=le.AMAZON){Se(Te);return}const Ae={pubId:k[0].pubId,slotId:k[0].slotId,cpm:k[0].floorPrice};s.getAmpAds(Ae,JSON.parse(JSON.stringify(k[0])),We,_,X,k[0].floorPrice,o).then(Ie=>{Ie&&Ie.vastTagURL&&(k[0].cpm=Math.round(Ie.cpm*1e3)/1e3,k[0].vastUrl=Ie.vastTagURL,k[0].bid=JSON.stringify(Ie),k[0].amznbId=Ie.amznbId,Te.push(k[0])),Se(Te)})}catch(Ae){P.error("error_amazonBid",Ae,{adUnits:k,bid:Ve,prebidAds:Xe}),p.Error("prebidManager Error",Ae),Se([])}})}function he(){return new Promise((k,ge)=>{try{if(W){k(!0);return}(function(We,_,X,Se,mt,Xe,Ve){if(_[We]){k(!0);return}function Te(Ae,Ie){_[We]._Q.push([Ae,Ie])}_[We]={init(){Te("i",arguments)},fetchBids(){Te("f",arguments)},setDisplayBids(){},targetingKeys(){return[]},_Q:[]},Xe=X.createElement(Se),Xe.onerror=function(){k(!1)},Xe.onload=function(){k(!0)},Xe.async=!0,Xe.src=mt,Ve=X.getElementsByTagName(Se)[0],Ve.parentNode.insertBefore(Xe,Ve)})("apstag",x.contentWindow,x.contentWindow.document,"script",m)}catch{debugger;k(!1)}})}function we(){fe=!fe,a.setVolume(fe?0:1),i(2,Y.innerHTML=fe?ri:yn,Y)}function nt(){Q=!Q,Q?a.pauseAd():a.resumeAd(),i(3,T.innerHTML=Q?Sn:An,T)}dt(()=>{try{try{if(g.config.adsSoundOn){let k=function(ge){fe=!1,i(2,Y.innerHTML=fe?ri:yn,Y),top.window.removeEventListener("click",k)};top.window.addEventListener("click",k)}}catch{}i(2,Y.innerHTML=ri,Y),i(3,T.innerHTML=Sn,T),i(6,g.debugStep["AdManager_onMount"+o]=performance.now(),g),s=y(p,d),s.init(x,q,o,c,C,g,b),i(6,g.debugStep["AdsManager_prebidManager"+o]=performance.now(),g),a=f(!g.config.isDesktop,r,n,d,o,j(E),v,p,g),a.init(x,w),i(6,g.debugStep["AdsManager_imaManager"+o]=performance.now(),g),E.subscribe(k=>{a.resizeAd(k)}),s.startLoadTime(),i(6,g.debugStep["AdsManager_amazon"+o]=performance.now(),g),i(6,g.debugStep["AdsManager_amazon"+o]=performance.now(),g),he(),(g.config.enableIntentIQ||g.isDebug)&&o=="0"&&d.subscribe(k=>{try{if(k==null)return;switch(k.adEvent){case D.IMPRESSION:for(let ge=0;ge<h.length;ge++){if(h[ge].vast==k.imaManager.adTagXml&&k.imaManager.adTagXml!=null){s.intentiqImpr(h[ge]);break}if(h[ge].vastUrl==k.imaManager.adTagUrl&&k.imaManager.adTagUrl!=null){s.intentiqImpr(h[ge]);break}}}}catch(ge){P.error("WaterFallManager_subscribeIMA",ge,{adEvent:k.adEvent})}})}catch(k){P.error("AdManager_init",k)}});function _e(k){Re[k?"unshift":"push"](()=>{Y=k,i(2,Y)})}function at(k){Re[k?"unshift":"push"](()=>{T=k,i(3,T)})}function pt(k){Re[k?"unshift":"push"](()=>{r=k,i(1,r)})}function xt(k){Re[k?"unshift":"push"](()=>{n=k,i(0,n)})}return t.$$set=k=>{"keyId"in k&&i(7,o=k.keyId),"eventManager"in k&&i(8,c=k.eventManager),"store"in k&&i(9,d=k.store),"prebidManagerNewFunc"in k&&i(10,y=k.prebidManagerNewFunc),"iMAManagerNewFunc"in k&&i(11,f=k.iMAManagerNewFunc),"logger"in k&&i(12,p=k.logger),"iframe"in k&&i(13,x=k.iframe),"playerSizeStore"in k&&i(14,E=k.playerSizeStore),"isEligibleToPlayStore"in k&&i(15,v=k.isEligibleToPlayStore),"prebidScriptUrl"in k&&i(16,q=k.prebidScriptUrl),"macroManager"in k&&i(17,C=k.macroManager),"amzUrl"in k&&i(18,m=k.amzUrl),"skipAmazon"in k&&i(19,W=k.skipAmazon),"configManager"in k&&i(6,g=k.configManager),"googleLimitManager"in k&&i(20,w=k.googleLimitManager),"ppidMappingsProvider"in k&&i(21,b=k.ppidMappingsProvider)},[n,r,Y,T,we,nt,g,o,c,d,y,f,p,x,E,v,q,C,m,W,w,b,S,V,K,z,U,ee,J,ae,ye,Me,Qe,tt,Je,it,he,_e,at,pt,xt]}class Kr extends He{constructor(e){super(),je(this,e,Wr,Ur,Ge,{keyId:7,eventManager:8,store:9,prebidManagerNewFunc:10,iMAManagerNewFunc:11,logger:12,iframe:13,playerSizeStore:14,isEligibleToPlayStore:15,prebidScriptUrl:16,macroManager:17,amzUrl:18,skipAmazon:19,configManager:6,googleLimitManager:20,ppidMappingsProvider:21,getVastUrl:22,getAdSourceKey:23,getKeyId:24,skip:25,stop:26,pauseAd:27,resumeAd:28,playVast:29,playAdsManagerLoaded:30,prebidValid:31,imaValid:32,amazonValid:33,runPreBid:34,runAmazonBid:35,loadAmazonLib:36},null,[-1,-1])}get getVastUrl(){return this.$$.ctx[22]}get getAdSourceKey(){return this.$$.ctx[23]}get getKeyId(){return this.$$.ctx[24]}get skip(){return this.$$.ctx[25]}get stop(){return this.$$.ctx[26]}get pauseAd(){return this.$$.ctx[27]}get resumeAd(){return this.$$.ctx[28]}get playVast(){return this.$$.ctx[29]}get playAdsManagerLoaded(){return this.$$.ctx[30]}get prebidValid(){return this.$$.ctx[31]}get imaValid(){return this.$$.ctx[32]}get amazonValid(){return this.$$.ctx[33]}get runPreBid(){return this.$$.ctx[34]}get runAmazonBid(){return this.$$.ctx[35]}get loadAmazonLib(){return this.$$.ctx[36]}}function qi(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(i==="x"?n:n&3|8).toString(16)})}class vn{constructor(e,i={}){this.vastsModel=e,this.adSourceKey=i}}const bn={};class Gr{constructor(e,i,n){this.prebidValid=e,this.amazonValid=i,this.googleValid=n}}class jr{constructor(e,i,n,r,a,s,o,c,d,y,f,p,x,E,v,q,C){l(this,"waterfallManager");l(this,"macroManager");l(this,"eventManager");l(this,"configManager");l(this,"serverEventManager");l(this,"prebidLimitLoop",1);l(this,"maxPlayerRequestManager");l(this,"isEligibleToPlayStore");l(this,"canLoadGoogleStore");l(this,"googleLimitStore");l(this,"visibilitychangeStore");l(this,"googleLimitManager");l(this,"firstInit",!1);l(this,"amazonFirstInit",!1);l(this,"googleLogicManager");l(this,"multiPlayerManager");l(this,"logger");l(this,"amazonLogicManager");l(this,"amazonAdvMap");l(this,"amazonAdvMapInit");l(this,"prebidLogicManager");l(this,"displayLogicManager");l(this,"prebidFirstInit",!1);l(this,"displayFirstInit",!1);l(this,"getVastsModel",async(e,i,n,r)=>new Promise(async(a,s)=>{try{let o=function(A){return new Promise((I,h)=>{setTimeout(()=>{h(new Error(`Promise.all timed out after ${A} milliseconds`))},A)})};await this.configManager.initGDPR();const c=await this.waterfallManager.getWaterfall();if(c==null){a(null);return}c.adSources.length==0&&P.reportError("empty_wf",this.configManager.config.publisherId,this.configManager.config.channelId,this.configManager.config.tagId,this.configManager.config.templateId);let d={};const y=Math.random();this.eventManager.setBaseUrl(c.baseUrl),this.configManager.debugStep.preBidAdSource_0=performance.now(),this.serverEventManager.inventoryRequest(),this.configManager.debugStep["preBidAdSource_0.5"]=performance.now(),c.adSources=this.maxPlayerRequestManager.filterAds(c.adSources,new Date);const f=c.adSources.map(A=>this.macroManager.replaceAdSourceMacro(A));this.configManager.debugStep.preBidAdSource_1=performance.now();for(let A=0;A<f.length;A++){let I=f[A];d[I.adSourceKey]=I,this.serverEventManager.mapAdSourceKey(I)}let p=f.filter(A=>A.type==le.PREBID),x=f.filter(A=>A.type==le.AMAZON),E=f.filter(A=>A.type==le.IMA),v=f.filter(A=>A.type==le.Display);this.multiPlayerManager.isMultiPlayer()&&(x=[]);try{let A=f.filter(S=>S.type==le.PREBID&&S.blocked),I=f.filter(S=>S.type==le.AMAZON&&S.blocked),h=f.filter(S=>S.type==le.IMA&&S.blocked);for(let S=0;S<A.length;S++)this.eventManager.DispatchEvent(O.BlockedRequest,A[S]);for(let S=0;S<I.length;S++)this.eventManager.DispatchEvent(O.BlockedRequest,I[S]);for(let S=0;S<h.length;S++)this.eventManager.DispatchEvent(O.BlockedRequest,h[S])}catch{}let q=[];const C=[];if(this.configManager.debugStep.preBidAdSource=performance.now(),this.prebidFirstInit||(this.prebidLogicManager.initPrebidAdSources(p),this.prebidFirstInit=!0),this.displayFirstInit||(this.displayLogicManager.initDisplayAdSources(v),this.displayFirstInit=!0),p=this.prebidLogicManager.getPrebidToPlay(),p.length>0)try{const A=JSON.parse(JSON.stringify(p)),I=e[0];if(await r.prebidValid[0]()){const V=I(A,"prebidID",this.configManager.isDebug,this.configManager.config.prebidTimeOut,this.configManager.config.schain);q.push(V)}}catch(A){P.error("getVastsModelxxx",A,{})}this.configManager.debugStep.amazon=performance.now(),this.amazonFirstInit||(this.amazonLogicManager.initAmazonAdSources(x),this.amazonFirstInit=!0);const m=this.amazonLogicManager.getAmazonToPlay();if(m.length>0){if(!this.amazonAdvMapInit){let A=this.amazonLogicManager.getAllAdvertisers();for(let I=0;I<e.length&&!(I>=i.length||A.length==0);I++){const h=A.pop();this.amazonAdvMap[h]=i[I]}}this.amazonAdvMapInit=!0}for(let A=0;A<m.length;A++){let I=this.amazonAdvMap[m[A].advertiserId],h=m[A];const S=I([h],"prebidID",this.configManager.isDebug,this.configManager.config.prebidTimeOut,this.configManager.config.schain);q.push(S)}const W=o(1e4);let g=[];try{g=await Promise.race([Promise.all(q),W])}catch{}for(let A=0;A<g.length;A++){const I=g[A];for(let h=0;h<I.length;h++){const S=I[h],V=Math.round(S.cpm*100)/100,K=new Ti(S.vastUrl,V,S.type,S.adSourceKey,qi(),S.vast,S.amznbId);C.push(K),this.serverEventManager.updateCpm(S.adSourceKey,V),this.serverEventManager.updateAdsourceMap(K)}}const w=n.map(A=>A.vastModel);C.push(...w);const b=[];if(j(this.isEligibleToPlayStore)&&E.length>0)try{if(!j(this.googleLimitStore)&&j(this.visibilitychangeStore)&&this.googleLimitManager.getCanLoadGoogle()){this.firstInit||(this.googleLogicManager.initGoogleAdSources(E),this.firstInit=!0);const A=this.googleLogicManager.getGoogleVastToPlay();for(let I=0;I<A.length;I++){const h=A[I],S=new Ti(h.url,h.googleImaGrossRate,h.type,h.adSourceKey,qi(),"","");b.push(S)}}}catch(A){const I=j(this.canLoadGoogleStore);P.error("getVastsModel",A,{googleSource:E,advertiserId:I})}a(this.buildVastsModelAns(e,b,C,d,r))}catch(o){P.error("getVastsModel",o)}}));l(this,"buildVastsModelAns",(e,i,n,r,a)=>{try{const s=e.length/2,o=s<i.length?s:i.length;let c=[],d=e.length;this.configManager.config.googleWorkerLimit>=0&&this.configManager.config.googleWorkerLimit<e.length&&(d=this.configManager.config.googleWorkerLimit);for(let x=0;x<o;x++)i.length>0&&c.push(i.pop());const y=s<n.length?s:n.length;for(let x=0;x<y;x++)n.length>0&&c.push(n.pop());const f=i.length;for(let x=0;x<f;x++)i.length>0&&c.push(i.pop());const p=n.length;for(let x=0;x<p;x++)n.length>0&&c.push(n.pop());if(c.length>0){const x=e.length-c.length;for(let E=0;E<x;E++){const v=new Ti("",0,le.IMA,"",qi(),"","");c.push(v)}}return c.length>e.length&&c.splice(e.length,e.length),c=c.filter(x=>x!==void 0),c.length>0&&c.length<e.length&&P.error("not_full_vast_to_play",null,{imaVastModels:c}),new vn(c,r)}catch{return new vn(null,r)}});l(this,"setPrebidWorkers",e=>{this.prebidLimitLoop=e});this.waterfallManager=e,this.macroManager=i,this.eventManager=n,this.configManager=r,this.serverEventManager=a,this.maxPlayerRequestManager=s,this.isEligibleToPlayStore=o,this.canLoadGoogleStore=c,this.googleLimitStore=d,this.visibilitychangeStore=y,this.googleLimitManager=f,this.googleLogicManager=p,this.multiPlayerManager=q,this.logger=C,this.amazonLogicManager=x,this.amazonAdvMap={},this.amazonAdvMapInit=!1,this.prebidLogicManager=E,this.displayLogicManager=v}}const Hr=t=>new Promise(e=>setTimeout(e,t));class zi{constructor(e,i){this.status=e,this.event=i}}class Jr{constructor(e,i,n,r,a,s){this.runPreBid=e,this.playVast=i,this.runAmazonBid=n,this.prebidValid=r,this.imaValid=a,this.amazonValid=s}}class si{constructor(e,i){this.eventsData=e,this.adSourceKey=i}}class Yr{constructor(e,i,n,r,a,s,o,c){l(this,"iMAManagerStore");l(this,"state");l(this,"workers",[]);l(this,"adsManagers");l(this,"totalWorkers");l(this,"waiting");l(this,"vastModelManger");l(this,"runPreBid");l(this,"runAmazonBid");l(this,"adSourceKey",{});l(this,"c",0);l(this,"preBidWorker",1);l(this,"unlimitedWaterfallRuns");l(this,"waterfallErrorLimitEnabled");l(this,"waterFallRunsWithoutImpression");l(this,"waterFallRuns");l(this,"errorLimit");l(this,"waterfallRuns");l(this,"readyToPlayVast");l(this,"backgroundLoad",!1);l(this,"configManager");l(this,"duplicateImpression",new Map);l(this,"events",[]);l(this,"eventManager");l(this,"logger");l(this,"advertisersManagers");l(this,"init",async()=>{this.iMAManagerStore.subscribe(this.subscribeIMA),await this.run()});l(this,"subscribeIMA",e=>{try{if(e==null)return;switch(e.adEvent){case D.IMPRESSION:{this.waterFallRunsWithoutImpression=0;break}case D.ADS_LOADER_AD_ERROR:case D.ADS_LOADER_ADS_MANAGER_LOADED:{this.c++;const i=parseInt(e.id);if(e.adEvent==D.ADS_LOADER_AD_ERROR)this.workers[i]=new zi("noAds",e);else{const n=this.duplicateImpression.has(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED);n&&this.logger.Info("e.adEvent bug",n),this.workers[i]=new zi("readyToPlay",e)}for(let n=0;n<this.workers.length;n++)if(this.workers[n].status=="free")return;this.state.set("done");break}}}catch(i){P.error("WaterFallManager_subscribeIMA",i,{adEvent:e.adEvent})}});l(this,"run",async()=>{this.state.subscribe(async e=>{try{switch(e){case"wait":this.configManager.debugStep.WaterFallManager_switch_wait=performance.now();break;case"load":let i;if(this.readyToPlayVast&&this.readyToPlayVast.length>0,this.waterfallErrorLimitEnabled&&this.waterFallRunsWithoutImpression>=this.errorLimit){this.state.set("done"),this.state.set("passBack");break}if(!this.unlimitedWaterfallRuns&&this.waterFallRuns>=this.waterfallRuns){this.state.set("done"),this.state.set("passBack");break}if(this.configManager.debugStep.getVastsModel_start=performance.now(),i=await this.vastModelManger.getVastsModel(this.runPreBid,this.runAmazonBid,this.readyToPlayVast,this.advertisersManagers),i=JSON.parse(JSON.stringify(i)),this.configManager.debugStep.getVastsModel_end=performance.now(),i==null){this.state.set("done");break}if(this.waterFallRunsWithoutImpression++,this.waterFallRuns++,this.eventManager.setWaterFallRuns(this.waterFallRuns),i.vastsModel.length==0){this.state.set("done");break}this.adSourceKey=Ft(Ft({},this.adSourceKey),i.adSourceKey),this.configManager.debugStep.getVastsModel_x1=performance.now();let n=0,r=!0;try{const o=[];for(let c=0;c<i.vastsModel.length;c++){const d=i.vastsModel[c];St.uuids.has(d.uuid)||o.push(d)}i.vastsModel=o,this.configManager.debugStep.getVastsModel_x2=performance.now();for(let c=0;c<i.vastsModel.length;c++){const d=i.vastsModel[c];St.uuids.has(d.uuid)&&P.error("uuids_duplicate",null,{uuids:Object.fromEntries(St.uuids),vastsModelAns:i,uuid:d.uuid})}this.configManager.debugStep.getVastsModel_x3=performance.now()}catch(o){P.error("uuids_duplicate_err",o,{})}if(i.vastsModel.length==0){this.state.set("done");return}let a={};for(let o=0;o<this.adsManagers.length;o++){if(this.workers[o].status!=="free")continue;const c=this.adsManagers[o],d=i.vastsModel[n];if(!await this.advertisersManagers.googleValid[o]()){c.playVast(null,d,null);continue}if(d.type==le.AMAZON){if(a[d.vast]==!0){c.playVast(null,d,null);continue}a[d.vast]=!0}r=!1,c.playVast(d.vast,d,d.vastXml),n++,i.vastsModel.length==n&&(n=0)}this.configManager.debugStep.getVastsModel_x4=performance.now(),r&&this.state.set("done");break;case"waitingForIma":console.log("waitingForIma");break;case"done":let s=0;for(let o=0;o<this.workers.length;o++)this.workers[o].status=="noAds"?this.workers[o].status="free":this.workers[o].status=="readyToPlay"&&s++;if(s>=this.preBidWorker){this.state.set("done");break}if(this.waiting)break;this.backgroundLoad&&await Hr(this.configManager.config.timeBetweenWaterfalls);break;case"passBack":this.iMAManagerStore.set(new qe(D.PASS_BACK,null,null,null));break}}catch(i){P.error("WaterFallManager_run",i,{e})}})});l(this,"getAdSourceKey",()=>this.adSourceKey);l(this,"getWF",async e=>(this.waiting=!0,this.backgroundLoad=!0,new Promise(async(i,n)=>{try{switch(j(this.state)){case"init":this.state.set("load");break;case"done":const s=[];for(let d=0;d<this.workers.length;d++)this.workers[d].status=="readyToPlay"&&s.push(this.workers[d].event);const o=wn(s);this.eventManager.setAdsManagerLoaded(o),i(new si(s,this.adSourceKey)),this.state.set("wait"),this.waiting=!1;break;case"wait":const c=[];for(let d=0;d<this.workers.length;d++)this.workers[d].status=="readyToPlay"&&c.push(this.workers[d].event);if(c.length>=this.preBidWorker){this.state.set("wait"),this.waiting=!1,i(new si(c,this.adSourceKey));return}this.state.set("load");break;case"error":{n();break}}const a=this.state.subscribe(s=>{switch(s){case"done":const o=[];for(let d=0;d<this.workers.length;d++)this.workers[d].status=="readyToPlay"&&o.push(this.workers[d].event);this.state.set("wait"),this.waiting=!1;try{a()}catch{}const c=wn(o);this.eventManager.setAdsManagerLoaded(c),i(new si(o,this.adSourceKey));break;case"error":{n();break}}})}catch(r){P.error("getWF",r,{}),n()}})));l(this,"workerPlayingVideo",async(e,i,n=!0)=>(this.readyToPlayVast=i,new Promise(async(r,a)=>{try{switch(j(this.state)){case"wait":for(let o=0;o<this.workers.length;o++)this.workers[o].status="free";this.backgroundLoad=!0,e!=-1&&(this.workers[e].status="playing"),this.c=0,n&&this.state.set("load"),r(null);break}}catch(s){P.error("workerPlayingVideo",s,{workerId:e}),r(null)}})));l(this,"freeWorkerPlayingVideo",async e=>new Promise(async(i,n)=>{try{this.workers[e]&&(this.workers[e].status="free"),this.state.set("wait"),i(null)}catch(r){P.error("freeWorkerPlayingVideo",r,{})}}));l(this,"setPrebidWorkers",e=>{try{this.vastModelManger.setPrebidWorkers(e)}catch(i){P.error("setPrebidWorkers",i,{})}});l(this,"freeAll",async(e,i)=>(this.readyToPlayVast=i,new Promise(async(n,r)=>{try{switch(j(this.state)){case"wait":for(let s=0;s<this.workers.length;s++)this.workers[s]?this.workers[s].status="free":P.error("workerLoopPlayingVideo",{},{worker:s,length:this.workers.length});this.state.set("load"),n(null);break}}catch(a){P.error("workerPlayingVideo",a,{}),r()}})));this.iMAManagerStore=i,this.adsManagers=n,this.totalWorkers=n.length,this.state=re("init"),this.waiting=!1,this.preBidWorker=e.config.requestUntilBidReady,this.waterfallRuns=e.config.waterfallRuns,this.waterfallErrorLimitEnabled=e.config.waterfallErrorLimitEnabled,this.unlimitedWaterfallRuns=a,this.waterFallRunsWithoutImpression=0,this.waterFallRuns=0,this.runPreBid=[],this.runAmazonBid=[],this.readyToPlayVast=[],this.configManager=e,this.errorLimit=s,this.eventManager=o;const d=[],y=[],f=[];for(let p=0;p<this.totalWorkers;p++)this.runPreBid[p]=n[p].runPreBid,d[p]=n[p].prebidValid,f[p]=n[p].imaValid,this.workers[p]=new zi("free",null),p<this.configManager.config.amazonWorkerApi&&(this.runAmazonBid[p]=n[p].runAmazonBid,y[p]=n[p].amazonValid);this.advertisersManagers=new Gr(d,y,f),this.vastModelManger=r,this.logger=c}}const wn=t=>{let e=0;try{const i=new Map;for(let n=0;n<t.length;n++){const r=t[n];r.key.cpm,!i.has(r.key.cpm)&&(i.set(r.key.cpm,""),e++)}}catch{}return e},ce=new Map;ce.set(D.NO_ADS,null),ce.set(D.AD_BREAK_READY,O.BreakReady),ce.set(D.AD_BUFFERING,null),ce.set(D.AD_METADATA,null),ce.set(D.ALL_ADS_COMPLETED,O.AllAdsCompleted),ce.set(D.CLICK,O.Click),ce.set(D.COMPLETE,O.Complete),ce.set(D.CONTENT_PAUSE_REQUESTED,null),ce.set(D.CONTENT_RESUME_REQUESTED,null),ce.set(D.DURATION_CHANGE,null),ce.set(D.FIRST_QUARTILE,O.FirstQuartile),ce.set(D.IMPRESSION,O.Impression),ce.set(D.INTERACTION,null),ce.set(D.LINEAR_CHANGED,null),ce.set(D.LOADED,O.Loaded),ce.set(D.LOG,null),ce.set(D.MIDPOINT,O.Midpoint),ce.set(D.PAUSED,null),ce.set(D.RESUMED,null),ce.set(D.SKIPPABLE_STATE_CHANGED,null),ce.set(D.SKIPPED,null),ce.set(D.STARTED,O.Started),ce.set(D.THIRD_QUARTILE,O.ThirdQuartile),ce.set(D.USER_CLOSE,null),ce.set(D.VOLUME_CHANGED,null),ce.set(D.VOLUME_MUTED,null),ce.set(D.BID,O.Bid),ce.set(D.PREBID_REQUEST,O.PrebidRequest);const Qr="nowPlayingFrame";class Ti{constructor(e,i,n,r,a,s,o){this.vast=e,this.cpm=i,this.type=n,this.adSourceKey=r,this.uuid=a,this.vastXml=s,this.amznbId=o}}class ai{constructor(e,i){this.width=e,this.height=i}}const Xr={};class In{constructor(e,i){this.id=e,this.adSources=i}}class Ni{constructor(e,i,n){this.eventType=e,this.isEmpty=i,this.done=n}}class kt{constructor(e,i){l(this,"closeClick",!1);l(this,"configManager");l(this,"mainUnitVisibleStore",!1);l(this,"floatingVisibleStore",!1);l(this,"mainUnitFirstTime",!1);l(this,"visibility",!0);l(this,"googleLoadAds",!1);l(this,"logger");l(this,"isPlayingGoogleAd",!1);l(this,"pauseAdGoogleVideoAd");l(this,"documentHidden",!1);this.configManager=e,this.logger=i,this.pauseAdGoogleVideoAd=re(this.visibility),this.init()}close(){this.closeClick=!0}getRatio(){let e=[0];for(let i=1;i<20;i++)e.push(i*5/100);return e}getOptions(){return{rootMargin:"0px",threshold:this.getRatio()}}init(){let e=document;if(!this.configManager.config.safeFrame)try{e=top.document}catch{}e.addEventListener("visibilitychange",()=>{this.documentHidden=e.hidden,e.hidden?this.visibility=!1:this.visibility=!0,this.update()});let i;i=new IntersectionObserver(n=>{n.forEach(r=>{this.mainUnitVisibleStore=r.intersectionRatio>.5,this.mainUnitVisibleStore&&(this.mainUnitFirstTime=!0),this.update()})},this.getOptions()),i.observe(this.configManager.config.targetElement)}setFloatingConfig(e){let i;i=new IntersectionObserver(n=>{n.forEach(r=>{this.floatingVisibleStore=r.intersectionRatio>.5,this.update()})},this.getOptions()),i.observe(e)}update(){if(this.configManager.config.googleAutoPlay){this.googleLoadAds=!0,this.pauseAdGoogleVideoAdFunc();return}if(!this.visibility){this.googleLoadAds=!1,this.pauseAdGoogleVideoAdFunc();return}if(this.configManager.config.isSticky&&this.configManager.config.enableGoogleInSticky==!1){this.googleLoadAds=!1,this.pauseAdGoogleVideoAdFunc();return}if(this.configManager.config.isSticky&&this.configManager.config.enableGoogleInSticky){this.googleLoadAds=!0,this.pauseAdGoogleVideoAdFunc();return}if(!this.configManager.config.isFloating&&this.mainUnitVisibleStore){this.logger.Info("google load-2",!0,this.isPlayingGoogleAd),this.googleLoadAds=!0,this.pauseAdGoogleVideoAdFunc();return}if(this.mainUnitVisibleStore){this.googleLoadAds=!0,this.pauseAdGoogleVideoAdFunc();return}if(this.floatingVisibleStore&&this.mainUnitFirstTime&&!this.closeClick){this.googleLoadAds=!0,this.pauseAdGoogleVideoAdFunc();return}this.googleLoadAds=!1,this.pauseAdGoogleVideoAdFunc()}getCanLoadGoogle(){return this.googleLoadAds}setIsPlayingGoogleAd(e){this.isPlayingGoogleAd=e}getPauseAdGoogleVideoAd(){return this.pauseAdGoogleVideoAd}pauseAdGoogleVideoAdFunc(){if(this.configManager.config.drainGoogleAds){this.pauseAdGoogleVideoAd.set(!1);return}this.pauseAdGoogleVideoAd.set(this.googleLoadAds)}}l(kt,"KEY",{});class oi{constructor(e){l(this,"rawAdSources",[]);l(this,"configManager");l(this,"adSources",[]);l(this,"retVal",[]);l(this,"elementCounter");l(this,"isEmptyWaterFall",!1);this.configManager=e,this.elementCounter=new $r(new Map)}isEmptyWF(){const e=this.isEmptyWaterFall;return this.isEmptyWaterFall=!1,e}initGoogleAdSources(e){this.adSources=JSON.parse(JSON.stringify(e)),this.rawAdSources=JSON.parse(JSON.stringify(e));const i=this.configManager.config.googleWorkers;for(;this.adSources.length<i;){const n=JSON.parse(JSON.stringify(e));this.adSources.push(...n)}this.adSources=JSON.parse(JSON.stringify(this.adSources)),this.rawAdSources=JSON.parse(JSON.stringify(this.adSources))}addAdSource(e){}removeUsedSources(){const e=[];for(let n=0;n<this.adSources.length;n++){let r=!0;for(let a=0;a<this.retVal.length;a++)if(this.adSources[n].adSourceKey===this.retVal[a].adSourceKey){r=!1;break}r&&e.push(this.adSources[n])}this.adSources=JSON.parse(JSON.stringify(e));let i=!1;return e.length==0&&(i=!0,this.adSources=JSON.parse(JSON.stringify(this.rawAdSources))),i}getGoogleVastToPlay(){const e=this.configManager.config.googleWorkers;let i=JSON.parse(JSON.stringify(this.adSources));const n=[];try{let r=new Map;for(let s=0;s<i.length;s++){const o=i[s];if(!r.has(o.advertiserId)){const d=new Array,y=new In(o.advertiserId,d);r.set(o.advertiserId,y)}r.get(o.advertiserId).adSources.push(o)}let a=[];for(let[s,o]of r)a.push(o);a.sort((s,o)=>o.adSources.length-s.adSources.length);for(let s=0;s<a.length;s++)a[s].adSources.sort((o,c)=>o.googleImaGrossRate-c.googleImaGrossRate);for(;n.length!=e;){let s=!0;for(let o=0;o<a.length;o++){const c=a[o].adSources;if(n.length==e)break;if(c.length>0){s=!1,n.push(c.pop());continue}}if(s)break}n.sort((s,o)=>o.googleImaGrossRate-s.googleImaGrossRate)}catch(r){P.error("getGoogleVastToPlay",r,{adSources:JSON.parse(JSON.stringify(this.adSources))})}this.retVal=n;for(let r=0;r<n.length;r++)n[r].url=Zr(n[r].url,"correlator",new Date().getTime().toString());return n}}l(oi,"KEY",{});function Zr(t,e,i){var n=new RegExp("("+e+"=).*?(&|$)");return t.search(n)>=0?t.replace(n,"$1"+i+"$2"):t+(t.indexOf("?")>0?"&":"?")+e+"="+i}class $r{constructor(e){l(this,"inc",e=>{this.counterMap.has(e)?this.counterMap.set(e,this.counterMap.get(e)+1):this.counterMap.set(e,1)});l(this,"print",()=>{console.log("------------------------------------"),this.counterMap.forEach(function(e,i){console.log(i+" : "+e)})});this.counterMap=e}}class li{constructor(e,i,n){l(this,"dbName");l(this,"storeName");l(this,"db");l(this,"timeout");l(this,"init",async()=>{});this.dbName=e,this.storeName=n,this.timeout=i}openDatabase(){return new Promise((e,i)=>{try{e();return}catch{e()}})}setItems(e){return new Promise((i,n)=>{try{i();return}catch{i()}})}getAll(){return new Promise((e,i)=>{try{e([]);return}catch{e(void 0)}})}delKey(e){return new Promise((i,n)=>{try{i();return}catch{i()}})}}l(li,"KEY",{});class ci{constructor(e){l(this,"rawAdSources",[]);l(this,"configManager");l(this,"adSources",[]);l(this,"retVal",[]);l(this,"maxPlayerRequestManager");this.configManager=e,this.maxPlayerRequestManager=new ts}initAmazonAdSources(e){this.adSources=JSON.parse(JSON.stringify(e)),this.rawAdSources=JSON.parse(JSON.stringify(e)),this.adSources=JSON.parse(JSON.stringify(this.adSources)),this.rawAdSources=JSON.parse(JSON.stringify(this.adSources))}addAdSource(e){try{const i=this.rawAdSources.filter(n=>n.adSourceKey===e);this.adSources.push(JSON.parse(JSON.stringify(i[0])))}catch{}}removeUsedSources(){const e=[];for(let i=0;i<this.adSources.length;i++){let n=!0;for(let r=0;r<this.retVal.length;r++)if(this.adSources[i].adSourceKey===this.retVal[r].adSourceKey){n=!1;break}n&&e.push(this.adSources[i])}this.adSources=JSON.parse(JSON.stringify(e)),e.length==0&&(this.adSources=JSON.parse(JSON.stringify(this.rawAdSources)))}getAmazonToPlay(){let i=JSON.parse(JSON.stringify(this.adSources));i=this.maxPlayerRequestManager.filterAds(i),i.length==0&&(this.adSources=JSON.parse(JSON.stringify(this.rawAdSources)),i=JSON.parse(JSON.stringify(this.rawAdSources)),i=this.maxPlayerRequestManager.filterAds(i));const n=[];try{let r=new Map;for(let s=0;s<i.length;s++){const o=i[s];if(!r.has(o.advertiserId)){const d=new Array,y=new In(o.advertiserId,d);r.set(o.advertiserId,y)}r.get(o.advertiserId).adSources.push(o)}let a=[];for(let[s,o]of r)a.push(o);a.sort((s,o)=>o.adSources.length-s.adSources.length);for(let s=0;s<a.length;s++)a[s].adSources.sort((o,c)=>o.floorPrice-c.floorPrice);for(let s=0;s<a.length;s++){const o=a[s].adSources;if(n.length==1)break;if(o.length>0){n.push(o.pop());continue}}n.sort((s,o)=>o.floorPrice-s.floorPrice)}catch(r){P.error("getGoogleVastToPlay",r,{adSources:JSON.parse(JSON.stringify(this.adSources))})}return this.retVal=n,this.maxPlayerRequestManager.updateAds(this.retVal),n}getAllAdvertisers(){let e=JSON.parse(JSON.stringify(this.adSources)),i=new Set;for(let n=0;n<e.length;n++)i.add(e[n].advertiserId);return[...i]}}l(ci,"KEY",{});class es{constructor(e,i,n){l(this,"adSourceId");l(this,"_canPlay");l(this,"PlayEveyTime");l(this,"play",()=>{this._canPlay=!1});l(this,"canPlay",()=>this._canPlay);this.adSourceId=e,this._canPlay=i,this.PlayEveyTime=n,setInterval(()=>{this._canPlay=!0},n*1e3)}}class ts{constructor(){l(this,"mapAdsManagerV2");this.mapAdsManagerV2=new Map}filterAds(e){const i=[];for(let n=0;n<e.length;n++){const r=e[n],a=r.id;if(!r.maxPlayerRequestPerMinuteEnabled){i.push(r);continue}this.mapAdsManagerV2.get(a)!=null&&this.mapAdsManagerV2.get(a).canPlay()==!1||i.push(r)}return i}updateAds(e){for(let i=0;i<e.length;i++){const n=e[i],r=n.id;!n.maxPlayerRequestPerMinuteEnabled||(this.mapAdsManagerV2.set(r,new es(r,!0,is(n.maxPlayerRequestPerMinute))),this.mapAdsManagerV2.get(r).play())}}}function is(t){return Math.round(60/t)}class di{constructor(e){l(this,"rawAdSources",[]);l(this,"configManager");l(this,"adSources",[]);l(this,"retVal",[]);l(this,"maxPlayerRequestManager");l(this,"workers",1);this.configManager=e,this.maxPlayerRequestManager=new ns,this.workers=e.config.iframeWorkers}initPrebidAdSources(e){this.adSources=JSON.parse(JSON.stringify(e)),this.rawAdSources=JSON.parse(JSON.stringify(e));for(let i=0;i<5;i++)for(let n=0;n<e.length;n++)this.adSources.push(JSON.parse(JSON.stringify(e[n]))),this.rawAdSources.push(JSON.parse(JSON.stringify(e[n])))}addAdSource(e){try{const i=this.rawAdSources.filter(n=>n.adSourceKey===e);this.adSources.push(JSON.parse(JSON.stringify(i[0])))}catch{}}removeUsedAdSources(){const e=[];for(let i=0;i<this.adSources.length;i++){let n=!0;for(let r=0;r<this.retVal.length;r++)if(this.adSources[i].adSourceKey===this.retVal[r].adSourceKey){n=!1,this.retVal.splice(r,1);break}n&&e.push(this.adSources[i])}this.adSources=JSON.parse(JSON.stringify(e)),e.length==0&&(this.adSources=JSON.parse(JSON.stringify(this.rawAdSources))),this.retVal=[]}getPrebidToPlay(){let e=JSON.parse(JSON.stringify(this.adSources));e=this.maxPlayerRequestManager.filterAds(e),e.length==0&&(this.adSources=JSON.parse(JSON.stringify(this.rawAdSources)),e=JSON.parse(JSON.stringify(this.rawAdSources)),e=this.maxPlayerRequestManager.filterAds(e)),e.sort((n,r)=>n.floorPrice-r.floorPrice),e.sort((n,r)=>r.floorPrice-n.floorPrice).reverse();const i=[];for(let n=0;n<1e3&&!(e.length==0||i.length==this.workers);n++)i.push(e.pop());return this.retVal=i,this.maxPlayerRequestManager.updateAds(this.retVal),i}getAllAdvertisers(){let e=JSON.parse(JSON.stringify(this.adSources)),i=new Set;for(let n=0;n<e.length;n++)i.add(e[n].advertiserId);return[...i]}removeCap(e){this.adSources.push(JSON.parse(JSON.stringify(e))),this.maxPlayerRequestManager.removeCap(e)}}l(di,"KEY",{});class Mn{constructor(e,i,n){l(this,"adSourceId");l(this,"_canPlay");l(this,"PlayEveyTime");l(this,"play",()=>{this._canPlay=!1});l(this,"canPlay",()=>this._canPlay);this.adSourceId=e,this._canPlay=i,this.PlayEveyTime=n,setInterval(()=>{this._canPlay=!0},n*1e3)}}class ns{constructor(){l(this,"mapAdsManagerV2");this.mapAdsManagerV2=new Map}filterAds(e){const i=[];for(let n=0;n<e.length;n++){const r=e[n],a=r.id;if(!r.maxPlayerRequestPerMinuteEnabled){i.push(r);continue}this.mapAdsManagerV2.get(a)!=null&&this.mapAdsManagerV2.get(a).canPlay()==!1||i.push(r)}return i}updateAds(e){for(let i=0;i<e.length;i++){const n=e[i],r=n.id;!n.maxPlayerRequestPerMinuteEnabled||(this.mapAdsManagerV2.set(r,new Mn(r,!0,Pn(n.maxPlayerRequestPerMinute))),this.mapAdsManagerV2.get(r).play())}}removeCap(e){!e.maxPlayerRequestPerMinuteEnabled||this.mapAdsManagerV2.set(e.id,new Mn(e.id,!0,Pn(e.maxPlayerRequestPerMinute)))}}function Pn(t){return Math.round(60/t)}class ui{constructor(e){l(this,"configManager");l(this,"adSources",[]);l(this,"retVal",[]);l(this,"maxPlayerRequestManager");l(this,"workers",1);this.configManager=e,this.maxPlayerRequestManager=new rs}initDisplayAdSources(e){this.adSources=JSON.parse(JSON.stringify(e))}addAdSource(e){}getDisplayToPlay(){let e=JSON.parse(JSON.stringify(this.adSources));e=this.maxPlayerRequestManager.filterAds(e),e.length==0&&(e=this.maxPlayerRequestManager.filterAds(e));const i=[];if(e.length>0){const n=Math.floor(Math.random()*e.length),r=e[n];i.push(r)}return this.retVal=i,this.maxPlayerRequestManager.updateAds(this.retVal),i}removeCap(e){this.adSources.push(JSON.parse(JSON.stringify(e))),this.maxPlayerRequestManager.removeCap(e)}}l(ui,"KEY",{});class En{constructor(e,i,n){l(this,"adSourceId");l(this,"_canPlay");l(this,"PlayEveyTime");l(this,"play",()=>{this._canPlay=!1});l(this,"canPlay",()=>this._canPlay);this.adSourceId=e,this._canPlay=i,this.PlayEveyTime=n,setInterval(()=>{this._canPlay=!0},n*1e3)}}class rs{constructor(){l(this,"mapAdsManagerV2");this.mapAdsManagerV2=new Map}filterAds(e){const i=[];for(let n=0;n<e.length;n++){const r=e[n],a=r.id;if(!r.maxPlayerRequestPerMinuteEnabled){i.push(r);continue}this.mapAdsManagerV2.get(a)!=null&&this.mapAdsManagerV2.get(a).canPlay()==!1||i.push(r)}return i}updateAds(e){for(let i=0;i<e.length;i++){const n=e[i],r=n.id;!n.maxPlayerRequestPerMinuteEnabled||(this.mapAdsManagerV2.set(r,new En(r,!0,Dn(n.maxPlayerRequestPerMinute))),this.mapAdsManagerV2.get(r).play())}}removeCap(e){!e.maxPlayerRequestPerMinuteEnabled||this.mapAdsManagerV2.set(e.id,new En(e.id,!0,Dn(e.maxPlayerRequestPerMinute)))}}function Dn(t){return Math.round(60/t)}function ss(t,e,i){const n=R(Be.KEY),r=R(kt.KEY),a=R(di.KEY),s=R(ui.KEY),o=R(oi.KEY),c=R(ci.KEY),d=R(st.KEY),y=R(Et),f=R(Ei),p=R($t),x=R(ki),E=R(Zt),v=(K,z)=>(K=Math.ceil(K),z=Math.floor(z),Math.floor(Math.random()*(z-K+1))+K);let q=[];const C=K=>new Promise(z=>setTimeout(z,K)),m=R(Tt),W=R(Xt);R(an);const g=R(on);R(li.KEY);let w=!0;const b=R(ei),A=R(Ci);R(sn);const I=R(ft);R(ti);const h=R(Di),S=R(Ri);async function V(K,z,U,ee){try{n.debugStep.logic_init=performance.now();let J=!1,Y=null;try{top.document.addEventListener("visibilitychange",function(xe){top.document.hidden?g.set(!1):g.set(!0),top.document.visibilityState==="visible"&&J&&j(f)&&(J=!1,ee.resume())})}catch{}let fe=0,T=1;q=z;let Q=[],ae=new Date;(()=>{K.subscribe(xe=>{if(xe!=null)switch(Q.push(xe.adEvent),xe.adEvent){case D.COMPLETE:ae=new Date,fe=(new Date-ae)/1e3;break;case D.IMPRESSION:try{P.reportError("AD_VIDEO_IMPRESSION_V3",n.config.publisherId,n.config.channelId,n.config.tagId,n.config.templateId,String(Math.round(fe/10)),String(T)),T++}catch(pe){debugger;console.log(pe)}break;case D.AD_VIDEO_URL_ERROR:try{P.reportError("AD_VIDEO_URL_ERROR_V2",n.config.publisherId,n.config.channelId,n.config.tagId,n.config.templateId,encodeURIComponent(JSON.stringify(xe.data)))}catch(pe){debugger;console.log(pe)}break;case D.CLICK:J=!0;break;case D.STARTED:d.Info("adds STARTED ",xe),y.set(!1);break;case D.ALL_ADS_COMPLETED:h.set(!1),m.set(j(m)),y.set(!0),w=!0;break;case D.LOADED:d.Info("adds loaded ",xe);break;case D.ADS_LOADER_ADS_MANAGER_LOADED:w&&(d.Info("adds ready "),w=!1);break}})})();let Me=[],Qe=new Date,tt=new Date,Je=!1,it=0;const he=[];let we=!1;const nt=v(n.config.viewAbilityTimeout,n.config.viewAbilityTimeout+3),_e=n.config.autoPlayAfterTimePassSec;let at=j(f),pt=!1,xt=!1,k=!1,ge=!1,We=!1,_=!1,X=!1,Se=!1,mt=!1,Xe=!1,Ve=!1;n.debugStep.setInterval=performance.now();const Te=setInterval(async function(){try{const xe=new Date;let pe=xe-tt;pe/=1e3,fe=(xe-ae)/1e3,3<=pe&&!pt&&(pt=!0,I.DispatchEvent(O.PingSec3)),10<=pe&&!xt&&(xt=!0,I.DispatchEvent(O.PingSec10)),15<=pe&&!k&&(k=!0,I.DispatchEvent(O.PingSec15)),30<=pe&&!ge&&(ge=!0,I.DispatchEvent(O.PingSec30)),45<=pe&&!We&&(We=!0,I.DispatchEvent(O.PingSec45)),60<=pe&&!_&&(_=!0,I.DispatchEvent(O.PingSec60)),90<=pe&&!X&&(X=!0,I.DispatchEvent(O.PingSec90)),120<=pe&&!Se&&(Se=!0,I.DispatchEvent(O.PingSec120)),150<=pe&&!mt&&(mt=!0,I.DispatchEvent(O.PingSec150)),300<=pe&&!Xe&&(Xe=!0,I.DispatchEvent(O.PingSec300)),600<=pe&&!Ve&&(Ve=!0,I.DispatchEvent(O.PingSec600));let oe=xe-tt;if(oe/=1e3,oe>_e&&n.config.enableAutoPlayAfterTimePass){n.config.enableAutoPlayAfterTimePass=!1,E.set(!0);const Ze=j(m);Ze.show=!0,m.set(Ze)}}catch(xe){P.error("setInterval",xe),d.Error("setInterval ",xe)}},1e3);n.debugStep.mainAppStateStore=performance.now(),b.subscribe(async xe=>{xe==Oe.STOP&&await ee.cleanAll(),xe==Oe.PAUSE,xe==Oe.RESUME,xe==Oe.HEAVY_AD&&clearInterval(Te)}),n.debugStep.while=performance.now();let Ae=!0;setInterval(function(){!Ae||(Ae=!1,setTimeout(async()=>{Ae=!0,n.debugStep.main_loop_setInterval=performance.now()},100))},10);let Ie=!0,lt={};document.addEventListener("keydown",xe=>{try{lt[xe.key]=!0}catch{}},!1);try{document.addEventListener("keyup",xe=>{let pe={Meta:!0,Shift:!0,s:!0,l:!0};for(const $ in lt)delete pe[$];if(lt={},Object.keys(pe).length!=0)return;debugger;const oe=Y.activeVastMode.imaVastModel.adSourceKey,Ze=decodeURIComponent(escape(window.atob(oe))),ie=Y.activeVastMode.imaVastModel.vast,se=Y.activeVastMode.imaVastModel.vastXml;console.log(`adSourceKey ${Ze} vast${ie} vastXml ${se}`),alert(`adSourceKey ${Ze} vast${ie} vastXml ${se}`),navigator.clipboard.writeText(`adSourceKey ${Ze} vast${ie} vastXml ${se}`)},!1)}catch{}let ct=null,Si=0;const sr=()=>{n.config.publisherId!="02e0283e-7e2e-49d6-8af8-041b6c5c1e33"};let _a=0;switch(n.config.flowType){case"CPM":for(;;){if(r.documentHidden,sr(),d.Info("flowType  CPM"),h.set(!1),m.set(j(m)),n.debugStep.main_loop=performance.now(),d.Info("main loop "),j(b)==Oe.STOP){d.Info("mainAppStateStore STOP state ");return}if(n.config.enableOptimizeUser)try{const oe="select_k";if((ie=>{const se=document.cookie.split(";");for(let $=0;$<se.length;$++)if(se[$].trim().split("=")[0]===ie)return!0;return!1})(oe)){await C(n.config.timeBetweenWaterfalls);continue}n.config.optimizeUser.emptyWF<Si&&(((se,$,te)=>{const de=new Date;de.setTime(de.getTime()+te*60*1e3);const rt="expires="+de.toUTCString();document.cookie=se+"="+$+";"+rt+";path=/"})(oe,"n",n.config.optimizeUser.ignoreInMinutes),Si=0)}catch{}if(j(b)==Oe.PAUSE||!j(f)&&n.config.pauseOnUnseen){d.Info("PAUSE "),n.debugStep.sleep=performance.now(),await C(200);continue}let pe=performance.now()-n.startUpTime;pe/=1e3,pe>10&&Ie&&n.isDebugLog&&(Ie=!1),U.setPrebidWorkers(n.config.preBidDuplicateLoad);try{let oe=await U.getWF(Me);d.Info("waterFallAns ",oe);const Ze=o.removeUsedSources();if(c.removeUsedSources(),a.removeUsedAdSources(),oe.eventsData.length==0){if(n.config.fullWaterFallScan&&!Ze)continue;Si++;const se=s.getDisplayToPlay();if(se.length>0){const $=se[0];h.set(!1),y.set(!0),p.set(!0),$.cpm=$.googleImaGrossRate,$.duration=$.videoDisplay.adDurationInSec,I.DispatchEvent(O.Request,JSON.parse(JSON.stringify($))),m.set(j(m)),S.set(null);let te;const de=new Promise((rt,Bt)=>{te=S.subscribe(bt=>{if(bt!=null){if(bt.eventType=="complete")if(y.set(!0),p.set(!1),$.videoDisplay.enableWaitInSec){const vi=$.videoDisplay.minWaitInSec,Ui=$.videoDisplay.maxWaitInSec,ar=Math.floor(Math.random()*(Ui-vi+1))+vi;C(ar*1e3).then(Va=>{rt(!0)})}else rt(!0);bt.eventType=="impression"&&(I.DispatchEvent(O.Impression,JSON.parse(JSON.stringify($))),(j(m).viewAbility||j(W))&&I.DispatchEvent(O.ViewableImpression,$),j(W)&&I.DispatchEvent(O.FloatingImpression,$),y.set(!1)),bt.eventType=="isEmpty"&&(y.set(!0),p.set(!1),rt(!0))}})});x.set($),await de,te()}await C(n.config.timeBetweenWaterfalls);continue}h.set(!0),m.set(j(m)),Qe=new Date,oe.eventsData.sort((se,$)=>$.key.cpm-se.key.cpm),d.Info("waterFallAns  sort",oe);for(let se=0;se<oe.eventsData.length;se++){const $=oe.eventsData[se];d.Info("eventData ",$),Y=await ee.runSingleAds($,oe.adSourceKey),Y.isPlaying&&(le.IMA==$.key.type&&o.addAdSource($.key.adSourceKey),le.PREBID==$.key.type&&a.addAdSource($.key.adSourceKey)),await U.freeWorkerPlayingVideo(parseInt($.id));const te=oe.adSourceKey[$.key.adSourceKey];te!=null&&te.enableVidSplay&&(A.set(new Nt(!0,te.vidSplayURL)),y.set(!0),await C(te.vidSplayTimeout*1e3),y.set(!1),A.set(new Nt(!1,"")))}const ie=s.getDisplayToPlay();if(ie.length>0){const se=ie[0];h.set(!1),y.set(!0),p.set(!0),se.cpm=se.googleImaGrossRate,se.duration=se.videoDisplay.adDurationInSec,I.DispatchEvent(O.Request,JSON.parse(JSON.stringify(se))),m.set(j(m)),S.set(null);let $;const te=new Promise((de,rt)=>{$=S.subscribe(Bt=>{if(Bt!=null){if(Bt.eventType=="complete")if(y.set(!0),p.set(!1),se.videoDisplay.enableWaitInSec){const bt=se.videoDisplay.minWaitInSec,vi=se.videoDisplay.maxWaitInSec,Ui=Math.floor(Math.random()*(vi-bt+1))+bt;C(Ui*1e3).then(ar=>{de(!0)})}else de(!0);Bt.eventType=="impression"&&(I.DispatchEvent(O.Impression,JSON.parse(JSON.stringify(se))),(j(m).viewAbility||j(W))&&I.DispatchEvent(O.ViewableImpression,se),j(W)&&I.DispatchEvent(O.FloatingImpression,se),y.set(!1)),Bt.eventType=="isEmpty"&&(y.set(!0),p.set(!1),de(!0))}})});x.set(se),await te,$()}await ee.cleanAll()}catch(oe){debugger;r.setIsPlayingGoogleAd(!1),Me=[],await ee.cleanAll(),P.error("logic_loop_CPM",oe,{readyToPlayVast:Me}),d.Error("error ",oe),await C(200)}}break;default:for(;;){if(sr(),h.set(!1),m.set(j(m)),n.debugStep.main_loop=performance.now(),d.Info("main loop "),j(b)==Oe.STOP){d.Info("mainAppStateStore STOP state ");return}if(j(b)==Oe.PAUSE||!j(f)&&n.config.pauseOnUnseen){d.Info("PAUSE "),n.debugStep.sleep=performance.now(),await C(200);continue}let pe=performance.now()-n.startUpTime;pe/=1e3,pe>10&&Ie&&n.isDebugLog&&(Ie=!1),U.setPrebidWorkers(n.config.preBidDuplicateLoad);let oe=[],Ze=[];try{oe=[],Ze=[],oe.push(1);let ie=await U.getWF(Me);oe.push(2),o.removeUsedSources(),c.removeUsedSources(),a.removeUsedAdSources();let se=[];for(let te=0;te<ie.eventsData.length;te++)ie.eventsData[te].key&&(se.push(ie.eventsData[te]),Ze.push(ie.eventsData[te].adEvent));if(ie.eventsData=se,ie.eventsData.length==0){Si++,await C(n.config.timeBetweenWaterfalls);continue}h.set(!0),m.set(j(m)),Qe=new Date;const $=[];ie.eventsData.sort((te,de)=>de.key.cpm-te.key.cpm),oe.push(3);for(let te=0;te<ie.eventsData.length;te++){const de=ie.eventsData[te],rt=ie.adSourceKey[de.key.adSourceKey];if(le.IMA!==de.key.type){$.push(de);continue}}oe.push(4);for(let te=0;te<ie.eventsData.length;te++){const de=ie.eventsData[te];le.IMA===de.key.type&&(Y=await ee.runSingleAds(de,ie.adSourceKey),Y.isPlaying&&o.addAdSource(de.key.adSourceKey),await U.freeWorkerPlayingVideo(parseInt(de.id)))}if(oe.push(5),ie=new si($,ie.adSourceKey),ie.eventsData.length==0){await ee.cleanAll();continue}oe.push(6),ie.eventsData.sort((te,de)=>de.key.cpm-te.key.cpm),oe.push(7);for(let te=0;te<ie.eventsData.length;te++){const de=ie.eventsData[te],rt=ie.adSourceKey[de.key.adSourceKey];Y=await ee.runSingleAds(de,ie.adSourceKey),Y.isPlaying&&(o.addAdSource(de.key.adSourceKey),a.addAdSource(de.key.adSourceKey)),rt.enableVidSplay&&(A.set(new Nt(!0,rt.vidSplayURL)),y.set(!0),await C(rt.vidSplayTimeout*1e3),y.set(!1),A.set(new Nt(!1,""))),await U.freeWorkerPlayingVideo(parseInt(de.id))}oe.push(8),await ee.cleanAll()}catch(ie){debugger;r.setIsPlayingGoogleAd(!1),Me=[],await ee.cleanAll(),P.error("2_steps_logic_loop",ie,{steps:oe,events:Ze}),d.Error("error ",ie),await C(200)}}}}catch(J){d.Error("error ",J),P.error("logic1_init",J)}}return dt(()=>{j(f),f.subscribe(K=>{})}),[V]}class as extends He{constructor(e){super(),je(this,e,ss,null,Ge,{init:0})}get init(){return this.$$.ctx[0]}}function os(){(function(t,e,i,n,r){t[n]=[{source:"82810",sync_limit:7}],t[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var a=e.getElementsByTagName(i)[0],s=e.createElement(i),o=n!="dataLayer"?"&l="+n:"";s.async=!0,s.src="//www.googletagmanager.com/gtm.js?id="+r+o,a.parentNode.insertBefore(s,a)})(window,document,"script","spotxDataLayer","GTM-NH3RQL3")}function ls(){let t=new Map;return t.set("spotx",os),t}const kn=ls();var u=be;(function(t,e){for(var i=be,n=t();[];)try{var r=parseInt(i(581))/1*(parseInt(i(687))/2)+parseInt(i(473))/3+-parseInt(i(729))/4+-parseInt(i(789))/5*(-parseInt(i(691))/6)+-parseInt(i(660))/7+-parseInt(i(488))/8*(parseInt(i(788))/9)+parseInt(i(800))/10;if(r===e)break;n.push(n.shift())}catch{n.push(n.shift())}})(fi,585641);function be(t,e){var i=fi();return be=function(n,r){n=n-281;var a=i[n];return a},be(t,e)}function Rn(t){var e=be;return(Rn=e(429)==typeof Symbol&&e(343)==typeof Symbol[e(414)]?function(i){return typeof i}:function(i){var n=e;return i&&n(429)==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?n(343):typeof i})(t)}function _i(t,e){var i=be,n,r,a,s,o=i(669)!=typeof Symbol&&t[Symbol[i(414)]]||t[i(766)];if(o)return r=!(n=!0),{s:function(){var c=i;o=o[c(590)](t)},n:function(){var c=i,d=o[c(436)]();return n=d[c(369)],d},e:function(c){r=!0,a=c},f:function(){var c=i;try{n||o.return==null||o[c(799)]()}finally{if(r)throw a}}};if(Array[i(423)](t)||(o=cs(t))||e&&t&&i(813)==typeof t.length)return o&&(t=o),s=0,{s:e=function(){},n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(c){throw c},f:e};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cs(t,e){var i=be,n;if(t)return i(468)==typeof t?Cn(t,e):i(418)===(n=i(445)===(n=Object[i(640)].toString[i(590)](t).slice(8,-1))&&t[i(680)]?t[i(680)][i(638)]:n)||i(645)===n?Array[i(692)](t):i(606)===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[i(614)](n)?Cn(t,e):void 0}function Cn(t,e){var i=be;(e==null||e>t[i(677)])&&(e=t[i(677)]);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M(t){var e=be,i;this[e(780)]=Date.now()+"_"+this[e(673)](0,1e3),window&&(window[e(783)]=window[e(783)]||[],window[e(783)][e(324)](this)),this.version=5.413,this[e(827)](t),this[e(707)]=this[e(743)](),this[e(573)]=this[e(539)]()||!1,this[e(707)][e(782)](e(575)+this[e(312)]+e(602)),this[e(313)]=this[e(754)](),this[e(303)]={partner:t?t[e(399)]:null,refreshInMillis:t&&typeof t[e(657)]=="number"?t.refreshInMillis:432e5,timeoutInMillis:t&&e(813)==typeof t[e(304)]?t[e(304)]:500,isAsyncServerRequest:!t||e(682)!=typeof t[e(295)]||t[e(295)],callback:t&&e(429)==typeof t[e(531)]?t[e(531)]:null,enhanceRequests:!t||e(682)!=typeof t[e(444)]||t[e(444)],sourceMetaData:t&&e(468)==typeof t[e(826)]?this.translateMetadata(t[e(826)]):this.translateMetadata(""),sourceMetaDataExternal:t&&!isNaN(t.sourceMetaDataExternal)?t[e(465)]:void 0,iiqServerAddress:t&&e(468)==typeof t[e(820)]?t[e(820)]:e(774),iiqPixelServerAddress:t&&e(468)==typeof t[e(281)]?t[e(281)]:e(320),partnerClientId:t&&e(468)==typeof t[e(811)]?t.partnerClientId:"",partnerClientIdType:t&&e(813)==typeof t.partnerClientIdType?this.verifyIdType(t.partnerClientIdType):-1,pbjs:t&&t[e(810)]!==void 0?t[e(810)]:null,shouldRepalcePubprovided:!t||e(682)!=typeof t[e(509)]||t.shouldRepalcePubprovided,shouldSetUidsModulesConfig:!t||e(682)!=typeof t[e(326)]||t[e(326)],shouldClearDuplicatresForRubicon:!t||e(682)!=typeof t[e(830)]||t[e(830)],manualWinReportEnabled:!(!t||e(682)!=typeof t.manualWinReportEnabled)&&t[e(833)],messageSendingDelay:t&&!isNaN(t[e(506)])?t[e(506)]:0,domainName:t&&t.domainName?t[e(748)]:"",shouldReplaceUnifiedId:t&&e(682)==typeof t[e(323)]?t.shouldReplaceUnifiedId:this.unifiedIdReplacementLogic(),browserBlackList:t&&e(468)==typeof t[e(696)]?t[e(696)][e(594)]():"",shouldFilerTdidFromPPuid:!(!t||typeof t[e(812)]!="boolean")&&t[e(812)],reportMethod:t&&e(468)==typeof t[e(332)]?this.parseReportingMethod(t.reportMethod):e(665),appendEidsNamesToReport:!(!t||e(682)!=typeof t.appendEidsNamesToReport)&&t[e(742)],siloEnabled:!(!t||e(682)!=typeof t.siloEnabled)&&t.siloEnabled,ppuidSourceBlackList:t&&typeof t[e(548)]=="string"?t[e(548)].toLowerCase():"",enablePBJSFiltration:!t||e(682)!=typeof t.enablePBJSFiltration||t[e(652)],ABTestingConfigurationSource:(i=t==null?void 0:t[e(557)])!=null?i:"percentage",abPercentage:(i=t==null?void 0:t[e(666)])!=null?i:95},this.mandarotyVariablesInit(t),this[e(427)](t),this[e(303)].siloEnabled&&!isNaN(this[e(303)].partner)&&(this[e(303)][e(589)][e(475)]=this[e(303)][e(589)].FIRST_PARTY_KEY+e(530)+this.intentIqConfig[e(399)]),this[e(335)]("Before object init"),this.initABTestingConfiguration(),this.intentIqConfig[e(696)]!==""&&this[e(303)].browserBlackList.includes(this[e(313)])?(this[e(707)][e(782)](e(749)),this[e(739)]=!0,this.intentIqConfig[e(531)]&&(this[e(303)][e(531)](),this[e(805)][e(558)]++,this[e(379)]())):(this[e(303)][e(817)]=!1,this[e(767)](),this[e(389)](),this.currentDataTTl=this.intentIqConfig[e(657)],this[e(373)]=this[e(368)](),this[e(540)](),this[e(706)](!0),this[e(303)][e(610)][e(775)]!==this[e(303)].operationalMode.vr&&this[e(744)](),this[e(786)](),this.printConfigurationReport(),this[e(438)]())}function ds(t){var e=be;this.constants={noteReported:"NR"},this[e(553)]=t&&t[e(553)]&&!isNaN(t[e(553)])?t[e(553)]:1,this[e(559)]=t&&t[e(559)]?t[e(559)]:this[e(636)][e(713)],this[e(759)]=t&&t[e(759)]?t[e(759)]:this[e(636)][e(713)],this.prebidAuctionId=t&&t[e(772)]?t[e(772)]:this[e(636)].noteReported,this[e(639)]=t&&t[e(639)]&&!isNaN(t[e(639)])?t.cpm:0,this[e(300)]=t&&t[e(300)]?t[e(300)]:this[e(636)].noteReported,this[e(499)]=t&&t[e(499)]&&!isNaN(t[e(499)])?t[e(499)]:this[e(639)],this[e(771)]=t&&t.originalCurrency?t[e(771)]:this[e(300)],this[e(381)]=t&&t[e(381)]?t[e(381)]:this[e(636)].noteReported,this[e(726)]=t&&t.placementId?t[e(726)]:this[e(636)][e(713)]}function fi(){var t=["inbbl","floor","originalCpm","pubprovidedidsFailedToregister","adt","setTraceLevel","readData","configurationSource","none","reportDelay","withoutIIQ","src","shouldRepalcePubprovided","userProvidedConfig","parseConfigurationSource","uspapi_value","&jsver=","noDataCount","auctionStartTime","bidderRequests","updateCountersAndSaveIfAsked","height","clearCounters","top","img","safari"," value=","hadEidsInLocalStorage","pbmonitoring","&ip=","tryExtractConfiguration","NONE","other","_p_","callback","refreshUserIds","&iiqid=","fillPrebidEventData","keys","lastDataUpdateDate","--------Startup configuration---------","jsverion","isDebug","clearDataIfInGroupBorPassiveMode","adserver.org","translateMetadata","appendReferrerToUrl","syncRefreshMillis","messagesArray","uids","appendLastDataUpdateDate","ppuidSourceBlackList","wasSubscribedForPrebid","Received custom TTL from server, value: ","getDefaultDataObject","eidsReceptionsTime","biddingPlatformId","userId","pixel","ABSENCE_VALUE","ABTestingConfigurationSource","noDataCounter","partnerAuctionId","getIntentIqData","Edg","_print","pubProvidedId","timestamp","INFO","appendChild","hasLocalStorage","pub","parseReportingMethod","dual","eventType","processResponse","isDebugMode","percentage","========IIQ Agent version ","&gtw=true","/profiles_engine/ProfilesEngineServlet?at=20&mi=10&secure=1","addUniquenessToUrl","parseCollisionPreventionMode","userIdAsEids","2zjKCoD","&payload=","https","&pa=","Faild to register EIDS","tryParseInt","setConfigObjectForUnifiedId","&rnd=","lsKeys","call","both","&jafc=","addMetaData","toLowerCase","PBJS or QUE not defined","colour","generateRandomUsIp","Response from PE parsed, firing callback","containsEids","startsWith","Extracting monitoring parameter","========","initUspDataObj","dataReportingPath","getDataFromTop","Arguments","previousPercentage","Parse response eids got exception","PBJS not provided while trying to update pbjs objecr refference","operationalMode","Subscribing for auctionInited event","urlParamsNames","appendImage","test","readyState","uspDataObj","partnerClientIdType","Actual callback fire.","userSync.userIds","_iiq_pb_pausetill_","gatewayWasCalled","Failed to get EIDS for internal call","configurationTime","rtt","abTesting","ppcc","value","Skippping calback fire , already fired or not defined","appendRttDate","withCredentials","storeData","https://ucgfk6g6s7.execute-api.us-east-1.amazonaws.com","appendPartnersFirsyParty","pidDeterministic","&pcid=","constants","onBidWonEvent","name","cpm","prototype","Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers","tryRegisterForAuctionInited","secondary_color","isEmptyObjAndArray","Set","currentPercentage","width","addEventListener","open","responseText","createPixelUrl","enablePBJSFiltration","source","Total amount of events is ","setDebugLevel","pbjsver","refreshInMillis","unknown","toString","1167250bNGTnB","firefox","unifiedId","partnerAuctionIdsArray","edge","GET","abPercentage","currentDataTTl","addDataToSendAndInitSender","undefined","CriOS","auctionEidsLegth","green","getRandom","setItem","iiqserver","mandarotyVariablesInit","length","Failred to update counters.","Response is empty","constructor","blue","boolean","generateNewRandomIp","98.115.221.","appendFirstPartyDataToUrl","splice","479202KganOW","getEvents","tryRegisterForBidWon","auctionInit","6lKtcir","from","metadataConstant","replace","&dbsaved=","browserBlackList","fireCallbackOnRequestTimeout","Response received","getEvent","previousTestGroup","Validation at stage: ","Subscribing for bidRequested cleanup","unifiedeId","uspCodes","filter","getDataOrCallServerIfNeeded","logger","bidWon","application/json","isInTestGroup","&fbp=","intentIqData","noteReported","PARTNER_DATA_KEY","pbMonitoringEnabled","moduleIds","intentIqId requires a valid partner to be defined","aeidln","lsps","configureABTestingForGroupA","auctionInited","Auction started.","localStorageEnabled","DEBUG","&iiqlocalstorageenabled=","placementId","split","siloEnabled","3483192TUypvG","includes","failCount","configureABTestingForIIQServer","requestRtt","replacer","getDataFromWindow","gtwaddr","sync","&japs=","isInBrowserBlacklist","pidd","OPR","appendEidsNamesToReport","initLogger","pixelSync","; border-radius: 3px","wasServerCalled","testGroup","domainName","Browser is in blacklist. Good bye.","toUpperCase","Got stored CCPA Value: ","body","Trying to send data: ","detectBrowser","userActualPercentage","Manual won report enabled. Skipping bidwon subscription.","&iiqidtype=2&iiqpcid=","date","bidderCode","cttl","107.77.208.","onreadystatechange","bids","getOperationalMode","Pbjs wasn't defined","@@iterator","initPbMonitoring","getConfig","wsrvcll","getRefferer","originalCurrency","prebidAuctionId","params","https://api.intentiq.com","current","hadEids","userPercentage","abPercentage received: ","error","agentId","subscriptionFlags","info","iiq_object_array","Late configuration suspected. Events were missed.","getPubprovidedEids","initReportingModule","fireCallback","27epbqzf","1319795STnGsa","tryExtractABTestingConfiguration","eidsNames","&japbjs=","_iiq_fdata_","pbPauseUntil","mcc","Skipping data send , array is empty","send","PUB","return","7825380aFRYpY","Pushing config for prebid ","bind","clientType","stringify","counters","Trying to fire callback on timeout","Initializing on unload events","opera","We have some data to send - starting delayed sender. Delay = ","pbjs","partnerClientId","shouldFilerTdidFromPPuid","number","Wrong response format (not an array): ","Data conversion succeed : ","abGroup","isInPassiveMode","configurePrebid","LAST_SYNC_KEY","iiqServerAddress","fillPartnerReportingData","FATAL","verifyIdType","grey","agent.intentIqConfig or agent.intentIqConfig.paramsNames was nor initialized on reporting","sourceMetaData","initRuntimeDefaults","callbackTimeotID","persistABTestingSettingsToLS","shouldClearDuplicatresForRubicon","Error adding pixel to DOM ","generateRandom1to99","manualWinReportEnabled","auctionEidsLength","eventData is empty","Access-Control-Allow-Credentials","isObjectEmpty","appendABTestingData","report","isDefined","xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx","iiqPixelServerAddress","&jaensc=","siteId","documentMode","pai","addLevelValue","getTime","idCollisionPreventionMode","que","indexOf","notYetDefined","loadPartnerData","TRACE","_iiq_sync_","isAsyncServerRequest","DUAL","terminationCause","useLodalData","INITIAL_VALUE","currency","load","extractIdentittyModulesIds","intentIqConfig","timeoutInMillis","sort","getItem","Calling callback - passive mode or group B set","cookiFullBrowsersListLowercase","Skipping registering on unload events, message delay = 0","&jaesc=","debug","version","currentBrowserLowerCase","dbsaved","currentTestGroup","Pbjs was defined but it has no getEvents method. Looks like we are right on time.","&iiqpciddate=","New data available to send, ","isPrebidConfigurationSet","https://sync.intentiq.com","tryRegisterForBidRequested","dataSentOnUnload","shouldReplaceUnifiedId","push","makeServerRequest","shouldSetUidsModulesConfig","messageSendingDelay","currentUspValue","&agid=","updatePrebidObject","__uspapi","reportMethod","eids","pbMonitoringEnabled is disabled ","checkAndPrintPrebidInitAuctionsStatus","Access-Control-Allow-Headers","tryParse","reportingServerAddress","&idtype=","testPercentage","readUspData","mde","symbol","&dpi=","disabled","levelValue","&paucid=","vrref","data","] %c","true","Clear duplicates for rubicon","eidt","sid","allBidsMap","pcid","group","_iiq_ab_group_","wasDebugCheck","pid","random","getRequest","fillAgentRuntimeData","_iiq_ip","generateGUID","now","Updating sender","loadOrCreateFirstPartyData","done","pcidDate","serverResponse","adUnitCode","firstPartyData","configureABTestingForPercentage","delayedSenderTimeouter"," ; border:1px solid ","unshift","collisionPreventionMode","savePartnerDataToLocalStore","gatewayServerAddress","status","auctionId","analytics","]%c [","adserverDeviceType","allLevels","abTestingAdvancedConfiguration","compareTwoUidsObjects","subscribeForPrebidEvents","abtgu","Received Data: ","uspString","&pid=","shouldCallServer","wasCallFromConstructor","partnerId","ast","ontimeout","partner","referrer","lateConfiguration","Exception occurred during main logic: ","prepareDataForDelivery","fillEidsNames","_iiq_fdata","PIXEL","getUserIds","getUSPData","_iiq_pb_monitoringenabled_","tdid","Starting Prebid configuration ","Custom data TTL loaded from LS, value: ","parse","iterator","auctionStartTimeData","Opera","Extracting AB testing parameter","Map","&pai=","setInfoLevel","abTestGroup","abtp","isArray","disableIIQInThisGroup","&cttl=","Local storage api disabled","additionalVariablesInit","withIIQ","function","magenta","_iiq_debug_level","localStorage","_iiq_ab_percentage_","String PBJS Reconfiguration","Configuring failsafe callback","next","bidRequested","setTimeoutCallbackCall","userAgent","Safari","color: "," %c[","groupNames","enhanceRequests","Object","Failed to convert data","dataSender","dud","callCount","clearDuplictes","POST","createRequestUrl","isLessThanOrEqualTo","paramsNames","log","getIntentIqEidsInternal","setConfig","isEmpty","MSIE","red","Failed to prepare bid won data to send, ","CALLBACK not provided while trying to update pbjs objecr refference","concat","Sending request","sourceMetaDataExternal","pbpause","configureABTestingForGroupB","string","shouldDiscardServerConfiguration","fatal","configurationSourcePercentageInitilization","mode","472011gDZWZC","startSender","FIRST_PARTY_KEY","Skipping eids names population due to configuration","unifiedIdReplacementLogic","partnerData","generateTestGroupAccordingToPercentageAndConfigure","setRequestHeader","rrtt","&mct=","isCellular","onEvent","wasCallbackFired","Access-Control-Allow-Methods","&vrref=","159592GWBXoh","onbeforeunload","Firefox"," to:","Failed to report pbjs events state","createElement","isIpCellular","profile","currentConfigurationSource"];return fi=function(){return t},fi()}M[u(640)][u(438)]=function(){var t=u;this[t(828)]||(this[t(707)][t(782)](t(435)),this[t(828)]=setTimeout(this[t(697)].bind(null,this),this.intentIqConfig[t(304)]))},M[u(640)].printConfigurationReport=function(){var t=u;this[t(707)][t(782)]("--------User configuration---------"),this[t(707)].debug(JSON.stringify(this[t(510)],this[t(734)],2)),this[t(707)][t(782)](t(537)),this[t(707)][t(311)](JSON[t(804)](this[t(303)],this[t(734)],2)),this[t(707)][t(782)]("--------------------------------------")},M.prototype.initReportingModule=function(){var t=u,e=this;if(this[t(303)].messageSendingDelay===0)this[t(707)][t(782)](t(309));else{this.logger[t(782)](t(807));try{window[t(489)]=function(){var i=t;e[i(322)]=!0,0<e.messagesArray[i(677)]&&e[i(447)](e)}}catch{this[t(707)][t(779)]("Failed to susbscibe for onbeforeunload")}try{window.onunload=function(){var i=t;e[i(322)]===!1&&0<e[i(545)][i(677)]&&e[i(447)](e)}}catch{this[t(707)][t(779)]("Failed to susbscibe for onbeforeunload")}}},M.prototype[u(427)]=function(t){var e=u;this.intentIqConfig.moduleIds={unifiedeId:null},this[e(303)][e(610)]={vr:"VR",pixel:e(406),dual:e(296),node:e(528),current:t&&e(468)==typeof t.mode?this[e(764)](t[e(472)]):"DUAL"},t&&t[e(712)]&&e(669)!==t.intentIqData&&(this.intentIqData=t[e(712)],this[e(303)][e(610)][e(775)]=this[e(303)][e(610)].vr,this[e(298)]=!0,this[e(303)][e(525)]=!0),this[e(303)].collisionPreventionMode={pub:e(798),other:"OTHER",none:"NONE",current:t&&e(468)==typeof t[e(288)]?this[e(579)](t[e(288)]):e(528)},this[e(303)][e(612)]={isInTestGroup:e(390),testPercentage:e(422),testPreviousPercentage:"abtpp",testGroup:"abtg",pbPauseUntill:e(466),requestRtt:e(481),lastDataUpdateDate:e(448)},this[e(303)][e(383)]={requestRtt:0,clientType:"",adserverDeviceType:"",terminationCause:"",profile:"",siteId:null},this.intentIqConfig[e(525)]={pbMonitoringEnabled:!t||e(682)!=typeof t[e(715)]||t[e(715)]===!0,pbPauseUntill:-1},this[e(303)][e(781)]={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1}},M.prototype[u(676)]=function(t){var e=u;this[e(303)][e(589)]={FIRST_PARTY_KEY:e(405),PARTNER_DATA_KEY:e(793)+this.intentIqConfig[e(399)],LAST_SYNC_KEY:e(294)+this[e(303)][e(399)],abGroup:e(358)+this[e(303)][e(399)],abPercentage:e(433)+this[e(303)][e(399)],pbMonitoringEnabled:e(409)+this[e(303)][e(399)],pbPauseUntill:e(620)+this.intentIqConfig[e(399)],requestRtt:"_iiq_requestrtt_"+this.intentIqConfig[e(399)],DEBUG_KEY:"_iiq_debug_level"},this[e(616)]=this[e(603)](),this[e(328)]=this.uspDataObj.getUspValue(),this[e(303)][e(625)]={groupNames:{withoutIIQ:"B",withIIQ:"A",notYetDefined:"U",none:"N"},configurationSource:{percentage:"percentage",group:e(357),iiqserver:"IIQServer",disabled:e(345),currentConfigurationSource:this[e(511)](this.intentIqConfig[e(557)])},currentPercentage:-1,isInTestGroup:t[e(424)],previousPercentage:-1,currentTestGroup:"U",previousTestGroup:"U",shouldDiscardServerConfiguration:!1,userActualPercentage:this[e(303)][e(666)]},this[e(303)].paramsNames={abPercentage:"abPercentage",abTestGroup:"abGroup",pbPauseUntill:e(794),pbMonitoringEnabled:"pbMonitoringEnabled",isInTestGroup:e(710),enhanceRequests:"enhanceRequests",wasSubscribedForPrebid:e(549),hadEids:e(776),userActualPercentage:e(777),ABTestingConfigurationSource:e(557),lateConfiguration:e(401),jsverion:"jsversion",eidsNames:e(791),requestRtt:e(624),clientType:e(803),adserverDeviceType:"AdserverDeviceType",terminationCause:e(297),callCount:e(449),manualCallCount:e(795),pubprovidedidsFailedToregister:e(626),noDataCount:e(514),profile:"profile",isProfileDeterministic:"pidDeterministic",siteId:"sid",hadEidsInLocalStorage:"idls",auctionStartTime:e(397),eidsReadTime:e(353),agentId:"aid",auctionEidsLegth:e(718),wasServerCalled:e(769),refferer:e(348),isInBrowserBlacklist:e(497),prebidVersion:e(656),partnerId:"partnerId"}},M.prototype[u(827)]=function(t){var e=u;this[e(712)]={},this[e(483)]=!1,this[e(623)]=Date[e(366)](),this[e(478)]={},this.wasDebugCheck=!1,this[e(746)]=!1,this.wasCallFromConstructor=!1,this.wasCallbackFired=!1,this[e(805)]={callCount:0,noDataCounter:0,failCount:0},this[e(704)]={INITIAL_VALUE:"-1",ABSENCE_VALUE:"-2"},this.currentUspValue=this.uspCodes[e(299)],this[e(693)]=256,this.syncRefreshMillis=36e5,this[e(394)]=!1,this.isPrebidConfigurationSet=!1,this[e(510)]=t,this[e(536)]=0,this[e(623)]=0,this[e(733)]=0,this[e(355)]={},this.messagesArray=[],this[e(663)]=[],this[e(338)]="https://reports.intentiq.com",this[e(380)]=e(632),this[e(604)]=e(839),this[e(375)]=null,this.gatewayWasCalled=!1,this[e(723)]=void 0,this[e(500)]=!1,this.callbackTimeotID=null,this[e(552)]=null,this[e(791)]=[],this.useLodalData=!1,this[e(415)]={},this[e(834)]={},this[e(322)]=!1,this[e(524)]=!1,this[e(308)]=["chrome"],this[e(739)]=!1,this[e(734)]=function(i,n){var r=e;return i=="pbjs"||i=="lsKeys"||r(371)==i||r(612)==i||r(443)==i?"skipped in printing":n}},M[u(640)][u(477)]=function(){var t=u;return this.currentBrowserLowerCase||(this[t(313)]=this.detectBrowser()),this[t(308)][t(730)](this.currentBrowserLowerCase)?(this[t(707)][t(782)]("CookieFull browser detected, setting unifyed id override logic to: FALSE"),!1):(this[t(707)][t(782)]("Cookieless browser detected, setting unifyed id override logic to: TRUE"),!0)},M.prototype[u(540)]=function(){var t=u,e;this[t(303)][t(817)]||this[t(303)][t(625)].currentTestGroup===this[t(303)][t(625)].groupNames.withoutIIQ?((e=this[t(503)](this.intentIqConfig[t(589)][t(714)]))!=null&&((e=JSON.parse(e)).data={},this[t(631)](this[t(303)][t(589)].PARTNER_DATA_KEY,JSON.stringify(e))),this[t(707)].info(t(307)),this[t(787)]()):this.callbackTimeotID||(this[t(828)]=setTimeout(this[t(697)][t(802)](null,this),this[t(303)][t(304)]))},M[u(640)][u(837)]=function(t){var e=u;return t&&Object[e(535)](t)[e(677)]===0&&Object.getPrototypeOf(t)===Object[e(640)]},M.prototype[u(569)]=function(t){var e=u;try{switch(t[e(750)]()){case e(665):return"GET";case e(451):return e(451);default:return"GET"}}catch(i){this[e(707)][e(779)](i)}return e(665)},M[u(640)][u(697)]=function(t){var e=u;t[e(707)].info(e(806)),t[e(787)]()},M[u(640)][u(335)]=function(t){var e=u;try{this[e(539)]()&&(this[e(707)][e(782)](e(701)+t),this.intentIqConfig[e(810)]?this[e(303)][e(810)][e(699)]?(this[e(707)][e(782)](e(654)+this[e(303)][e(810)][e(688)]()[e(677)]),this.logger.info("Amount of auctionInit events is "+this.intentIqConfig.pbjs[e(688)]()[e(705)](function(i){var n=e;return n(690)===i[n(571)]}).length)):this[e(707)][e(782)](e(316)):this.logger[e(779)](e(765)))}catch{this.logger[e(779)](e(492))}},M[u(640)][u(302)]=function(){var t=u;try{if(this.intentIqData&&this[t(712)][t(333)]&&Array[t(423)](this.intentIqData[t(333)])){var e,i=_i(this.intentIqData[t(333)]);try{for(i.s();!(e=i.n()).done;){var n=e[t(627)];if(n.source&&n.source==="adserver.org"&&n[t(546)][0].id){this[t(303)][t(716)][t(703)]=n[t(546)][0].id;break}}}catch(r){i.e(r)}finally{i.f()}}}catch(r){this.logger[t(470)](r)}},M[u(640)][u(404)]=function(){var t=u;try{if(this[t(303)].appendEidsNamesToReport){if(this[t(791)]=[],this.intentIqData&&this[t(712)][t(333)]&&Array[t(423)](this[t(712)].eids)){var e,i=_i(this[t(712)].eids);try{for(i.s();!(e=i.n())[t(369)];){var n=e[t(627)];this[t(791)][t(324)](n[t(653)])}}catch(r){i.e(r)}finally{i.f()}}}else this[t(707)].info(t(476))}catch{this[t(707)][t(470)]("Failed to collect eids names")}},M[u(640)].initPbMonitoring=function(){var t=u;this.intentIqConfig.manualWinReportEnabled===!0?this[t(303)][t(525)][t(715)]=!1:this.userProvidedConfig&&typeof this[t(510)][t(715)]=="boolean"&&(this[t(303)][t(525)][t(715)]=this[t(510)][t(715)]===!0)},M[u(640)][u(368)]=function(){var t=u,e=this[t(337)](this[t(503)](this[t(303)][t(589)][t(475)]));return e&&e[t(360)]&&(this[t(303)][t(383)][t(495)]=e[t(360)]),e&&e.pcid?e&&!e[t(370)]&&(e.pcidDate=Date[t(366)]()):e={pcid:this[t(365)](),pcidDate:Date[t(366)]()},this.storeData(this[t(303)][t(589)].FIRST_PARTY_KEY,JSON[t(804)](e)),e},M[u(640)][u(511)]=function(t){var e=u;return e(574)===t||e(357)===t||t==="IIQServer"||e(345)===t?t:e(345)},M[u(640)].getOperationalMode=function(t){var e=u;try{switch(t[e(594)]()){case"bidenhancement":return"VR";case e(737):return e(406);case e(591):return e(296)}}catch(i){this[e(707)][e(779)](i)}return this[e(303)].operationalMode[e(570)]},M.prototype[u(823)]=function(t){return t===0||t===1||t===3||t===4?t:-1},M[u(640)][u(579)]=function(t){var e=u;try{switch(t[e(594)]()){case e(568):return"PUB";case e(529):return"OTHER";case e(505):return e(528)}}catch(i){this[e(707)][e(779)](i)}return this[e(303)][e(378)][e(505)]},M[u(640)].detectBrowser=function(){var t=u;try{var e=navigator[t(439)];return(e[t(290)](t(416))!=-1||e[t(290)](t(741)))!=-1?t(808):e[t(290)](t(561))!=-1?t(664):e[t(290)]("Chrome")!=-1||e[t(290)](t(670))!=-1?"chrome":e[t(290)](t(440))!=-1?t(522):e.indexOf(t(490))!=-1?t(661):e.indexOf(t(459))!=-1||!!document[t(284)]==1?"ie":t(658)}catch{return"unknown"}},M[u(640)][u(542)]=function(t){var e=u;try{var i=t[e(727)](".");return((+i[0]*this[e(693)]+ +i[1])*this[e(693)]+ +i[2])*this[e(693)]+ +i[3]}catch{return NaN}},M.prototype[u(673)]=function(t,e){var i=u;return Math[i(498)](Math[i(361)]()*(e-t+1)+t)},M[u(640)][u(832)]=function(){var t=u;return Math[t(498)](99*Math[t(361)]())+1},M[u(640)][u(458)]=function(t){var e=u;return Object[e(535)](t)[e(677)]==0},M[u(640)].isEmptyObjAndArray=function(t){return!t||Rn(t)=="object"&&this.isEmpty(t)},M.prototype.isDefined=function(t){return t!==void 0&&t!=null},M[u(640)][u(599)]=function(t){var e=u,i=t;try{return t?(i=t[e(349)]?t[e(349)]:i)[e(333)]&&Array[e(423)](i.eids)&&0<i[e(333)][e(677)]:!1}catch(n){this[e(805)][e(731)]++,this[e(707)][e(470)](n)}return!1},M[u(640)][u(597)]=function(){var t=u,e=this.readData(t(364));return(!e||this[t(494)](e)&&!this[t(483)]||!this[t(494)](e)&&this[t(483)])&&(e=this[t(683)](this[t(483)]),this[t(631)]("_iiq_ip",e)),e},M[u(640)][u(494)]=function(t){var e=u;return t.startsWith(e(761))},M[u(640)][u(683)]=function(t){var e=u;return t=e(t?761:684),t+=Math[e(498)](255*Math[e(361)]())},M[u(640)].tryParse=function(t){var e=u;try{return JSON.parse(t)}catch(i){this.logger[e(779)](i)}return null},M.prototype[u(586)]=function(t){var e=u;try{return parseInt(t,10)}catch(i){return this[e(707)][e(779)](i),-1}},M[u(640)][u(286)]=function(t){var e=u;return typeof t=="string"&&this.logger[e(386)][t=t[e(750)]()]?t[e(750)]():e(822)},M.prototype[u(743)]=function(){var t=u,e=this;return{info:function(i){var n=be;this[n(455)](n(565),i)},debug:function(i){var n=be;this[n(455)](n(724),i)},fatal:function(i){var n=be;this[n(455)](n(822),i)},error:function(i){var n=be;this[n(455)]("ERROR",i)},trace:function(i){var n=be;this[n(455)]("TRACE",i)},log:function(i,n){var r=be;this[r(453)](i)&&this[r(562)](n,i)},isLessThanOrEqualTo:function(i){var n=be;return this.allLevels[e[n(346)]][n(627)]>=this[n(386)][i][n(627)]},_print:function(i,n){var r=be,a=this[r(386)][n][r(596)],s=this[r(386)][n][r(643)],o=e.userProvidedConfig?e[r(510)][r(399)]:null,o=e&&e[r(303)]&&e[r(303)][r(399)]?e[r(303)][r(399)]:o;console[r(455)](""[r(463)](o,r(442))[r(463)](n,r(384)).concat(Date.now(),r(350))[r(463)](i),"color: white ; background-color:"+a+r(745),"border:none",r(441)+s+r(376)+a+r(745))},allLevels:{FATAL:{value:10,colour:t(430),secondary_color:t(430)},INFO:{value:20,colour:t(672),secondary_color:t(672)},ERROR:{value:30,colour:t(460),secondary_color:t(460)},DEBUG:{value:40,colour:"cyan",secondary_color:t(824)},TRACE:{value:50,colour:t(681),secondary_color:"blue"}}}},M[u(640)][u(539)]=function(){var t=u,e;return this.wasDebugCheck||(this[t(346)]=t(822),this[t(567)]()&&(e=this.readData("_iiq_debug_level"))!==null&&(this[t(573)]=!0,this.levelValue=this[t(286)](e)),this[t(359)]=!0),this[t(573)]},M[u(640)][u(420)]=function(){var t=u;this.storeData(t(431),t(565))},M.prototype[u(655)]=function(){var t=u;this.storeData("_iiq_debug_level",t(724))},M[u(640)][u(502)]=function(){var t=u;this[t(631)](t(431),t(293))},M[u(640)][u(567)]=function(){var t=u;if(this.localStorageEnabled!==void 0)return this[t(723)];try{return this[t(723)]=!!window.localStorage,this[t(723)]}catch{this.localStorageEnabled=!1,this[t(707)][t(782)](t(426))}return!1},M[u(640)].storeData=function(t,e){var i=u;try{i(468)==typeof t&&t[i(600)]("iiq_fdata")&&this[i(707)].info("IntentIQ: storing data: key="+t+i(523)+e),this[i(840)](e)&&this[i(567)]()&&window.localStorage[i(674)](t,e)}catch(n){this[i(707)][i(779)](n)}},M[u(640)][u(503)]=function(t){var e=u;try{if(this[e(567)]())return window[e(432)][e(306)](t)}catch(i){this.logger[e(779)](i)}return null},M.prototype[u(603)]=function(){var t=this;return{getUspValue:function(){var e=be,i=this[e(341)]();return i&&i[e(392)]?i[e(392)]:t[e(704)][e(556)]},readUspData:function(){var e=be;try{return this[e(735)]()}catch(i){t[e(707)][e(779)](i)}try{return this[e(605)]()}catch(i){t[e(707)][e(779)](i)}return{}},getDataFromWindow:function(){var e=be,i;if(window[e(331)])return window[e(331)](e(408),1,function(n){return i=n}),i},getDataFromTop:function(){var e=be,i;if(window.top[e(331)])return window[e(520)].__uspapi(e(408),1,function(n){return i=n}),i}}},M.prototype[u(365)]=function(){var t=u,e=new Date()[t(287)]();return t(841)[t(694)](/[xy]/g,function(i){var n=t,r=(e+16*Math[n(361)]())%16|0;return e=Math[n(498)](e/16),(i==="x"?r:3&r|8)[n(659)](16)})},M[u(640)][u(517)]=function(t,e){var i=u;try{this[i(599)](t)?this[i(805)][i(449)]++:this[i(805)][i(558)]++,e&&this[i(379)]()}catch{this[i(805)][i(731)]++,this[i(707)][i(779)](i(678))}},M[u(640)][u(519)]=function(){var t=u;this[t(805)]&&(this[t(805)].callCount=0,this.counters[t(731)]=0,this.counters.noDataCounter=0,this[t(379)]())},M[u(640)][u(787)]=function(){var t=u;try{this[t(303)].callback===null||this[t(303)][t(531)]===void 0||this[t(485)]?this[t(707)].info(t(628)):(this[t(485)]=!0,this[t(828)]!==null&&(this.logger[t(782)]("Removing callback timeout - got it first"),clearTimeout(this.callbackTimeotID)),this[t(707)][t(782)](t(618)),this[t(303)][t(531)](this[t(712)],this[t(303)].abTesting[t(315)]),this[t(303)][t(810)]===null&&this[t(517)](this[t(712)],!0))}catch(e){this.logger[t(470)](e)}},M[u(640)][u(785)]=function(t){var e=u;t===void 0&&(t=this);try{for(var i=JSON[e(413)](JSON[e(804)](t.getIntentIqEidsInternal(t))),n=0;n<i.length;n++)i[n].source&&t[e(303)][e(548)].includes(i[n][e(653)])&&i[e(686)](n,1);if(t.intentIqConfig[e(812)]!=0){for(var r=0;r<i[e(677)];r++)if(i[r][e(653)]&&e(541)===i[r].source&&i[r].uids[0].id){i[e(686)](r,1);break}}return i}catch{t[e(805)][e(731)]++,t[e(707)][e(779)](e(622)),t[e(379)]()}return[]},M[u(640)][u(560)]=function(){var t=u,e=this.getDataOrCallServerIfNeeded(!1);return this[t(517)](e,!0),e},M.prototype[u(456)]=function(t){var e=u;t===void 0&&(t=this);try{if(t[e(303)][e(817)]||t[e(303)][e(610)][e(775)]===t[e(303)][e(610)][e(555)])return[];if(t[e(303)].abTesting[e(315)]===t[e(303)][e(625)].groupNames[e(507)])return[];var i=t[e(706)](!0);if(i&&i[e(333)])return i[e(333)]}catch{t[e(805)][e(731)]++,t[e(707)][e(779)](e(608)),t[e(379)]()}return[]},M[u(640)][u(292)]=function(){var t=u,e,i=this[t(337)](this[t(503)](this[t(303)][t(589)][t(714)]));return i?(this.hadEidsInLocalStorage=!1,(i[t(349)]||this.useLodalData)&&(!this.intentIqConfig[t(817)]&&this[t(303)][t(625)].currentTestGroup!==this[t(303)][t(625)][t(443)][t(507)]||(i[t(349)]={}),this[t(298)]===!1?this[t(712)]=i[t(349)]:i.data=this.intentIqData,this.intentIqData&&this[t(712)][t(333)]&&Array[t(423)](this[t(712)][t(333)])&&(this[t(524)]=0<this[t(712)][t(333)].length),this[t(302)](),this[t(404)](),this[t(552)]=Date[t(366)]()),t(813)==typeof i[t(449)]&&(this[t(805)][t(449)]=i.callCount),t(813)==typeof i[t(731)]&&(this[t(805)].failCount=i[t(731)]),t(813)==typeof i[t(558)]&&(this.counters[t(558)]=i.noDataCounter),t(813)==typeof i[t(760)]&&(this[t(667)]=i[t(760)],this[t(707)][t(782)](t(412)+this[t(667)])),e=this[t(616)].getUspValue(),t(468)==typeof i[t(512)]?(this[t(328)]=i[t(512)],this[t(707)][t(782)](t(751)+this[t(328)]),this.currentUspValue!==e&&(this[t(328)]=e,this[t(667)]=0,i[t(760)]=0,this[t(394)]=!0,i[t(512)]=e,this[t(707)][t(782)]("Reset cttl value"))):(i[t(512)]=e,this[t(328)]=e,this[t(707)][t(782)]("Read CCPA Value from uspapi: "+this[t(328)])),i[t(758)]&&(this[t(536)]=i[t(758)],this[t(394)]=Date[t(366)]()-i.date>this[t(667)]),i.ct&&(this.intentIqConfig[t(383)].clientType=i[t(803)]),i[t(385)]&&(this[t(303)][t(383)][t(385)]=i[t(385)]),i[t(297)]&&(this[t(303)][t(383)][t(297)]=i[t(297)]),i[t(634)]&&(this[t(303)].analytics[t(634)]=i[t(634)]),i[t(283)]&&(this.intentIqConfig[t(383)][t(283)]=i[t(283)])):(i={},this[t(394)]=!0),i},M[u(640)].getDataOrCallServerIfNeeded=function(t){var e=u;try{var i;return this[e(303)][e(610)][e(775)]===this[e(303)][e(610)].pixel?{}:typeof this[e(303)][e(399)]!="number"?(this[e(805)][e(731)]++,this[e(707)][e(779)](e(717)),{}):(this[e(478)]=this[e(292)](),this[e(395)]?this[e(379)]():this.wasCallFromConstructor=!0,this[e(394)]&&this[e(298)]===!1?(this.wasServerCalled=!0,i=this[e(452)](!1),this[e(325)](i,!0)):this[e(319)]||(this[e(319)]=!0,this[e(818)]()),!t||t!==!0||this[e(644)](this[e(712)])&&this.shouldCallServer||this.fireCallback(),this[e(712)]||{})}catch(n){this[e(805)][e(731)]++,this[e(707)][e(779)](e(402)+n),this[e(379)]()}return{}},M.prototype[u(651)]=function(){var t=u,e=this[t(303)][t(281)]+t(577),e=(e+=t(344)+this[t(303)][t(399)])+(t(588)+this.getRandom(0,1e6));return e=this[t(685)](e),e=this[t(578)](e),e=this[t(593)](e),e=this[t(633)](e),e=this[t(543)](e),e+=this[t(312)]?"&jsver="+encodeURIComponent(this[t(312)]):"",e=this[t(838)](e)},M[u(640)][u(744)]=function(){var t=u;try{var e,i=parseInt(this[t(503)](this.intentIqConfig[t(589)][t(819)]));(!i||Date[t(366)]()-i>this[t(544)])&&(e=this[t(651)](),this[t(613)](e),this[t(631)](this[t(303)].lsKeys[t(819)],Date[t(366)]()+""))}catch(n){this[t(707)][t(779)](t(831)+n)}},M[u(640)][u(613)]=function(t){var e=u,i;this.isDefined(t)&&((i=document[e(493)](e(521)))[e(508)]=t,i[e(647)]=1,i[e(518)]=1,this[e(840)](document[e(752)])?document.body[e(566)](i):window[e(648)](e(301),function(){var n=e;try{document[n(752)][n(566)](i)}catch(r){this.logger[n(470)](r)}}))},M[u(640)][u(527)]=function(t){var e=u;this[e(303)][e(625)][e(469)]||(this[e(707)][e(782)](e(417)),this.tryExtractABTestingConfiguration(t)),this[e(707)][e(782)](e(601))},M.prototype[u(790)]=function(t){var e=u,i;this[e(303)][e(454)][e(666)]in t&&(i=this[e(586)](t[this[e(303)][e(454)][e(666)]]),this[e(707)].info(e(778)+t[this[e(303)].paramsNames.abPercentage]),i!==this.intentIqConfig.abTesting[e(646)])&&(this.logger[e(782)]("abPercentage has changed from:"+this[e(303)][e(625)].currentPercentage+e(491)+t[this[e(303)].paramsNames[e(666)]]),this[e(303)][e(625)][e(607)]=this[e(303)][e(625)].currentPercentage,this[e(303)].abTesting[e(646)]=i,this[e(479)](),this[e(829)]())},M.prototype[u(732)]=function(){var t=u;this[t(303)][t(625)][t(315)]=this.intentIqConfig[t(625)].groupNames.notYetDefined,this.intentIqConfig[t(625)][t(700)]=this.intentIqConfig[t(625)].groupNames[t(291)],this[t(303)].abTesting.shouldDiscardServerConfiguration=!1,this[t(303)][t(817)]=!1},M[u(640)][u(720)]=function(){var t=u;this[t(303)].abTesting.currentTestGroup=this[t(303)].abTesting[t(443)][t(428)],this[t(303)][t(625)][t(700)]=this.intentIqConfig[t(625)][t(443)][t(291)],this.intentIqConfig.abTesting[t(646)]=100,this.intentIqConfig.abTesting[t(469)]=!0,this.intentIqConfig.isInPassiveMode=!1},M.prototype[u(467)]=function(){var t=u;this.intentIqConfig.abTesting.currentTestGroup=this[t(303)][t(625)].groupNames[t(507)],this[t(303)][t(625)].previousTestGroup=this[t(303)][t(625)][t(443)][t(291)],this[t(303)][t(625)][t(646)]=0,this[t(303)][t(625)][t(469)]=!0,this[t(303)].isInPassiveMode=!0},M[u(640)][u(374)]=function(){var t=u;this[t(303)].abTesting.currentTestGroup=this.intentIqConfig[t(625)].groupNames.notYetDefined,this.intentIqConfig[t(625)][t(700)]=this.intentIqConfig[t(625)][t(443)][t(291)],this[t(303)][t(625)][t(469)]=!0,this[t(303)].isInPassiveMode=!1},M.prototype.configurationSourceGroupInitilization=function(){var t=u;this.userProvidedConfig&&t(682)==typeof this[t(510)].disableIIQInThisGroup&&(this[t(303)][t(625)].isInTestGroup=this.userProvidedConfig[t(424)]===!0,this[t(510)][t(424)]===!0)?this[t(467)]():this[t(720)]()},M[u(640)][u(471)]=function(){var t=u;switch(this[t(510)]&&t(813)==typeof this.intentIqConfig[t(666)]&&this[t(303)][t(666)]<101&&-1<this.userProvidedConfig[t(666)]?this[t(303)].abTesting[t(755)]=this[t(303)].abPercentage:this[t(303)][t(625)][t(755)]=-2,this[t(303)][t(625)][t(755)]){case 0:this[t(467)]();break;case 100:case-2:this[t(720)]();break;default:this.configureABTestingForPercentage()}},M[u(640)][u(387)]=function(){var t=u,e;this.intentIqConfig.abTesting.currentTestGroup===this[t(303)][t(625)][t(443)].notYetDefined&&(e=this[t(503)](this.intentIqConfig[t(589)][t(666)]),isNaN(parseInt(e))||(this.intentIqConfig[t(625)][t(646)]=Number(e)),(e=this.readData(this[t(303)][t(589)][t(816)]))!=null&&(this[t(303)][t(625)].currentTestGroup=e,this[t(303)][t(817)]=this[t(303)][t(625)][t(315)]===this[t(303)].abTesting[t(443)].withoutIIQ),this.intentIqConfig[t(625)].configurationSource[t(496)]===this[t(303)][t(625)][t(504)].percentage)&&this[t(840)](this[t(303)][t(625)][t(755)])&&0<this.intentIqConfig[t(625)].userActualPercentage&&this[t(303)][t(625)][t(755)]<100&&this[t(303)][t(625)].userActualPercentage!==this[t(303)][t(625)][t(646)]&&(this[t(303)][t(625)].previousTestGroup=this[t(303)][t(625)][t(315)],this[t(303)][t(625)][t(607)]=this[t(303)][t(625)][t(646)],this[t(303)].abTesting[t(646)]=this[t(303)][t(625)].userActualPercentage,this[t(479)](),this.persistABTestingSettingsToLS())},M[u(640)].initABTestingConfiguration=function(){var t=u;switch(this[t(303)][t(625)][t(504)].currentConfigurationSource){case this[t(303)][t(625)][t(504)][t(357)]:this.configurationSourceGroupInitilization();break;case this.intentIqConfig[t(625)][t(504)][t(574)]:this[t(471)]();break;case this.intentIqConfig[t(625)].configurationSource[t(675)]:this[t(732)]();break;case this.intentIqConfig[t(625)].configurationSource[t(345)]:this[t(720)]()}this[t(387)]()},M[u(640)][u(479)]=function(){var t=u;this[t(832)]()<this[t(303)][t(625)].currentPercentage?(this[t(303)][t(625)][t(315)]=this[t(303)].abTesting[t(443)][t(428)],this[t(303)][t(817)]=!1):(this[t(303)].abTesting[t(315)]=this[t(303)].abTesting[t(443)][t(507)],this[t(303)][t(817)]=!0)},M.prototype[u(829)]=function(){var t=u;this[t(840)](this.intentIqConfig[t(625)][t(315)])&&this.storeData(this.intentIqConfig.lsKeys.abGroup,this.intentIqConfig[t(625)][t(315)]),this.isDefined(this.intentIqConfig[t(625)][t(646)])&&this[t(631)](this[t(303)][t(589)][t(666)],this[t(303)][t(625)][t(646)])},M[u(640)][u(362)]=function(t,e,i,n){var r=u,a=new XMLHttpRequest;this[r(303)][r(295)]?a[r(649)](r(665),t,!0):a.open(r(665),t,!1),t[r(600)](r(583))&&(a[r(630)]=!0),a.timeout=e,a[r(762)]=function(){var s=r;i&&a[s(615)]===4&&i(a.responseText)},a[r(398)]=function(){n&&n()},a[r(797)]()},M.prototype[u(325)]=function(t,e){var i=u,n=this,r=!1;this[i(707)][i(782)](i(464)),this.requestRtt=Date.now(),e===!0&&(this[i(707)][i(782)]("Setting prebid config callback timeout"),this[i(828)]||(this[i(828)]=setTimeout(this[i(697)][i(802)](null,this),this[i(303)][i(304)]))),this[i(519)](),this[i(362)](t,9999999,function(c){var s=i;n.intentIqConfig.analytics.requestRtt=Date[s(366)]()-n[s(733)];var o,c=n[s(337)](c);c&&(n[s(478)][s(758)]=Date[s(366)](),s(360)in c&&(n[s(303)][s(383)][s(495)]=c[s(360)],"ls"in c)&&c.ls===!0&&(n.firstPartyData[s(360)]=c[s(360)],r=!0),s(314)in c&&(n[s(373)][s(314)]=c[s(314)],r=!0),s(760)in c?(n.currentDataTTl=c[s(760)],n[s(707)][s(782)](s(550)+n.currentDataTTl)):(n[s(667)]=n[s(303)].refreshInMillis,n[s(707)][s(782)]("No custom TTL from server, setting customers value: "+n[s(667)])),s(736)in c&&(n[s(380)]=c[s(736)]),"tc"in c&&(n[s(303)].analytics[s(297)]=c.tc,"mde"in c)&&c.mde===!0&&n[s(621)]===!1&&c[s(342)]===!0&&n[s(303)][s(383)].terminationCause===35&&n[s(754)]()==="safari"&&(n[s(707)].info("VP detected, trying to resolve."),n[s(621)]=!0,o=n.createRequestUrl(!0),n.makeServerRequest(o+=s(576),!0)),"ct"in c&&(n.intentIqConfig[s(383)][s(803)]=c.ct),s(501)in c&&(n[s(303)][s(383)][s(385)]=c[s(501)]),s(354)in c&&(n[s(303)][s(383)][s(283)]=c[s(354)]),s(740)in c&&(n[s(303)].analytics.isProfileDeterministic=c[s(740)]),n.tryExtractConfiguration(c),"ls"in c&&c.ls===!0&&(!n.intentIqConfig.isInPassiveMode&&n[s(303)][s(625)][s(315)]!==n[s(303)][s(625)][s(443)][s(507)]||(c[s(349)]={}),o=n[s(712)]&&n[s(712)][s(333)]&&Array[s(423)](n[s(712)][s(333)])&&0<n[s(712)].eids.length,"lsps"in c&&c[s(719)]!==!0&&(c[s(719)]!==!1||o)||(n[s(478)][s(349)]=c[s(349)],n[s(712)]=c[s(349)],n[s(302)](),n[s(404)](),n.eidsReceptionsTime=Date.now())),n[s(707)][s(782)](s(391)+JSON[s(804)](c))),r&&n[s(631)](n[s(303)][s(589)][s(475)],JSON[s(804)](n.firstPartyData)),n[s(379)](),n[s(319)]||(n[s(319)]=!0,n[s(818)]()),n[s(707)][s(782)](s(598)),n[s(787)]()},function(){var a=i;n[a(303)].analytics[a(733)]=-1,n[a(787)]()})},M[u(640)][u(379)]=function(){var t=u;this[t(478)]||(this[t(478)]=this[t(337)](this[t(503)](this[t(303)][t(589)][t(714)]))),this.partnerData&&(this.partnerData[t(449)]=this.counters[t(449)],this[t(478)][t(731)]=this.counters[t(731)],this[t(478)][t(558)]=this.counters[t(558)],this[t(478)][t(760)]=this.currentDataTTl,this[t(478)][t(803)]=this[t(303)].analytics[t(803)],this.partnerData[t(385)]=this.intentIqConfig.analytics[t(385)],this[t(478)][t(297)]=this.intentIqConfig[t(383)][t(297)],this[t(478)].profile=this[t(303)].analytics[t(495)],this.partnerData[t(634)]=this.intentIqConfig[t(383)].pidDeterministic,this[t(478)].siteId=this.intentIqConfig[t(383)].siteId,this[t(631)](this[t(303)][t(589)][t(714)],JSON[t(804)](this[t(478)])))},M[u(640)][u(452)]=function(t){var e=u;return t=(t===!0?this[e(380)]:this[e(303)].iiqServerAddress)+"/profiles_engine/ProfilesEngineServlet?at=39&mi=10&dpi="+this.intentIqConfig[e(399)]+"&pt=17&dpn=1",t=(t+=this.intentIqConfig[e(285)]?e(419)+encodeURIComponent(this[e(303)][e(285)]):"")+(this[e(312)]?e(513)+encodeURIComponent(this.version):""),t=this[e(685)](t),t=this.appendCounters(t),t+=e(725)+encodeURIComponent(this[e(567)]()),t=this.addUniquenessToUrl(t),t=this[e(593)](t),t+=e(425)+encodeURIComponent(this[e(667)]),this.currentUspValue!==this[e(704)][e(299)]&&this[e(328)]!==this.uspCodes[e(556)]&&(t+=e(584)+encodeURIComponent(this[e(328)])),t=this[e(633)](t),t=this.appendRttDate(t),t=this[e(547)](t),t=this.appendWithAnalyticsData(t),t=this[e(543)](t),t=(t+=e(792)+(this.intentIqConfig[e(810)]!==null))+(e(738)+this[e(303)][e(728)])},M[u(640)].appendCounters=function(t){var e=u;return t=(t=(t+=e(813)==typeof this[e(805)][e(449)]?e(310)+encodeURIComponent(this[e(805)][e(449)]):"")+(e(813)==typeof this[e(805)][e(731)]?e(592)+encodeURIComponent(this[e(805)][e(731)]):""))+(e(813)==typeof this[e(805)][e(558)]?e(282)+encodeURIComponent(this[e(805)][e(558)]):"")},M[u(640)][u(547)]=function(t){var e=u;return t=isNaN(this[e(536)])?t:t+"&"+this.intentIqConfig.urlParamsNames[e(536)]+"="+this[e(536)]},M.prototype[u(629)]=function(t){var e=u;return t=isNaN(this[e(303)][e(383)].requestRtt)?t:t+"&"+this.intentIqConfig[e(612)].requestRtt+"="+this[e(303)].analytics[e(733)]},M[u(640)].appendWithAnalyticsData=function(t){var e=u;return t=t+"&"+this.intentIqConfig[e(612)][e(747)]+"="+this[e(303)][e(625)][e(315)]},M[u(640)][u(838)]=function(t){var e=u;try{this[e(840)](this[e(303)][e(625)][e(710)])&&(t=t+"&"+this[e(303)].urlParamsNames.isInTestGroup+"="+this[e(303)][e(625)].isInTestGroup),this.isDefined(this[e(303)][e(625)][e(646)])&&(t=t+"&"+this.intentIqConfig[e(612)][e(340)]+"="+this[e(303)][e(625)][e(646)]),this.isDefined(this[e(303)][e(625)].currentTestGroup)&&(t=t+"&"+this[e(303)][e(612)].testGroup+"="+this[e(303)].abTesting.currentTestGroup)}catch(i){this.logger.error(i)}return t},M[u(640)].appendPartnersFirsyParty=function(t){var e=u;try{if(this.intentIqConfig[e(617)]===-1)return t;this[e(303)][e(811)]!==""&&(t=(t=t+e(635)+this.intentIqConfig[e(811)])+e(339)+this[e(303)].partnerClientIdType)}catch(i){this[e(707)].error(i)}return t},M[u(640)][u(593)]=function(t){var e=u,i=(i=this[e(303)][e(465)])||this.intentIqConfig[e(826)];return isNaN(i)||(t+=e(711)+i),t},M.prototype[u(578)]=function(t){var e=u;return t+="&tsrnd="+Math[e(498)](1e3*Math[e(361)]())+"_"+new Date()[e(287)]()},M.prototype[u(685)]=function(t){var e=u;return t=(t=(t=(t=(t+=this[e(539)]()?e(526)+encodeURIComponent(this[e(597)]()):"")+(this.firstPartyData[e(360)]?e(393)+encodeURIComponent(this[e(373)][e(360)]):""))+(this.firstPartyData[e(314)]?e(695)+encodeURIComponent(this.firstPartyData[e(314)]):""))+(this[e(373)][e(356)]?e(757)+encodeURIComponent(this[e(373)].pcid):""))+(this[e(373)][e(370)]?e(317)+encodeURIComponent(this[e(373)][e(370)]):"")},M[u(640)][u(543)]=function(t){var e=u;return this[e(770)]()!==""&&(t+=e(487)+this[e(770)]()),t},M[u(640)].getRefferer=function(){var t=u;return this[t(303)][t(748)]!==""?encodeURIComponent(this.intentIqConfig.domainName):document[t(400)]&&document[t(400)]!==""?encodeURIComponent(document[t(400)]):""},M.prototype[u(330)]=function(t,e){var i=u;try{t?e?(this[i(707)][i(782)](i(434)),this[i(303)][i(781)]={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1},this[i(485)]=!1,this[i(303)][i(810)]=t,this[i(303)][i(531)]=e,this[i(389)](),this[i(818)](),this.getDataOrCallServerIfNeeded(!0)):this[i(707)][i(779)](i(462)):this[i(707)][i(470)](i(609))}catch(n){this[i(707)][i(779)](n)}},M[u(640)][u(637)]=function(t,e){var i=u;try{var n;e[i(303)][i(525)][i(715)]?e[i(739)]?e[i(707)].info("Browser is in blacklist. Skipping report."):e[i(837)](t)?e[i(707)][i(782)](i(835)):(n=e[i(403)](t,null,e))===null?e[i(707)][i(782)](i(461)+e[i(303)][i(399)]):e[i(668)](n,e):e[i(707)][i(782)](i(334))}catch(r){e.logger[i(779)](r)}},M[u(640)].addDataToSendAndInitSender=function(t,e){var i=u;try{e[i(545)][i(324)](t),e[i(707)].info(i(318)+e[i(303)].partner),e[i(474)]()}catch(n){e[i(707)][i(779)](n)}},M[u(640)][u(551)]=function(){return{inbbl:!1,pbjsver:"NR",bidderCode:void 0,cpm:void 0,currency:void 0,originalCpm:void 0,originalCurrency:void 0,status:void 0,prebidAuctionId:void 0,placementId:void 0,biddingPlatformId:void 0,partnerAuctionId:"BW",abPercentage:void 0,abGroup:void 0,isInTestGroup:void 0,enhanceRequests:void 0,hadEids:void 0,userPercentage:void 0,ABTestingConfigurationSource:void 0,jsversion:void 0,lateConfiguration:void 0,eidsNames:void 0,rtt:void 0,clientType:void 0,AdserverDeviceType:void 0,terminationCause:void 0,profile:void 0,sid:void 0,idls:void 0,ast:void 0,eidt:void 0,aid:void 0,aeidln:void 0,wsrvcll:void 0,vrref:void 0,pcid:void 0,partnerId:void 0}},M[u(640)][u(363)]=function(t,e){var i=u,n;t.intentIqConfig&&t[i(303)][i(454)]?(e[t[i(303)].paramsNames[i(396)]]=t[i(303)][i(399)],e[t[i(303)][i(454)][i(739)]]=t.isInBrowserBlacklist,t[i(312)]&&(e[t[i(303)][i(454)][i(538)]]=t[i(312)]),t[i(303)][i(810)]&&t[i(303)][i(810)][i(312)]&&(e[t.intentIqConfig.paramsNames.prebidVersion]=t[i(303)][i(810)][i(312)]),e[t.intentIqConfig[i(454)].refferer]=t[i(770)](),n=t[i(415)][e[i(772)]]||0,e[t[i(303)][i(454)].wasSubscribedForPrebid]=t.isSubscribedForPrebidEvents,e[t.intentIqConfig.paramsNames[i(444)]]=t[i(303)][i(326)],e[t[i(303)][i(454)][i(776)]]=!(t[i(552)]===null||n<t[i(552)]),t[i(415)][e[i(772)]]===void 0&&(e[t[i(303)][i(454)].hadEids]=void 0),e[t.intentIqConfig[i(454)][i(515)]]=n,e[t.intentIqConfig[i(454)].lateConfiguration]=n===0?void 0:t[i(623)]>n,t.userProvidedConfig&&(e[t[i(303)][i(454)][i(755)]]=t[i(303)][i(666)],e[t[i(303)][i(454)][i(557)]]=t[i(303)].ABTestingConfigurationSource),t[i(303)][i(625)]&&(e[t[i(303)][i(454)][i(666)]]=t.intentIqConfig[i(625)][i(646)],e[t[i(303)].paramsNames[i(421)]]=t[i(303)][i(625)].currentTestGroup,e[t[i(303)][i(454)][i(710)]]=t.intentIqConfig[i(625)][i(315)]),n!==0&&t[i(623)]>n&&t[i(707)][i(782)](i(784)),e[t[i(303)][i(454)][i(791)]]=t.eidsNames,e[t[i(303)][i(454)][i(524)]]=t[i(524)],e[t[i(303)][i(454)].eidsReadTime]=t[i(552)],e[t[i(303)][i(454)].agentId]=t[i(780)],e[t[i(303)][i(454)][i(671)]]=t.auctionEidsLength[e[i(772)]],e[t[i(303)][i(454)][i(746)]]=t[i(746)],t[i(303)].analytics&&(e[t[i(303)].paramsNames[i(733)]]=t[i(303)][i(383)][i(733)],t[i(303)].analytics.requestRtt=0,t[i(733)]=0,e[t[i(303)].paramsNames[i(803)]]=t[i(303)].analytics[i(803)],e[t[i(303)][i(454)][i(385)]]=t.intentIqConfig[i(383)][i(385)],e[t[i(303)].paramsNames[i(297)]]=t[i(303)][i(383)][i(297)],e[t[i(303)].paramsNames[i(495)]]=t[i(303)].analytics[i(495)],e[t.intentIqConfig.paramsNames.siteId]=t[i(303)][i(383)][i(283)])):t[i(707)][i(779)](i(825)),t[i(567)]()&&(n=t[i(503)](t[i(303)][i(589)][i(475)]))!==null&&(i(356)in(n=JSON.parse(n))&&(n=n[i(356)]),e[i(356)]=n)},M[u(640)][u(821)]=function(t,e,i){var n=u;i[n(759)]=t[n(759)],i.cpm=t[n(639)],i[n(300)]=t[n(300)],i.originalCpm=t.originalCpm,i[n(771)]=t.originalCurrency,i[n(381)]=t.status,i[n(553)]=t[n(553)],i[n(772)]=t[n(772)],i[n(726)]=t[n(726)],i.partnerAuctionId=t[n(559)],e.partnerAuctionIdsArray&&e[n(663)][n(324)](i[n(559)])},M[u(640)].fillPrebidEventData=function(t,e,i){var n=u;t[n(759)]&&(i.bidderCode=t[n(759)]),t[n(639)]&&(i[n(639)]=t.cpm),t[n(300)]&&(i[n(300)]=t[n(300)]),t[n(499)]&&(i[n(499)]=t[n(499)]),t[n(771)]&&(i.originalCurrency=t[n(771)]),t.status&&(i[n(381)]=t[n(381)]),t.auctionId&&(i.prebidAuctionId=t[n(382)]);var r=!1;if(t[n(773)]&&Array.isArray(t[n(773)])){for(var a=0;a<t.params[n(677)];a++)if(t[n(773)][0][n(726)]){i.placementId=t.params[0][n(726)],r=!0;break}}r===!1&&t.adUnitCode&&(i[n(726)]=t[n(372)]),i[n(553)]=1,i[n(559)]="BW"},M[u(640)][u(403)]=function(t,e,i){var n=u;try{var r=i[n(551)](),a=(r[n(772)]=e?e[n(772)]:t[n(382)],i[n(363)](i,r),e?i.fillPartnerReportingData(e,i,r):i[n(534)](t,i,r),btoa(JSON.stringify(r)));return i.logger[n(782)]("Original Data : "+JSON[n(804)](r,null,4)),i[n(707)][n(782)](n(815)+JSON[n(804)](a)),a}catch(s){return i[n(707)][n(779)](n(446)),i.logger[n(779)](s),{}}},M[u(640)].startSender=function(){var t=u;try{this[t(707)][t(782)](t(809)+this[t(303)][t(327)]),this[t(840)](this.delayedSenderTimeouter)&&(this[t(707)].info(t(367)),clearTimeout(this.delayedSenderTimeouter)),this[t(375)]=setTimeout(this.dataSender[t(802)](null,this),this[t(303)][t(327)])}catch(e){this[t(707)].error(e)}},M[u(640)][u(447)]=function(t){var e=u;try{var i,n,r,a;t[e(545)].length==0?t.logger[e(782)](e(796)):(i=e(665)===t[e(303)][e(332)],n=JSON[e(804)](t[e(545)]),r=new XMLHttpRequest,a=t[e(338)]+"/"+t[e(604)]+"?pid="+t[e(303)].partner+e(482)+t.messagesArray.length+e(329)+t[e(780)]+(t[e(373)]&&t[e(373)][e(360)]?e(533)+encodeURIComponent(t[e(373)][e(356)]):"")+e(513)+t.version+e(487)+t[e(770)]()+e(347)+encodeURIComponent(JSON.stringify(t.partnerAuctionIdsArray))+e(584)+encodeURIComponent(t[e(328)]),i&&(a+=e(582)+n),a[e(600)]("https")&&(r[e(630)]=!0),r.open(e(i?665:451),a,!0),i?r[e(480)]("Content-type","text/plain"):(r[e(480)]("Content-type",e(709)),r[e(480)]("Access-Control-Allow-Origin","*"),r[e(480)](e(836),e(351)),r[e(480)](e(486),"GET,HEAD,OPTIONS,POST,PUT"),r[e(480)](e(336),e(641))),t[e(545)]=[],t[e(663)]=[],r[e(762)]=function(){var s=e;r.readyState==4&&r[s(381)]==200&&t[s(572)](r[s(650)])},t[e(707)][e(782)](e(753)),i?r[e(797)]():r[e(797)](n))}catch(s){t[e(707)][e(779)](s)}},M[u(640)][u(572)]=function(t){var e=u;try{var i;this.logger.info(e(698)+JSON[e(804)](t)),this[e(840)](t)?(i=this[e(337)](t),Array[e(423)](i)?i[e(677)]===0?this.logger[e(782)]("Control array is empty: "+t):(this[e(707)][e(782)]("Sending new cntroll param for processing: "+JSON[e(804)](i[0])),this[e(527)](i[0])):this[e(707)][e(782)](e(814)+t)):this[e(707)][e(782)](e(679))}catch(n){this[e(707)][e(779)](n)}},M[u(640)].reportExternalWin=function(t){var e=u;try{var i,n;this[e(739)]?this[e(707)][e(782)]("Browser is in blacklist. Skipping report."):(i=new ds(t),(n=this[e(403)](null,i,this))===null?this.logger[e(782)](e(461)+this[e(303)].partner):this.addDataToSendAndInitSender(n,this))}catch(r){this[e(707)][e(779)](r)}},M.prototype[u(321)]=function(t){var e=u;t[e(303)][e(810)].onEvent(e(437),function(i){var n=e;t[n(450)](i,t)})},M[u(640)][u(450)]=function(t,e){var i=u;try{var n,r,a=+((n=e[i(303)][i(810)])==null||(r=n[i(312)])==null?void 0:r.substr(1,4));if(e[i(303)][i(652)]&&8.14<a&&a<8.27){e[i(707)].info("Clear duplicates because of prebid bug (https://github.com/prebid/Prebid.js/issues/10793)");for(var s=0;s<t[i(763)][i(677)];s++){var o,c=t.bids[s];if(c!=null&&(o=c.userIdAsEids)!=null&&o[i(677)])for(var d=0;d<c[i(580)][i(677)];d++){var y,f=c[i(580)][d];if(1<(f==null||(y=f[i(546)])==null?void 0:y[i(677)])){f[i(546)]=f[i(546)][i(305)](e.compareTwoUidsObjects);for(var p,x,E,v=void 0,q=0;q<f[i(546)][i(677)];q++)f[i(546)][q].id===((E=f[i(546)][q+1])==null?void 0:E.id)&&(f[i(546)][i(686)](q,1),v=!0,q--);if(v&&c!=null&&(p=c[i(554)])!=null&&(x=p[i(563)])!=null&&x[i(677)]){for(var C,m=void 0,W=void 0,g=0;g<c[i(554)][i(563)].length;g++){var w=c[i(554)][i(563)][g];if(w[i(653)]===f[i(653)]){m=w,W=g;break}}m&&(m[i(546)]=f[i(546)],((C=e.intentIqConfig[i(810)][i(407)]())==null?void 0:C[i(563)])[W]=f)}}}}}else if(e[i(303)][i(830)]&&t[i(759)]==="rubicon"&&!(t[i(763)].length<1)&&e[i(303)][i(716)][i(703)]!=null){e[i(707)][i(782)](i(352));var b,A=_i(t[i(763)]);try{for(A.s();!(b=A.n()).done;){var I=b[i(627)];if(I[i(554)][i(410)]&&Array[i(423)](I[i(554)][i(563)])){for(var h=0;h<I[i(554)][i(563)][i(677)];h++)if(I.userId[i(563)][h][i(653)]==="adserver.org"){I.userId.pubProvidedId.splice(h,1);break}if(Array[i(423)](I[i(580)])){for(var S=0;S<I[i(580)].length;S++)if(i(541)===I[i(580)][S][i(653)]&&I.userIdAsEids[S][i(546)][0].id===e.intentIqConfig[i(716)][i(703)]){I[i(580)][i(686)](S,1);break}}}}}catch(V){A.e(V)}finally{A.f()}}}catch(V){e.logger.fatal(V)}},M[u(640)][u(818)]=function(){var t=u;try{this[t(707)][t(782)](t(411)),this[t(303)][t(810)]&&this[t(303)].pbjs.que?(this[t(707)][t(782)](t(801)),this[t(303)][t(810)][t(289)][t(324)](this.tryRegisterIds.bind(null,this))):this[t(707)][t(782)]("PBJS or QUE not defined")}catch(e){this[t(707)][t(779)](e)}},M[u(640)][u(389)]=function(){var t=u;try{this[t(707)][t(782)]("Starting Prebid subscription "),this[t(303)][t(810)]&&this[t(303)][t(810)].que?((this[t(303)].shouldClearDuplicatresForRubicon||this[t(303)][t(652)])&&(this[t(707)][t(782)](t(702)),this.intentIqConfig[t(810)][t(289)][t(324)](this.tryRegisterForBidRequested[t(802)](null,this))),this[t(303)][t(525)].pbMonitoringEnabled&&!this.intentIqConfig[t(781)].bidWon?(this[t(707)].info("Registering for subscription for bidWon event"),this[t(303)][t(810)][t(289)].push(this[t(689)].bind(null,this)),this[t(303)][t(781)][t(708)]=!0):this[t(303)][t(833)]===!0&&this[t(707)].info(t(756)),this.intentIqConfig[t(781)][t(721)]||(this[t(707)][t(782)](t(611)),this[t(303)].pbjs[t(289)][t(324)](this[t(642)].bind(null,this)),this[t(303)][t(781)].auctionInited=!0)):this[t(707)][t(782)](t(595))}catch(e){this[t(707)][t(779)](e)}},M.prototype.tryRegisterForAuctionInited=function(t){var e=u;t[e(303)][e(810)][e(484)](e(690),function(i){var n=e;try{t[n(517)](t[n(712)],!0),t[n(834)][i[n(382)]]=i[n(516)][0][n(763)][0][n(554)]&&i[n(516)][0][n(763)][0][n(554)].pubProvidedId?i.bidderRequests[0][n(763)][0][n(554)][n(563)].length:-1}catch(r){t[n(707)][n(470)](r)}try{t[n(415)][i[n(382)]]=i[n(564)],t[n(707)][n(782)](n(722))}catch(r){t[n(707)].fatal(r)}})},M.prototype.tryRegisterForBidWon=function(t){var e=u;t[e(303)][e(810)][e(484)](e(708),function(i){var n=e;t[n(637)](i,t)})},M[u(640)].tryRegisterIds=function(t){var e=u;if(t!==void 0)try{var i={name:e(563),params:{eidsFunction:t[e(785)][e(802)](null,t)}},n=t.intentIqConfig[e(810)][e(768)](e(619));t[e(707)].info("Registering PubProvided callback "),n?t.intentIqConfig[e(509)]?(t[e(707)][e(782)]("Configured to set before others pubprovided"),n.unshift(i),t[e(303)][e(810)].setConfig({userSync:{userIds:n}})):n[e(324)](i):t[e(303)].pbjs[e(457)]({userSync:{userIds:[i]}}),t[e(303)][e(326)]&&t[e(303)][e(716)][e(703)]!==null?(i=t[e(587)](t[e(303)][e(716)][e(703)]),(n=t[e(303)].pbjs[e(768)](e(619)))&&Array.isArray(n)?((n.filter(function(r){var a=e;return a(662)===r[a(638)]})[e(677)]!==0||t[e(303)][e(810)][e(407)]()&&t.intentIqConfig[e(810)][e(407)]()[e(410)])&&!t.intentIqConfig[e(323)]||(t[e(707)].info("Unshifting configuration for unifyedIds"),n[e(377)](i)),t[e(303)][e(810)][e(457)]({userSync:{userIds:n}})):t[e(303)][e(810)][e(457)]({userSync:{userIds:[i]}}),t.intentIqConfig[e(810)].refreshUserIds()):t[e(303)][e(810)][e(532)]()}catch{t.logger[e(779)](e(585))}},M[u(640)][u(587)]=function(t){return{name:"unifiedId",value:{tdid:t}}},M.prototype[u(388)]=function(t,e){var i=0;return t.id>e.id&&(i=-1),i=t.id<e.id?1:i};var me;const On={};function us(t,e){return new hs(t,e)}const fs=function(t){this.floor=t,this.getFloor=function(){return this.floor}};class hs{constructor(e,i,n="//serv-selectmedia.com/cdn/player/prebid/8_45_1/prebid.js"){l(this,"window");l(this,"status");l(this,"key");l(this,"logger");l(this,"singleRun");l(this,"eventManager");l(this,"macroManager");l(this,"eventStore");l(this,"startTime",performance.now());l(this,"startTimeEvent",!1);l(this,"startLoadJsTime",0);l(this,"configManager");l(this,"ppidMappingsProvider");l(this,"initIntentIqObject",!1);l(this,"smDebug",!1);l(this,"intentIq_1360625294");l(this,"startLoadTime",()=>{this.startLoadJsTime=performance.now()});l(this,"intentiqImpr",e=>{try{if((this.configManager.config.enableIntentIQ||this.configManager.isDebug)&&this.key=="0"){const i={biddingPlatformId:1,partnerAuctionId:"xxxxxxxx-xxxxxx-xxxxxx",bidderCode:e.bid.bidderCode,prebidAuctionId:"xxxxxxxx-xxxxxx-xxxxxx",cpm:e.cpm,currency:"USD",originalCpm:e.floorPrice,originalCurrency:"USD",status:"rendered",placementId:e.bid.adUnitCode};this.intentIq_1360625294.reportExternalWin(i),this.configManager.isDebug&&console.log("intentIq_1360625294 reportData",i)}}catch(i){console.log("error",i),P.error("intentiq_impr_error_2",i,{})}});l(this,"init",async(e,i,n,r,a,s,o)=>(this.eventManager=r,this.macroManager=a,this.configManager=s,this.ppidMappingsProvider=o,new Promise(async(c,d)=>{this.status="init",this.key=n,this.window=e.contentWindow;const y=document.createElement("script");e.contentWindow.document.getElementsByTagName("head")[0].appendChild(y);try{e.contentWindow.__tcfapi=top.__tcfapi,e.contentWindow.__uspapi=top.__uspapi}catch{}if(this.configManager.config.safeFrame,this.key=="0"){const f=await fetch(this.url);let p;f.ok&&(p=await f.text());const x=document.createElement("script");x.text=p,e.contentWindow.document.getElementsByTagName("head")[0].appendChild(x),this.status="ready";return}this.status="error"})));l(this,"waitForStatus",e=>new Promise(async(i,n)=>{try{if(this.status=="error"){i(!1);return}if(e===this.status){i(!0);return}i(!1)}catch{this.status="error",i(!1)}}));l(this,"prebidValid",()=>new Promise(async(e,i)=>{if(!await this.waitForStatus("ready")){e(!1);return}try{if(!this.window.pbjs||!this.window.pbjs.setConfig){e(!1);return}}catch{e(!1);return}if(this.initIntentIqObject==!1&&(this.initIntentIqObject=!0,(this.configManager.config.enableIntentIQ||this.configManager.isDebug)&&this.key=="0")){const r=a=>{this.smDebug&&console.log("iiqCallbackMethod",a)};this.intentIq_1360625294=new M({partner:1360625294,pbjs:this.window.pbjs,callback:r,timeoutInMillis:2e3,ABTestingConfigurationSource:"percentage",abPercentage:50,manualWinReportEnabled:!0,domainName:this.configManager.domain,browserBlackList:"Chrome"}),this.configManager.isDebug&&console.log("intentIq_1360625294 init",this.intentIq_1360625294)}e(!0)}));l(this,"getTcData",async()=>new Promise(async(e,i)=>{if(this.configManager.config.ignoreGFPR){e(new wt(!1,null,null));return}try{this.window.__tcfapi("getTCData",2,(n,r)=>{e(new wt(r,n,null))},[775,10,755,32,241,76,52,102,45,285,28,793,13,91,69])}catch(n){e(new wt(null,null,n))}}));l(this,"getAds",(e,i,n,r,a,s,o)=>new Promise(async(c,d)=>{try{let f=function(h){};const p=e.bids.map(h=>h.bidder.toLowerCase()),x=[...new Set(p)];for(let h=0;h<x.length;h++)kn.has(x[h])&&kn.get(x[h])();const E=new Date;await this.waitForStatus("ready")==!1&&(this.logger.Error("Error",null),c([]));const q=new Date;for(var y=0;y<e.bids.length;y++){e.bids[y].params.outstream_function=f;const h=new fs(s);e.bids[y].getFloor=function(S){return S.floor=h.getFloor(),S},e.bids[y].params.getFloor=function(S){return S.floor=h.getFloor(),S}}me=this.window.pbjs||{};let C={yahoossp:{mode:"video"},renderer:{url:"example.com/publishersCustomRenderer.js",render:function(h){h&&P.error("bids_render",null,{bids:h})}},debug:n,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{aliasSyncEnabled:!0,syncDelay:5e3,userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=v5zyp9g&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"sharedId",params:{pixelUrl:"/wp-json/pubcid/v1/extend/"},storage:{type:"cookie",name:"_sharedid",expires:180}},{name:"id5Id",params:{partner:755},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:8*3600}},{name:"hadronId",storage:{name:"hadronId",type:"html5"},params:{partnerId:539}},{name:"pubProvidedId",params:{eidsFunction:()=>this.ppidMappingsProvider?this.ppidMappingsProvider.loadIds():[]}}],filterSettings:{all:{bidders:"*",filter:"include"}}},schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"selectmedia.asia",sid:a,hp:1}]}}},m=[];const W=this.configManager.config.ignoreNotLexicon,g=this.configManager.config.ignoreLexicon,w=["unifiedId","sharedId","id5Id","hadronId"];for(let h=0;h<C.userSync.userIds.length;h++){let S=C.userSync.userIds[h];g&&S.name=="pubProvidedId"||W&&w.includes(S.name)||m.push(S)}C.userSync.userIds=m,o.advertiserEnableSellerIdOverride&&(C.schain.config.nodes[0].asi=o.advertiserSellerDomainOverride,C.schain.config.nodes[0].sid=o.advertiserSellerIdOverride,C.schain.config.nodes[0].hp=o.advertiserSellerHP1Override),e.bids[0].bidder=="colossusssp"&&delete C.userSync;let b={};if(this.window.__tcfapi){if(!this.configManager.config.ignoreGFPR){const h={cmpApi:"iab",timeout:8e3,defaultGdprScope:!1},S={timeout:8e3};b.gdpr=h,b.usp=S}if(this.configManager.config.useGpp){const h={cmpApi:"iab",timeout:2e3};b.gpp=h}}this.window.__tcfapi&&(this.configManager.config.useGpp||!this.configManager.config.ignoreGFPR)&&(C.consentManagement=b);const A=["onetag","colossus-ssp","colossusssp","openx","yahoossp","adform","triplelift","freewheel-ssp","freewheelssp"];C.floors={currency:"USD",default:i.cpm},me.setConfig(C),me.bidderSettings={triplelift:{storageAllowed:!0}};let I=function(h){me.onEvent(h,S=>{const V=JSON.stringify(S);(V.includes("freewheel")||V.includes("triplelift"))&&(delete S.vastXml,delete S.ad,P.error("1frwLog_"+h,null,{event:S,eventName:h}))})};try{const h=me.getEvents();if(this.singleRun==!1){this.singleRun=!0;for(let S=0;S<h.length;S++)try{if(h[S].eventType==="auctionDebug"||h[S].eventType==="beforeRequestBids")continue}catch(V){P.error("pbjsEvent",V,{})}}}catch(h){P.error("prebid_event_error",h,{})}e.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":s}};try{me.que=me.que||[],me.que.push(()=>{me.removeAdUnit(),me.addAdUnits(e),me.requestBids({timeout:r,bidsBackHandler:h=>{try{if(hi(h)&&(h=me.getBidResponses(e.code)),h&&h.video1&&h.video1.bids){h.video1.bids.length>1&&P.error("prebid_2_test_bids_length",null,{length:h.video1.bids.length});try{const V=JSON.stringify(h);if(h.video1.bids[0].originalCpm<i.cpm||h.video1.bids[0].cpm==0||h.video1.bids[0].statusMessage=="Bid returned empty or error response"){const K=JSON.parse(JSON.stringify(h));K.video1.bids[0].vastUrl=null,K.video1.bids[0].metrics=null,c([]);return}h.length>1&&P.error("prebid_2_test_bids_length_2",null,{length:h.length})}catch{}i.cpm=h.video1.bids[0].originalCpm||s,h.video1.bids[0].cpm=h.video1.bids[0].originalCpm||s,this.eventManager.DispatchEvent(O.Bid,i),h.video1.bids[0].cpm<i.cpm&&P.error("invalid_cpm_2",null,{bids:h,adUnit:i});const S=h.video1.bids[0];for(let V=0;V<ht.length;V++)if(S[ht[V]]){h.video1.bids[0].vast=S[ht[V]];try{h.video1.bids[0].vast.indexOf("http:")!==-1&&location.protocol==="https:"&&(h.video1.bids[0].vast=h.video1.bids[0].vast.replace("/http:/g","https:")),h.video1.bids[0].vast.indexOf("http:")===-1&&location.protocol==="http:"&&(h.video1.bids[0].vast=h.video1.bids[0].vast.replace("/https:/g","http:"))}catch(K){P.error("prebid_2_test_err",K,{vastFields:ht,c:V,protocol:location.protocol})}c(h);return}!h.video1.bids[0].vast&&!h.video1.bids[0].vastUrl&&P.error("no bid vast ad",null,{bids:h});try{h.video1.bids[0].vastUrl.indexOf("http:")!==-1&&location.protocol==="https:"&&(h.video1.bids[0].vastUrl=h.video1.bids[0].vastUrl.replace("/http:/g","https:")),h.video1.bids[0].vastUrl.indexOf("http:")===-1&&location.protocol==="http:"&&(h.video1.bids[0].vastUrl=h.video1.bids[0].vastUrl.replace("/https:/g","http:"))}catch{P.error("prebid_10_test_err",null,{protocol:location.protocol,bids:h,vastUrl:h.video1.bids[0].vastUrl})}c(h);return}else if(!hi(h))P.error("bids_2_else",null,{bids:h});else{let S=me.getBidResponses(e.code);hi(S)||P.error("not_empty_bidResponses",null,{bids:h,bidResponses:S,adUnits:e})}c([]);return}catch(S){let V=me.getBidResponses(e.code);P.error("error-bids",S,{bids:V}),c([]);return}}})})}catch(h){P.error("prebid_event_error",h,{}),c([])}}catch{c([])}}));l(this,"getAdsV2",(e,i,n,r)=>new Promise(async(a,s)=>{try{let c=function(g){};e=JSON.parse(JSON.stringify(e)),e=wr(e);const d=[],y={};for(let g=0;g<e.length;g++){const w=e[g],b=Le(w,r),A=Ke(w);y[A]==null&&(d.push({bidders:[A],config:{schain:b}}),y[A]=A)}const f={},p=ps(5);for(let g=0;g<e.length;g++){const w=e[g].ad,b=e[g].code+"_"+p+g;e[g].code=b,f[b]=w,delete e[g].ad}await this.waitForStatus("ready")==!1&&(this.logger.Error("Error",null),a([]));for(let g=0;g<e.length;g++)for(var o=0;o<e[g].bids.length;o++)e[g].bids[o].params.outstream_function=c;me=this.window.pbjs||{};let E={yahoossp:{mode:"video"},renderer:{url:"example.com/publishersCustomRenderer.js",render:function(g){g&&P.error("bids_render",null,{bids:g})}},debug:i,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{aliasSyncEnabled:!0,syncDelay:5e3,userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=v5zyp9g&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"sharedId",params:{pixelUrl:"/wp-json/pubcid/v1/extend/"},storage:{type:"cookie",name:"_sharedid",expires:180}},{name:"id5Id",params:{partner:755},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:8*3600}},{name:"hadronId",storage:{name:"hadronId",type:"html5"},params:{partnerId:539}},{name:"pubProvidedId",params:{eidsFunction:()=>this.ppidMappingsProvider?this.ppidMappingsProvider.loadIds():[]}}],filterSettings:{all:{bidders:"*",filter:"include"}}}},v=[];const q=this.configManager.config.ignoreNotLexicon,C=this.configManager.config.ignoreLexicon,m=["unifiedId","sharedId","id5Id","hadronId"];for(let g=0;g<E.userSync.userIds.length;g++){let w=E.userSync.userIds[g];C&&w.name=="pubProvidedId"||q&&m.includes(w.name)||v.push(w)}E.userSync.userIds=v;let W={};if(this.window.__tcfapi){if(!this.configManager.config.ignoreGFPR){const g={cmpApi:"iab",timeout:8e3,defaultGdprScope:!1},w={timeout:8e3};W.gdpr=g,W.usp=w}if(this.configManager.config.useGpp){const g={cmpApi:"iab",timeout:2e3};W.gpp=g}}this.window.__tcfapi&&(this.configManager.config.useGpp||!this.configManager.config.ignoreGFPR)&&(E.consentManagement=W),E.floors={},me.setConfig(E),me.bidderSettings={triplelift:{storageAllowed:!0}};for(let g=0;g<e.length;g++){const w=f[e[g].code];e[g].floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"*|*":w.floorPrice}}}for(let g=0;g<d.length;g++){const w=d[g];me.setBidderConfig(w)}try{me.que=me.que||[],me.que.push(()=>{me.removeAdUnit();for(let g=0;g<e.length;g++)me.addAdUnits(e[g]);me.requestBids({timeout:n,bidsBackHandler:g=>{try{hi(g)&&(g=me.getBidResponses());for(const w in g)if(g.hasOwnProperty(w)){const b=f[w];try{if(g[w].bids[0].originalCpm<b.floorPrice)continue}catch(h){P.error("freewheel-info-err",h,{adUnit:b})}const A=b.floorPrice;b.cpm=g[w].bids[0].originalCpm||A,g[w].ad=b,g[w].bids[0].cpm=g[w].bids[0].originalCpm||A,this.eventManager.DispatchEvent(O.Bid,b);const I=g[w].bids[0];for(let h=0;h<ht.length;h++)if(I[ht[h]]){g[w].bids[0].vast=I[ht[h]];try{g[w].bids[0].vast.indexOf("http:")!==-1&&location.protocol==="https:"&&(g[w].bids[0].vast=g[w].bids[0].vast.replace("/http:/g","https:")),g[w].bids[0].vast.indexOf("http:")===-1&&location.protocol==="http:"&&(g[w].bids[0].vast=g[w].bids[0].vast.replace("/https:/g","http:"))}catch(S){P.error("prebid_2_test_err",S,{vastFields:ht,c:h,protocol:location.protocol})}}!g[w].bids[0].vast&&!g[w].bids[0].vastUrl&&P.error("no bid vast ad",null,{bids:g});try{g[w].bids[0].vastUrl!=null&&g[w].bids[0].vastUrl.indexOf("http:")!==-1&&location.protocol==="https:"&&(g[w].bids[0].vastUrl=g[w].bids[0].vastUrl.replace("/http:/g","https:")),g[w].bids[0].vastUrl!=null&&g[w].bids[0].vastUrl.indexOf("http:")===-1&&location.protocol==="http:"&&(g[w].bids[0].vastUrl=g[w].bids[0].vastUrl.replace("/https:/g","http:"))}catch{P.error("prebid_10_test_err",null,{protocol:location.protocol,bids:g,vastUrl:g[w].bids[0].vastUrl})}}a(g);return}catch(w){g={},P.error("error-bids",w,{bids:g}),a([]);return}}})})}catch(g){P.error("prebid_event_error",g,{}),a([])}}catch{a([])}}));l(this,"getAmpAds",(e,i,n,r,a,s,o)=>new Promise(async(c,d)=>{try{let y=this.window.apstag;if(y==null){c({});return}y.init({pubID:e.pubId});const f=gs();let p=this.macroManager.getPlayerSize();if(this.configManager.config.isAmazonSizeRange){const v=this.macroManager.getPlayerSize();v.width<=320?(v.width=300,v.height=250):v.width>640?(v.width=640,v.height=480):Math.random()<.5?(v.width=400,v.height=300):Math.random()<.5?(v.width=300,v.height=250):(v.width=640,v.height=480),p.width=v.width,p.height=v.height}const x={slotID:e.slotId,slotName:e.slotId,sizes:[[p.width,p.height]],mediaType:"video"};s>0?x.floor={value:Math.round(s*100),currency:"USD"}:P.error("amazon_no_cpm",null,{amazonVideoAdUnit:e,cpm:s}),this.eventStore.set(new qe(D.REQUEST,null,i.adSourceKey,o,i));let E={timeout:8e3,slots:[x]};y.fetchBids(E,v=>{try{if(v&&v[0]&&v[0].amznbid!==""){const q=v[0].amznbid;let m=`//aax.amazon-adsystem.com/e/dtb/vast?b=${v[0].amzniid}&rnd=${new Date().getTime()}&pp=${q}`;i.cpm=s;const W=v[0].amznbid;if(W==="testBid"){this.logger.Error("testBid",null),c({});return}e.pubId=="00ed17ab-4189-4639-9d5e-15acd40affde",this.eventManager.DispatchEvent(O.Bid,i),v[0].cpm=s,v[0].vastTagURL=m,v[0].amazonVideoAdUnit=e,c(Ki(Ft({},v[0]),{vastUrl:m,amznbId:W}));return}c({})}catch(q){P.error("getAmpAds_bids",q,{bids:v}),c({})}})}catch{performance.now()-this.startTime,c({})}}));l(this,"amazonValid",()=>new Promise(async(e,i)=>{try{let n=this.window.apstag;if(!n||!n.init){let r=performance.now()-this.startTime;r/=1e3,r>10,e(!1);return}}catch{performance.now()-this.startTime,e(!1);return}e(!0)}));this.url=n,this.status="new",this.logger=e,this.singleRun=!1,this.eventStore=i}}const ht=["vastXml","adm"];function gs(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(i==="x"?n:n&3|8).toString(16)})}function hi(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function ps(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let n=0;n<t;n++){const r=Math.floor(Math.random()*e.length);i+=e.charAt(r)}return i}var gi=(t=>(t[t.APP_LOADING=0]="APP_LOADING",t[t.IDLE=1]="IDLE",t[t.PLAY=2]="PLAY",t[t.SKIP=3]="SKIP",t[t.WAITING=4]="WAITING",t[t.PLAY_AD=5]="PLAY_AD",t[t.PAUSE_PLAY_AD=6]="PAUSE_PLAY_AD",t[t.PLAYING=7]="PLAYING",t[t.LOAD_WATERFALL=8]="LOAD_WATERFALL",t[t.WATERFALL_LOADED=9]="WATERFALL_LOADED",t[t.WATERFALL_DONE=10]="WATERFALL_DONE",t))(gi||{});class _t{constructor(e){l(this,"appState");l(this,"getAppStore",()=>this.appState);l(this,"setState",e=>{this.appState.set(e)});this.appState=e}}l(_t,"KEY",{});const xs=t=>new Promise(e=>setTimeout(e,t));class et{constructor(e){this.status=e}}class ms{constructor(e,i,n,r){this.stop=e,this.playAdsManagerLoaded=i,this.pauseAd=n,this.resumeAd=r}}class gt{constructor(e,i,n,r){this.isPlaying=e,this.playingIndex=i,this.activeVastMode=n,this.duration=r}}class ys{constructor(e,i,n,r,a){l(this,"iMAManagerStore");l(this,"state");l(this,"workers",[]);l(this,"adsManagers");l(this,"totalWorkers");l(this,"waiting");l(this,"selectedAdManager");l(this,"selectedId");l(this,"duration");l(this,"nowPlayingFrameStore");l(this,"isEligibleToPlayStore");l(this,"activeVastMode");l(this,"duplicateImpression",new Map);l(this,"events",[]);l(this,"timeOutForImpressionTimeout");l(this,"isSingleAds",!1);l(this,"isSingleAdsPlaying",!1);l(this,"configManager");l(this,"init",async()=>{this.iMAManagerStore.subscribe(this.subscribeIMA),await this.run(),this.state.set("load")});l(this,"subscribeIMA",e=>{if(e==null)return;const i=parseInt(e.id);switch(this.events.push(e.adEvent),e.adEvent){case D.IMPRESSION:clearTimeout(this.timeOutForImpressionTimeout);break;case D.ALL_ADS_COMPLETED:this.adsManagers[i].stop(),this.isSingleAdsPlaying=!0,this.state.set("done");break;case D.SKIPPED:break;case D.LOADED:if(this.events.push({adEvent:e.adEvent,imaVastModel:e.imaManager.getVastModel().imaVastModel}),this.activeVastMode=e.imaManager.getActiveVastModel(),this.configManager.config.adDuration!=0&&this.configManager.config.adDuration<=e.data.getAd().getDuration()){this.adsManagers[i].stop(),this.workers[i]=new et("adsError"),clearTimeout(this.timeOutForImpressionTimeout),this.state.set("done");return}if(this.isSingleAds){this.duplicateImpression.set(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED,!0),this.duration=e.duration,this.workers[i]=new et("readyToPlay"),this.selectedAdManager=this.adsManagers[i],this.selectedId=i,this.nowPlayingFrameStore.set(e.id),this.state.set("playing"),this.timeOutForImpression(e.imaManager.getActiveVastModel());return}for(let n=0;n<this.workers.length;n++){if(i==n){if(this.duplicateImpression.has(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED)){this.adsManagers[n].stop(),this.workers[n].status="free";continue}this.duplicateImpression.set(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED,!0),this.duration=e.duration,this.workers[i]=new et("readyToPlay"),this.selectedAdManager=this.adsManagers[i],this.selectedId=i,this.nowPlayingFrameStore.set(e.id)}else this.workers[n].status=="tryAds"&&(this.adsManagers[n].stop(),this.workers[n].status="free");this.state.set("playing")}this.timeOutForImpression(e.imaManager.getActiveVastModel());break;case D.AD_ERROR:if(this.isSingleAds){this.adsManagers[i].stop(),this.workers[i]=new et("adsError"),clearTimeout(this.timeOutForImpressionTimeout),this.state.set("done");return}this.adsManagers[i].stop(),this.workers[i]=new et("adsError");for(let n=0;n<this.workers.length;n++)if(this.workers[n].status=="tryAds")return;clearTimeout(this.timeOutForImpressionTimeout),this.state.set("done");break;case D.VAST_ERROR:P.reportError("VAST_ERROR_"+e.data.errorCode,this.configManager.config.publisherId,this.configManager.config.channelId,this.configManager.config.tagId,this.configManager.config.templateId,encodeURIComponent(JSON.stringify(e.data)));break}});l(this,"run",async()=>{this.state.subscribe(async e=>{})});l(this,"runAds",async e=>(this.isSingleAds=!1,this.waiting=!0,this.activeVastMode=null,this.selectedAdManager=null,new Promise(async(i,n)=>{try{this.nowPlayingFrameStore.set("-1");for(let s=0;s<this.adsManagers.length;s++)this.workers[s]=new et("free");this.state.set("load"),await Ss(e,this.workers,this.adsManagers,this.nowPlayingFrameStore);let r=null;switch(j(this.state)){case"done":i(new gt(!1,-1,0));return;case"playing":i(new gt(!0,parseInt(j(this.nowPlayingFrameStore)),this.activeVastMode,this.duration));return}r=this.state.subscribe(async s=>{switch(s){case"done":try{await Mt(),r()}catch{}i(new gt(!1,-1,0));break;case"playing":try{await Mt(),r()}catch{}i(new gt(!0,parseInt(j(this.nowPlayingFrameStore)),this.activeVastMode,this.duration));break}})}catch(r){P.error("runAds",r)}})));l(this,"runSingleAds",async(e,i)=>(this.isSingleAds=!0,this.isSingleAdsPlaying=!1,this.waiting=!0,this.activeVastMode=null,this.selectedAdManager=null,new Promise(async(n,r)=>{try{this.state.set("load"),this.nowPlayingFrameStore.set("-1");const a=parseInt(e.id);this.adsManagers[a].playAdsManagerLoaded(e.data);let s;switch(j(this.state)){case"done":this.adsManagers[a].stop(),this.workers[a]=new et("free"),n(new gt(this.isSingleAdsPlaying,-1,0));return}s=this.state.subscribe(async c=>{switch(c){case"done":try{this.adsManagers[a].stop(),this.workers[a]=new et("free"),await Mt(),s()}catch{}n(new gt(this.isSingleAdsPlaying,-1,0));break}})}catch(a){P.error("runAds",a)}})));l(this,"waitForAdsToComplete",async()=>new Promise(async(e,i)=>{let n;try{switch(j(this.state)){case"done":this.state.set("load"),e(new gt(!1,-1,0));return}n=this.state.subscribe(async a=>{switch(a){case"done":try{n!=null&&n()}catch{}this.state.set("load"),e(new gt(!1,-1,0));break}})}catch(r){P.error("waitForAdsToComplete",r,{})}}));l(this,"resume",async()=>new Promise(async(e,i)=>{try{this.selectedAdManager&&this.selectedAdManager.resumeAd()}catch(n){P.error("waitForAdsToComplete",n,{})}}));l(this,"cleanAll",async()=>new Promise(async(e,i)=>{try{this.state.set("done");for(let n=0;n<this.adsManagers.length;n++)this.adsManagers[n].stop(),this.workers[n]=new et("free");e(null)}catch(n){P.error("cleanAll",n,{})}}));l(this,"stopPlaying",async()=>new Promise(async(e,i)=>{try{this.adsManagers[this.selectedId].stop(),this.workers[this.selectedId].status="free",this.state.set("load"),e("")}catch(n){P.error("stopPlaying",n,{})}}));l(this,"timeOutForImpression",e=>{this.timeOutForImpressionTimeout=setTimeout(()=>{try{clearTimeout(this.timeOutForImpressionTimeout),this.adsManagers[this.selectedId].stop(),this.workers[this.selectedId]=new et("adsError");for(let i=0;i<this.workers.length;i++)if(this.workers[i].status=="tryAds")return;this.state.set("done")}catch(i){P.error("timeOutForImpression_err",i,{selectedId:this.selectedId})}},8e3)});this.iMAManagerStore=e,this.adsManagers=i,this.totalWorkers=i.length,this.state=re("init"),this.waiting=!1,this.activeVastMode=null,this.nowPlayingFrameStore=n,this.isEligibleToPlayStore=r,this.configManager=a;for(let s=0;s<this.totalWorkers;s++)this.workers[s]=new et("free")}}function As(t,e){return t.enableVidSplay&&!e.enableVidSplay?-1:!t.enableVidSplay&&e.enableVidSplay?1:t.key.type===le.IMA&&e.key.type!==le.IMA?-1:t.key.type!==le.IMA&&e.key.type===le.IMA||t.key.cpm<e.key.cpm?1:t.key.cpm>e.key.cpm?-1:0}async function Ss(t,e,i,n){for(let r=0;r<t.eventsData.length;r++)try{const s=t.eventsData[r].key.adSourceKey,o=t.adSourceKey[s];t.eventsData[r].enableVidSplay=o.enableVidSplay}catch(a){P.error("enableVidSplay",a,{adSourceKey:t.eventsData[r].key.adSourceKey,adSourceKeys:t.adSourceKey})}t.eventsData.sort(As);for(let r=0;r<t.eventsData.length;r++){const a=t.eventsData[r],s=parseInt(a.id);e[s]=new et("tryAds")}for(let r=0;r<t.eventsData.length;r++){const a=t.eventsData[r],s=parseInt(a.id);if(j(n)!="-1"||(i[s].playAdsManagerLoaded(a.data),j(n)!="-1")||t.eventsData.length==1)break;(r==0||r==1)&&await xs(50)}}const vs={"[SM_URL]":"url","[SM_DOMAIN]":"domain","[SM_CONSENT]":"consent","[SM_GDPR]":"gdpr","[AV_WIDTH]":"width","[AV_HEIGHT]":"height","[AV_URL]":"url","[AV_DOMAIN]":"domain","[AV_CONSENT]":"consent","[AV_GDPR]":"gdpr"};function bs(t){let e={};for(const[i,n]of Object.entries(vs))e[i]=String(t[n]),(i=="[AV_URL]"||i=="[SM_URL]")&&(e[i]=encodeURIComponent(String(t[n])));return e}function pi(t,e,i,n,r,a,s,o,c,d){if(t==null)return"";i==null&&(i=0);const y=Object.assign(bs(e),{"[SM_CPM]":i.toString(),"[SM_RANDOM]":String(Date.now()),"[AV_CPM]":i.toString(),"[AV_RANDOM]":String(Date.now()),"[AV_WIDTH]":n.toString(),"[AV_HEIGHT]":r.toString(),"[SM_WIDTH]":n.toString(),"[SM_HEIGHT]":r.toString(),"[AV_SCHAIN]":`1.0,1!selectmedia.asia,${a.toString()},1,,,`,"[SM_SCHAIN]":`1.0,1!selectmedia.asia,${a.toString()},1,,,`,"[AV_GDPR]":o,"[SM_GDPR]":o,"[AV_CONSENT]":c,"[SM_CONSENT]":c,"[SM_SELLERID_ID]":s.advertiserSellerIdOverride,"[AM_SELLERID_ID]":s.advertiserSellerIdOverride});s.advertiserEnableSellerIdOverride&&(y["[AV_SCHAIN]"]=s.advertiserSellerIdOverride,y["[SM_SCHAIN]"]=s.advertiserSellerIdOverride);for(let f in e.tagMacro)e.tagMacro.hasOwnProperty(f)&&(y["["+f+"]"]=e.tagMacro[f]);for(const[f,p]of Object.entries(y))typeof p=="string"?t=t.split(f).join(p):t=t.split(f).join(p+"");return t}const Ln={};class ws{constructor(e,i,n){l(this,"requestSize");l(this,"configManager");l(this,"viewAbility");this.configManager=e,i.subscribe(r=>{this.requestSize=r}),n.subscribe(r=>{this.viewAbility=r})}replaceAdSourceMacro(e){let i=this.requestSize;this.configManager.config.isFloating&&!this.viewAbility.viewAbility&&(i.width=this.configManager.config.floatingWidth,i.height=this.configManager.config.floatingHeight);let n="",r=0;this.configManager.gdpr!=null&&(r=this.configManager.gdpr.success?1:0,r&&(n=this.configManager.gdpr.tcData.tcString)),e.enableSelectedAdsSourceSize?(e.url=pi(e.url,this.configManager.config,e.floorPrice,e.selectedAdsSourceSize.width,e.selectedAdsSourceSize.height,this.configManager.config.schain,e,r,n),e.prebidJson=pi(e.prebidJson,this.configManager.config,e.floorPrice,e.selectedAdsSourceSize.width,e.selectedAdsSourceSize.height,this.configManager.config.schain,e,r,n)):(e.url=pi(e.url,this.configManager.config,e.floorPrice,i.width,i.height,this.configManager.config.schain,e,r,n),e.prebidJson=pi(e.prebidJson,this.configManager.config,e.floorPrice,i.width,i.height,this.configManager.config.schain,e,r,n));try{if(this.configManager.config.macroAdvertiserVasts&&this.configManager.config.macroAdvertiserVasts.length>0){const a=this.configManager.config.macroAdvertiserVasts;for(let s=0;s<a.length;s++){const o=a[s];if(!(o.advertiserID!=e.advertiserId&&o.advertiserID!="all")){if(o.macroTypeID=="1"){e.url=Is(e.url,o.source,o.destination);continue}e.url=e.url.split(o.source).join(o.destination)}}}}catch(a){P.error("urlEndPointParamMacros_error",a,{ad:e})}return e}getPlayerSize(){let e=JSON.parse(JSON.stringify(this.requestSize));return this.configManager.config.isFloating&&!this.viewAbility.viewAbility&&(e.width=this.configManager.config.floatingWidth,e.height=this.configManager.config.floatingHeight),e}}function Is(t,e,i){const n=new RegExp("([?&])"+e+"=.*?(&|$)","i"),r=t.indexOf("?")!==-1?"&":"?";return t.match(n)?t.replace(n,"$1"+e+"="+i+"$2"):t+r+e+"="+i}var La=(()=>`.hidden.svelte-17qie27{display:none}.ad-manager-container.svelte-17qie27{position:absolute;top:0;left:0;bottom:0;right:0;background-color:#000;z-index:1;overflow:hidden}.ad-manager-frame.svelte-17qie27{position:absolute;border:none;top:0;left:0;bottom:0;right:0}
`)();function qn(t,e,i){const n=t.slice();return n[4]=e[i],n[23]=e,n[24]=i,n}function zn(t){let e,i,n,r=t[23],a=t[24];const s=()=>t[6](e,r,a),o=()=>t[6](null,r,a);return{c(){e=G("iframe"),L(e,"class",i="ad-manager-frame "+(t[2]!==t[24].toString()?"hidden":"")+" svelte-17qie27"),L(e,"id",n="frame_"+t[24]),L(e,"width","100%"),L(e,"height","100%")},m(c,d){ke(c,e,d),s()},p(c,d){t=c,d&4&&i!==(i="ad-manager-frame "+(t[2]!==t[24].toString()?"hidden":"")+" svelte-17qie27")&&L(e,"class",i),(r!==t[23]||a!==t[24])&&(o(),r=t[23],a=t[24],s())},d(c){c&&Pe(e),o()}}}function Ms(t){let e,i,n,r,a={};i=new as({props:a}),t[5](i);let s=t[0],o=[];for(let c=0;c<s.length;c+=1)o[c]=zn(qn(t,s,c));return{c(){e=G("div"),Ce(i.$$.fragment),n=ue();for(let c=0;c<o.length;c+=1)o[c].c();L(e,"id",Ps),L(e,"class","ad-manager-container svelte-17qie27")},m(c,d){ke(c,e,d),Ee(i,e,null),N(e,n);for(let y=0;y<o.length;y+=1)o[y].m(e,null);r=!0},p(c,[d]){const y={};if(i.$set(y),d&5){s=c[0];let f;for(f=0;f<s.length;f+=1){const p=qn(c,s,f);o[f]?o[f].p(p,d):(o[f]=zn(p),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}},i(c){r||(B(i.$$.fragment,c),r=!0)},o(c){H(i.$$.fragment,c),r=!1},d(c){c&&Pe(e),t[5](null),De(i),hr(o,c)}}}let Ps="adsid";function Es(t){const e=document.getElementById(t);return!!(e&&e.contentDocument==null)}function Ds(t,e,i){let n;const r=R(Be.KEY);let a=r.config.iframeWorkers,s=[];const o=re("-1");Ne(t,o,h=>i(2,n=h));let c;Z(Qr,o);const d=R(Dt),y=R(_t.KEY),f=R(bn),p=R(st.KEY),x=R($e),E=R(Ei),v=R(Ln);let q=[];for(let h=0;h<a;h++)s[h]=null;const C=R(On),m=R(Dt),W=R(cn),g=R(ft),w=R(kt.KEY),b=R(ei);dt(()=>{let h=!1,S=document,V=window;try{S=top.document,V=top.window}catch{S=document,V=window}r.config.safeFrame&&(V=window,S=document);const K=vr(S,"//cdn-ima.33across.com/ppid.js"),z=Sr("//imasdk.googleapis.com/js/sdkloader/ima3.js"),U=[K,z];Promise.all(U).then(()=>{const ee=new V._33AcrossPpidMappingsProvider({pid:"0010b00002XdL4EAAV"});r.debugStep.AdsManager_onMount=performance.now();const J=performance.now();let Y=[];const fe="//c.amazon-adsystem.com/aax2/apstag.js",T="//c.amazon-adsystem.com/aax2/apstag.js";for(let Q=0;Q<s.length;Q++){const ae=function(ye,Me){return new Promise(async(Qe,tt)=>{ye.onerror=Je=>{P.error("onerror",null,{startUpTime:r.startUpTime,onMountT:J,amzUrl:Me==0?fe:T,keyId:Me+""})},ye.onload=Je=>{try{const it=new Kr({target:Je.target.contentWindow.document.body,props:{ppidMappingsProvider:ee,skipAmazon:r.config.amazonWorkerLimit==-1?!1:!(Me<r.config.amazonWorkerApi),amzUrl:Me==0?fe:T,macroManager:v,eventManager:g,store:m,prebidManagerNewFunc:C,iMAManagerNewFunc:W,keyId:Me+"",logger:p,iframe:ye,playerSizeStore:x,isEligibleToPlayStore:E,prebidScriptUrl:r.config.prebidScriptUrl,configManager:r,googleLimitManager:w}});q[Me]=it,Qe()}catch{tt()}},ye.src="about:blank"})}(s[Q],Q);Y.push(ae)}r.debugStep.before_Promise=performance.now(),Promise.all(Y).then(Q=>{const ae=[];for(let he=0;he<a;he++){const we=q[he];ae[he]=new Jr(we.runPreBid,we.playVast,we.runAmazonBid,we.prebidValid,we.imaValid,we.amazonValid)}const ye=new Yr(r,d,ae,f,r.config.unlimitedWaterfallRuns,r.config.errorLimit,g,p),Me=[];for(let he=0;he<a;he++){const we=q[he];Me[he]=new ms(we.stop,we.playAdsManagerLoaded,we.pauseAd,we.resumeAd)}const Qe=new ys(d,Me,o,E,r),tt=ye.init(),Je=Qe.init();performance.now(),Promise.all([tt,Je]).then(he=>{performance.now(),r.debugStep.all_loaded=performance.now(),c.init(d,q,ye,Qe),y.setState(gi.LOAD_WATERFALL)});const it=setInterval(()=>{try{for(let he=0;he<s.length;he++)if(Es("frame_"+he)&&q[he].getAdSourceKey()!=""){let we={},nt="";try{we.AdSourceKey=atob(q[he].getAdSourceKey()),nt=we.AdSourceKey.replaceAll('{"AdSourceKey":"ads1=',""),nt=nt.slice(5)}catch{continue}P.reportError("HEAVY_AD_v11",r.config.publisherId,r.config.channelId,r.config.tagId,r.config.templateId,JSON.stringify(we),nt),p.Info("HEAVY_AD"),b.set(Oe.HEAVY_AD),clearInterval(it);break}}catch{P.error("pagehide err",h)}},1e3);if(r.config.heavyAd==!0){const he=setInterval(()=>{P.reportError("HEAVY_AD_v5",r.config.publisherId,r.config.channelId,r.config.tagId,r.config.templateId),p.Info("HEAVY_AD"),b.set(Oe.HEAVY_AD),P.error("pagehide",h),clearInterval(he)},r.config.heavyAdAfter)}}).catch(function(Q){console.log(Q)})}).catch(ee=>{g.DispatchEvent(O.AdBlocker),b.set(Oe.STOP)})});function A(h){Re[h?"unshift":"push"](()=>{c=h,i(1,c)})}function I(h,S,V){Re[h?"unshift":"push"](()=>{S[V]=h,i(0,s)})}return[s,c,n,o,a,A,I]}class ks extends He{constructor(e){super(),je(this,e,Ds,Ms,Ge,{})}}const Rs=.5;function Cs(){let t=[0];for(let e=1;e<20;e++)t.push(e*5/100);return t}function Os(t){const e=R(Be.KEY),i=R(Tt),n=R(ln);let r;function a(){const o={rootMargin:"0px",threshold:Cs()};r=new IntersectionObserver(c=>{s(c)},o),r.observe(e.config.targetElement)}function s(o){o.forEach(c=>{i.set(new ii(c.intersectionRatio>=Rs,c.boundingClientRect.top,c.boundingClientRect.height)),n.set(c.intersectionRatio)})}return a(),pr(()=>{r.disconnect()}),[]}class Tn extends He{constructor(e){super(),je(this,e,Os,null,Ge,{})}}class xi{constructor(e="fixed",i="",n="",r="unset",a="unset",s="unset",o="unset",c=99999){this.position=e,this.width=i,this.height=n,this.top=r,this.bottom=a,this.left=s,this.right=o,this.zIndex=c}}function Ls(t){var e=t.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{topPos:e.top+n,leftPos:e.left+i}}function qs(t,e){const i=e.getBoundingClientRect(),{topPos:n,leftPos:r}=Ls(e),a=`${i.width}px`,s=`${i.height}px`,o=`${n}px`,c="unset",d=`${r}px`,y="unset",f=t.zIndexCustom;return new xi("absolute",a,s,o,c,d,y,f)}function Nn(t){let e=`${t.floatingWidth}px`,i=`${t.floatingHeight+t.headerHeight}px`;if(t.floaterSize=="RESPONSIVE"){const c=_s(t.offsetWidth,t.offsetHeight,t.floaterMaxWidth,0,t.floaterMaxHeight,0,0,!t.isDesktop,t.newSize);e=`${c.width}px`,i=`${c.height+t.headerHeight}px`}const n=t.floatingVertical==="top"?`${t.floatingVerticalOffset}px`:"unset",r=t.floatingVertical==="bottom"?`${t.floatingVerticalOffset}px`:"unset";let a=t.floatingHorizontal==="left"?`${t.floatingHorizontalOffset}px`:"unset";t.floatingHorizontal==="middle"&&(a=(window.innerWidth-parseInt(e))/2+"px");const s=t.floatingHorizontal==="right"?`${t.floatingHorizontalOffset}px`:"unset",o=t.zIndexCustom;return new xi("fixed",e,i,n,r,a,s,o)}function zs(t){const e=`${t.floatingWidth}px`,i=`${t.floatingHeight}px`,n=t.floatingVertical==="top"?`${t.floatingVerticalOffset}px`:"unset",r=t.floatingVertical==="bottom"?`${t.floatingVerticalOffset}px`:"unset",a=t.floatingHorizontal==="left"?`-${t.floatingWidth+t.floatingHorizontalOffset}px`:"unset",s=t.floatingHorizontal==="right"?`-${t.floatingWidth+t.floatingHorizontalOffset}px`:"unset",o=t.zIndexCustom;return new xi("absolute",e,i,n,r,a,s,o)}function Ts(t){`${t.floatingWidth}`,`${t.floatingHeight}`;const e=t.floatingVertical==="top"?`${t.floatingVerticalOffset}px`:"unset",i=t.floatingVertical==="bottom"?`${t.floatingVerticalOffset}px`:"unset",n=t.floatingHorizontal==="left"?`-${t.floatingWidth+t.floatingHorizontalOffset}px`:"unset",r=t.floatingHorizontal==="right"?`${t.floatingHorizontalOffset}px`:"unset",a=t.zIndexCustom;return new xi("fixed","0px","0px",e,i,n,r,a)}const Ns=(t,e,i)=>t>256&&e>256&&e==Math.ceil(t*9/16)+i||t==300&&e==250||t==320&&e==180,_s=(t,e,i,n,r,a,s,o,c)=>{let d=t,y=0,f=e;for(i==0&&(i=t),t>i&&(d=i),r||(r=e),e>r-s&&(f=r-s);d>=n;d--)if(y=Math.ceil(d*9/16)+s,!(f&&y>f||y<a)){if(o&&c)return{width:d,height:y};if(Ns(d,y,s))return{width:d,height:y}}return{width:320,height:180}};function _n(t){return document.createElement(t)}function Vi(t,e){t.appendChild(e)}function Vt(t){let e=t.getBoundingClientRect();return t===document.getElementsByTagName("body")[0]&&e.height===0&&(e.height=window.innerHeight,e.width=window.innerWidth,e.x=0,e.y=0),e}function ze(t,e){for(let i in e)t.style[i]=e[i]}function Bi(t,e){const{width:i,height:n,top:r,left:a}=e,s={position:"relative",width:`${i}px`,height:`${n}px`,top:0,left:0};ze(t,s)}function Vs(t,e){return Math.ceil(e*t[1]/t[0])}function Bs(t){try{const e=document.head||document.getElementsByTagName("head")[0];let i=document.createElement("style");i.type="text/css",i.textContent=t,e.appendChild(i)}catch{}}var qa=(()=>`.close-icon-container.svelte-vj8jc1{width:20px;height:20px;cursor:pointer}.close-icon-container-p.svelte-vj8jc1{padding:30px;margin:-30px}
`)();function Fs(t){let e,i,n,r;return{c(){e=G("div"),i=G("div"),i.innerHTML=`<svg viewBox="0 0 744.09 1052.4" width="20px" height="20px"><g id="layer1"><path id="path2989" d="m814.29 606.65a314.29 314.29 0 1 1 -628.57 0 314.29 314.29 0 1 1 628.57 0z" stroke="#000" stroke-width="5" transform="matrix(1.1048 0 0 1.1048 -179.21 -162.53)"></path><g id="g3763" transform="matrix(.91837 0 0 .91837 47.587 10.944)" stroke="#fff" stroke-linecap="round" stroke-width="133.87" fill="none"><path id="path2991" d="m176.51 362.87 356.13 356.13"></path><path id="path2993" d="m532.64 362.87-356.13 356.13"></path></g></g><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><cc:license rdf:resource="http://creativecommons.org/licenses/publicdomain/"></cc:license><dc:publisher><cc:Agent rdf:about="http://openclipart.org/"><dc:title>Openclipart</dc:title></cc:Agent></dc:publisher><dc:title>Close Button</dc:title><dc:date>2013-09-18T11:23:45</dc:date><dc:description>A round black close button with a white, thick, X in the center.
                        </dc:description><dc:source>https://openclipart.org/detail/183568/close-button-by-henrikhoff-183568</dc:source><dc:creator><cc:Agent><dc:title>henrikhoff</dc:title></cc:Agent></dc:creator><dc:subject><rdf:Bag><rdf:li>black</rdf:li><rdf:li>close button</rdf:li><rdf:li>cross</rdf:li><rdf:li>icon</rdf:li><rdf:li>white</rdf:li><rdf:li>x</rdf:li></rdf:Bag></dc:subject></cc:Work><cc:License rdf:about="http://creativecommons.org/licenses/publicdomain/"><cc:permits rdf:resource="http://creativecommons.org/ns#Reproduction"></cc:permits><cc:permits rdf:resource="http://creativecommons.org/ns#Distribution"></cc:permits><cc:permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks"></cc:permits></cc:License></rdf:RDF></metadata></svg>`,L(i,"class","close-icon-container svelte-vj8jc1"),L(e,"class","close-icon-container-p svelte-vj8jc1")},m(a,s){ke(a,e,s),N(e,i),n||(r=Ot(i,"click",t[0]),n=!0)},p:ne,i:ne,o:ne,d(a){a&&Pe(e),n=!1,r()}}}function Us(t){function e(i){xr.call(this,t,i)}return[e]}class mi extends He{constructor(e){super(),je(this,e,Us,Fs,Ge,{})}}function Ws(t){let e,i;return{c:ne,m(n,r){e||(i=Ot(window,"resize",t[0]),e=!0)},p:ne,i:ne,o:ne,d(n){e=!1,i()}}}function Ks(t,e,i){const n=R(Be.KEY),r=new MutationObserver(f),a=n.config;let s=n.getHeaderHeight();n.config.advertisementLocation=="IN"&&(s=0);let{sizeStore:o}=e,{domRect:c}=e,{expanded:d=!1}=e,{isExpandAnimationRunning:y=!1}=e;function f(){const x=Vt(a.targetElement);x.width=Math.floor(x.width),x.height=Math.floor(x.height),a.width=Math.floor(x.width),d?a.height=Math.floor(x.height):a.height=Vs(a.unitRatioParams,a.width),o.set(new Qt(a.width,a.height-s)),d&&c.set(x)}async function p(){const x=a.targetElement;r.observe(x,{subtree:!0,childList:!0}),await Mt(),f()}return dt(()=>{p()}),t.$$set=x=>{"sizeStore"in x&&i(1,o=x.sizeStore),"domRect"in x&&i(2,c=x.domRect),"expanded"in x&&i(3,d=x.expanded),"isExpandAnimationRunning"in x&&i(4,y=x.isExpandAnimationRunning)},[f,o,c,d,y]}class Vn extends He{constructor(e){super(),je(this,e,Ks,Ws,Ge,{sizeStore:1,domRect:2,expanded:3,isExpandAnimationRunning:4})}}class Gs{addEventListener(e,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(i)===-1&&n[e].push(i)}hasEventListener(e,i){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(i)!==-1}removeEventListener(e,i){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(i);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e)}}}const Bn={};class js{constructor(e,i){this.iframeId=e,this.msg=i}}class Hs{constructor(e,i){l(this,"topWin");l(this,"_multiPlayer",!1);l(this,"randomNumber",0);l(this,"uuidKey",null);l(this,"logger");l(this,"visibilitychangeStore");l(this,"closeIframes",[]);l(this,"mainDiv");l(this,"multiPlayersExist");l(this,"init",e=>{try{this.mainDiv=e;return}catch{this.topWin=window}});l(this,"isMultiPlayer",()=>this._multiPlayer);l(this,"multiPlayer",()=>this.topWin.smInitPlayer);l(this,"pingAllIframes",()=>{const e=new js(this.uuidKey,"hello from iframe "+this.uuidKey),i=JSON.stringify(e),n=this.topWin.document.getElementsByTagName("iframe");for(let r=0;r<n.length;r++){const a=n[r],s="*";a.contentWindow.postMessage(i,s)}});l(this,"subscribe",e=>this.multiPlayersExist.subscribe(e));l(this,"MainDiv",()=>this.mainDiv);try{this.multiPlayersExist=re(!1);try{this.logger=e,this.visibilitychangeStore=i,this.randomNumber=Math.random(),this.uuidKey=Js(),this.topWin=top.window}catch{this.topWin=window}if(this.topWin.smInitPlayer>0){this.topWin.smInitPlayer=this.topWin.smInitPlayer+1,this._multiPlayer=!0;return}this.topWin.smInitPlayer=1}catch{this._multiPlayer=!1}}}function Js(){function t(i){return Math.floor((1+Math.random())*65536).toString(16).substring(1).repeat(i/4)}return`${t(8)}-${t(4)}-4${t(3)}-${t(4)}-${t(12)}`}class yi{constructor(e,i,n){l(this,"topWin");l(this,"lastScrollY",window.scrollY||window.pageYOffset);l(this,"isScrollingUp");l(this,"eventDispatcher");l(this,"multiPlayerManager");l(this,"isFloating",!1);l(this,"configManager");try{this.eventDispatcher=e,this.multiPlayerManager=i,this.topWin=top.window,this.configManager=n}catch{this.topWin=window}let r=window;if(!this.configManager.config.safeFrame)try{r=this.topWin}catch{}r.addEventListener("scroll",a=>{var s=window.scrollY||window.pageYOffset;s>this.lastScrollY?this.isScrollingUp=!1:s<this.lastScrollY&&(this.isScrollingUp=!0),this.lastScrollY=s;let o="";this.isScrollingUp?o="UP":o="DOWN";const c={scrolling:o,mainDiv:this.multiPlayerManager.MainDiv(),isFloating:this.isFloating};this.eventDispatcher.dispatchEvent({type:"update",message:c})})}setFloating(e){this.isFloating=e}}l(yi,"KEY",{});function Ys(t){let e,i,n,r;return e=new Tn({}),n=new Vn({props:{sizeStore:t[2],domRect:t[1],expanded:t[0]}}),{c(){Ce(e.$$.fragment),i=ue(),Ce(n.$$.fragment)},m(a,s){Ee(e,a,s),ke(a,i,s),Ee(n,a,s),r=!0},p(a,[s]){const o={};s&1&&(o.expanded=a[0]),n.$set(o)},i(a){r||(B(e.$$.fragment,a),B(n.$$.fragment,a),r=!0)},o(a){H(e.$$.fragment,a),H(n.$$.fragment,a),r=!1},d(a){De(e,a),a&&Pe(i),De(n,a)}}}function Qs(t,e,i){const n=R(Be.KEY),r=n.config,a=R(Tt),s=R(Zt),o=R($e),c=R(Xt);let d=!1,{expanded:y}=e;const f=n.getHeaderHeight();let p=n.config.autoHideDisplay;const x=R(Di);R(ti);const E=R(yi.KEY),v=re(Vt(n.config.targetElement));v.subscribe(b=>{d||y&&(ze(r.unitContainer,{transition:"none"}),q(b))});function q(b){Bi(n.config.unitContainer,b)}const m=R(Dt).subscribe(b=>{try{if(b&&b.adEvent===D.IMPRESSION){s.set(!1);const A=b.imaManager.vastModel.imaVastModel.type;le.IMA,j(a).viewAbility||d||(n.config.floatOnlyOnBottom||g(),m())}}catch(A){P.error("imaEventStore_subscribe_floating",A)}}),W=re(new Qt(r.width,r.height));W.subscribe(b=>{if(!d){let A=n.config.playerSize=="FIXED"&&n.config.advertisementLocation==="IN"?30:0;b.height=b.height+A,o.set(b)}});async function g(){if(!r.isDetachToFloating)return;ze(r.unitContainer,{transition:"none"}),d=!0,c.set(!0);const b=Nn(r),A=Number(b.width.replace("px","")),I=Number(b.height.replace("px",""))-f,h=new Qt(A,I);if(o.set(h),ze(r.unitContainer,b),(r.positioning=="TOP"||r.positioning=="BOTTOM")&&n.config.isFloating){const S=JSON.parse(JSON.stringify(b));S.width="100%",S.zIndex=r.zIndexCustom-1,S.background="black",S.left=0,ze(r.smUnitFloaterBg,S)}E.setFloating(!0)}async function w(){ze(r.unitContainer,{transition:"none"}),c.set(!1),q(Vt(n.config.targetElement)),o.set(new Qt(r.width,r.height-f)),(r.positioning=="TOP"||r.positioning=="BOTTOM")&&n.config.isFloating&&(r.smUnitFloaterBg.style.removeProperty("position"),r.smUnitFloaterBg.style.removeProperty("width"),r.smUnitFloaterBg.style.removeProperty("height"),r.smUnitFloaterBg.style.removeProperty("top"),r.smUnitFloaterBg.style.removeProperty("bottom"),r.smUnitFloaterBg.style.removeProperty("left"),r.smUnitFloaterBg.style.removeProperty("right"),r.smUnitFloaterBg.style.removeProperty("z-index"),r.smUnitFloaterBg.style.removeProperty("background")),E.setFloating(!1)}return r.isDetachToFloatingOnStart=!1,a.subscribe(b=>{if(p==!0&&j(x)==!1){d&&w(),d=!1;return}let A=b.viewAbility;n.config.floatOnlyOnBottom&&(A=!(b.top<-b.height/2)),b.show&&(r.autoHideDisplay===!1&&g(),A===!1&&r.isDetachToFloatingOnStart===!0&&(d||g())),A===!1&&r.isDetachToFloatingOnStart===!0&&y&&(d||g()),A===!0&&(r.isDetachToFloatingOnStart=!0,d&&w(),d=!1)}),t.$$set=b=>{"expanded"in b&&i(0,y=b.expanded)},[y,v,W]}class Xs extends He{constructor(e){super(),je(this,e,Qs,Ys,Ge,{expanded:0})}}var za=(()=>`.hidden.svelte-wbzynq.svelte-wbzynq{display:none!important}.loader-wrapper-ad-video.svelte-wbzynq.svelte-wbzynq{display:flex;align-items:center;justify-content:center;background-color:#000;position:absolute;top:0;left:0;z-index:3}.vid-display-video-frame.svelte-wbzynq.svelte-wbzynq{border:none;min-width:300px;min-height:250px;background-color:transparent;top:-17px;position:relative}.progress-bar.svelte-wbzynq.svelte-wbzynq{position:fixed;top:0;height:5px;background:yellow;transition:width .25s;z-index:9999}.svelte-wbzynq.svelte-wbzynq{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.container.svelte-wbzynq.svelte-wbzynq,.video-controls.svelte-wbzynq.svelte-wbzynq,.video-timer.svelte-wbzynq.svelte-wbzynq,.options.svelte-wbzynq.svelte-wbzynq{display:flex;align-items:center;justify-content:center}.container.svelte-wbzynq.svelte-wbzynq{border-radius:5px;background:#000}.wrapper.svelte-wbzynq.svelte-wbzynq{position:absolute;left:0;right:0;z-index:1;opacity:0;bottom:-15px;transition:all .08s ease}.container.show-controls.svelte-wbzynq .wrapper.svelte-wbzynq{opacity:1;bottom:0;transition:all .13s ease}.wrapper.svelte-wbzynq.svelte-wbzynq:before{content:"";bottom:0;width:100%;z-index:-1;position:absolute;height:calc(100% + 35px);pointer-events:none;background:linear-gradient(to top,rgba(0,0,0,.7),transparent)}.video-timeline.svelte-wbzynq.svelte-wbzynq{height:7px;width:100%;cursor:pointer}.video-timeline.svelte-wbzynq .progress-area.svelte-wbzynq{height:3px;position:relative;background:rgba(255,255,255,.6)}.progress-area.svelte-wbzynq span.svelte-wbzynq{position:absolute;left:50%;top:-25px;font-size:13px;color:#fff;pointer-events:none;transform:translate(-50%)}.progress-area.svelte-wbzynq .progress-bar.svelte-wbzynq{width:0%;height:100%;position:relative;background:#2289ff}.progress-bar.svelte-wbzynq.svelte-wbzynq:before{content:"";right:0;top:50%;height:13px;width:13px;position:absolute;border-radius:50%;background:#2289ff;transform:translateY(-50%)}.progress-bar.svelte-wbzynq.svelte-wbzynq:before,.progress-area.svelte-wbzynq span.svelte-wbzynq{display:none}.video-timeline.svelte-wbzynq:hover .progress-bar.svelte-wbzynq:before,.video-timeline.svelte-wbzynq:hover .progress-area span.svelte-wbzynq{display:block}.wrapper.svelte-wbzynq .video-controls.svelte-wbzynq{padding:5px 20px 10px}.video-controls.svelte-wbzynq .options.svelte-wbzynq{width:100%}.video-controls.svelte-wbzynq .options.svelte-wbzynq:first-child{justify-content:flex-start}.video-controls.svelte-wbzynq .options.svelte-wbzynq:last-child{justify-content:flex-end}.options.svelte-wbzynq button.svelte-wbzynq{height:10px;width:40px;font-size:19px;border:none;cursor:pointer;background:none;color:#efefef;border-radius:3px;transition:all .3s ease}.options.svelte-wbzynq button .svelte-wbzynq:where(i,span){height:100%;width:100%;line-height:40px}.options.svelte-wbzynq button:hover .svelte-wbzynq:where(i,span){color:#fff}.options.svelte-wbzynq button:active .svelte-wbzynq:where(i,span){transform:scale(.9)}.options.svelte-wbzynq button span.svelte-wbzynq{font-size:23px}.options.svelte-wbzynq .video-timer.svelte-wbzynq{color:#efefef;margin-left:15px;font-size:14px}.video-timer.svelte-wbzynq .separator.svelte-wbzynq{margin:0 5px;font-size:16px;font-family:Open sans}@media screen and (max-width: 540px){.wrapper.svelte-wbzynq .video-controls.svelte-wbzynq{padding:3px 10px 7px}.progress-area.svelte-wbzynq span.svelte-wbzynq{display:none!important}.options.svelte-wbzynq button.svelte-wbzynq{height:30px;width:30px;font-size:17px}.options.svelte-wbzynq .video-timer.svelte-wbzynq{margin-left:5px}.video-timer.svelte-wbzynq .separator.svelte-wbzynq{font-size:14px;margin:0 2px}.options.svelte-wbzynq button .svelte-wbzynq:where(i,span){line-height:30px}.options.svelte-wbzynq button span.svelte-wbzynq{font-size:21px}.options.svelte-wbzynq .video-timer.svelte-wbzynq,.progress-area.svelte-wbzynq span.svelte-wbzynq{font-size:12px}}
`)();function Zs(t){let e,i,n,r,a,s,o,c,d,y,f,p,x,E,v,q,C,m,W,g,w,b,A,I,h,S,V,K,z;return{c(){e=G("div"),i=G("div"),n=G("div"),r=G("div"),a=G("div"),s=G("div"),o=G("span"),o.textContent="00:00",c=ue(),d=G("div"),y=ue(),f=G("ul"),p=G("li"),x=G("div"),E=G("p"),v=It(t[5]),q=ue(),C=G("p"),C.textContent="/",m=ue(),W=G("p"),g=It(t[6]),w=ue(),b=G("li"),A=G("button"),I=G("span"),h=ue(),S=G("iframe"),L(o,"class","svelte-wbzynq"),L(d,"class","progress-bar svelte-wbzynq"),L(s,"class","progress-area svelte-wbzynq"),L(a,"class","video-timeline svelte-wbzynq"),L(E,"class","current-time svelte-wbzynq"),L(C,"class","separator svelte-wbzynq"),L(W,"class","video-duration svelte-wbzynq"),L(x,"class","video-timer svelte-wbzynq"),L(p,"class","options left svelte-wbzynq"),L(I,"class","svelte-wbzynq"),F(A,"top","5px "),F(A,"right","30px"),F(A,"bottom","0"),F(A,"position","absolute"),F(A,"cursor","pointer"),F(A,"background","none"),F(A,"border","none"),F(A,"font-size","24px"),F(A,"color","#333"),F(A,"display","flex"),F(A,"align-items","center"),F(A,"z-index","3"),L(A,"class","svelte-wbzynq"),L(b,"class","options center svelte-wbzynq"),L(f,"class","video-controls svelte-wbzynq"),L(r,"class","wrapper svelte-wbzynq"),L(S,"class","vid-display-video-frame svelte-wbzynq"),L(S,"height",t[12]),L(S,"id","sm_dysplay"),L(S,"width",t[13]),ot(S.src,V=t[14])||L(S,"src",V),L(n,"class","container show-controls svelte-wbzynq"),L(i,"class","svelte-wbzynq"),L(e,"class","sm-display-video svelte-wbzynq"),F(e,"height",t[7].height+"px"),F(e,"width",t[7].width+"px"),ve(e,"loader-wrapper-ad-video",t[8]),ve(e,"hidden",t[1])},m(U,ee){ke(U,e,ee),N(e,i),N(i,n),N(n,r),N(r,a),N(a,s),N(s,o),N(s,c),N(s,d),t[16](d),N(r,y),N(r,f),N(f,p),N(p,x),N(x,E),N(E,v),N(x,q),N(x,C),N(x,m),N(x,W),N(W,g),N(f,w),N(f,b),N(b,A),N(A,I),t[17](I),t[18](r),N(n,h),N(n,S),t[19](S),K||(z=Ot(A,"click",t[15]),K=!0)},p(U,ee){ee[0]&32&&Gt(v,U[5]),ee[0]&64&&Gt(g,U[6]),ee[0]&128&&F(e,"height",U[7].height+"px"),ee[0]&128&&F(e,"width",U[7].width+"px"),ee[0]&256&&ve(e,"loader-wrapper-ad-video",U[8]),ee[0]&2&&ve(e,"hidden",U[1])},i:ne,o:ne,d(U){U&&Pe(e),t[16](null),t[17](null),t[18](null),t[19](null),K=!1,z()}}}const Fn='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#fafcff}</style><path d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>',Un='<svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>';function $s(t,e,i){let n,r,a;R(st.KEY);const s=R($e);Ne(t,s,T=>i(7,r=T)),R(Et);const o=R(ki),c=R(Be.KEY);R(ft);const d=R($t);Ne(t,d,T=>i(8,a=T));const y=R($e);Ne(t,y,T=>i(25,n=T));const f=R(Ri);let p,x=!0,E=c.config.passBackHeight,v=c.config.passBackWidth,q,C,m;const W=T=>{let Q=Math.floor(T%60),ae=Math.floor(T/60)%60,ye=Math.floor(T/3600);return Q=Q<10?`0${Q}`:Q,ae=ae<10?`0${ae}`:ae,ye=ye<10?`0${ye}`:ye,ye==0?`${ae}:${Q}`:`${ye}:${ae}:${Q}`};let g=0,w=0,b,A=!1,I,h=W(w),S=W(g),V;const K=()=>{const T=setInterval(()=>{if(A)return;if(I==null){clearInterval(T);return}w=w+.05;let Q=w/g*100;i(4,I.style.width=`${Q}%`,I),i(5,h=W(w)),w>=g&&(clearInterval(T),C&&C(),clearInterval(T),window.removeEventListener("message",V),f.set(new Ni("complete",!1,!0)))},50)},z=T=>{let Q=1,ae=33;m&&m.offsetHeight>0&&(ae=m.offsetHeight),Q=(T-ae)/(E+1),!(Q>2||Q<0)&&p!=null&&(i(0,p.style.transform="scale("+Q+")",p),i(0,p.style.border="none",p),i(0,p.style.backgroundColor="transparent",p))};dt(()=>{i(3,b.innerHTML=A?Un:Fn,b),i(0,p.onload=function(){y.subscribe(T=>{z(T.height)})},p),V=T=>{if(typeof T.data=="string"&&T.data.startsWith("sm://")){const Q=T.data.substring(5);if(JSON.parse(Q).isEmpty==!1){i(1,x=!1),f.set(new Ni("impression",!1,!1)),z(n.height),K();return}C&&C(),window.removeEventListener("message",V),f.set(new Ni("isEmpty",!0,!0))}},window.addEventListener("message",V),C=o.subscribe(async T=>{const Q=await fetch(T.url);g=T.videoDisplay.adDurationInSec,i(6,S=W(g));const ye=await Q.text();p.contentDocument.open(),p.contentDocument.write(ye),p.contentDocument.close(),i(0,p.contentDocument.body.style.margin=0,p),i(0,p.contentDocument.body.style.padding=0,p)})});function U(){A=!A,i(3,b.innerHTML=A?Un:Fn,b)}function ee(T){Re[T?"unshift":"push"](()=>{I=T,i(4,I)})}function J(T){Re[T?"unshift":"push"](()=>{b=T,i(3,b)})}function Y(T){Re[T?"unshift":"push"](()=>{m=T,i(2,m)})}function fe(T){Re[T?"unshift":"push"](()=>{p=T,i(0,p)})}return[p,x,m,b,I,h,S,r,a,s,d,y,E,v,q,U,ee,J,Y,fe]}class Wn extends He{constructor(e){super(),je(this,e,$s,Zs,Ge,{},null,[-1,-1])}}var Ta=(()=>`.hidden.svelte-11jsstl{display:none!important}.loader-wrapper.svelte-11jsstl{display:flex;align-items:center;justify-content:center;background-color:#fff;position:absolute;top:0;left:0;z-index:2}
`)();function ea(t){let e,i,n,r,a;return{c(){e=G("div"),i=G("div"),n=G("video"),r=G("source"),ot(r.src,a=t[5])||L(r,"src",a),L(r,"type",t[6]),L(n,"class","sm-preloader-img "),F(n,"background-color","black"),n.controls=!0,n.muted=!0,n.autoplay=!0,n.loop=!0,L(e,"class","sm-prloader-passback svelte-11jsstl"),F(e,"height",t[1].height+"px"),F(e,"width",t[1].width+"px"),ve(e,"loader-wrapper",t[2]),ve(e,"hidden",!t[2])},m(s,o){ke(s,e,o),N(e,i),N(i,n),N(n,r),t[7](n)},p(s,[o]){o&2&&F(e,"height",s[1].height+"px"),o&2&&F(e,"width",s[1].width+"px"),o&4&&ve(e,"loader-wrapper",s[2]),o&4&&ve(e,"hidden",!s[2])},i:ne,o:ne,d(s){s&&Pe(e),t[7](null)}}}function ta(t,e,i){let n,r;const a=R($e);Ne(t,a,v=>i(1,n=v));const s=R(Et);Ne(t,s,v=>i(2,r=v));const o=R(Be.KEY);let c;const d=o.config.instreamVideoUrl,y=o.config.instreamVideoType;console.log("instreamVideoUrl",d);var f;(function(v){v.INIT="INIT",v.PLAY="PLAY",v.PAUSE="PAUSE",v.RIGHT="RIGHT"})(f||(f={}));let p=f.INIT;s.subscribe(v=>{if(v){p==f.PAUSE&&(p=f.PLAY,c.play());return}p==f.PLAY&&(p=f.PAUSE,c.pause())});const x=R($e);dt(()=>{p=f.PLAY,c.play(),x.subscribe(v=>{v!=null&&(i(0,c.height=v.height,c),i(0,c.width=v.width,c))})});function E(v){Re[v?"unshift":"push"](()=>{c=v,i(0,c)})}return[c,n,r,a,s,d,y,E]}class ia extends He{constructor(e){super(),je(this,e,ta,ea,Ge,{})}}var Na=(()=>`.sm-unit-header-container.svelte-xurmir{color:gray;font-family:arial,sans-serif;font-size:14px;width:100%;text-align:center;z-index:5;padding:5px 0;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center;height:20px}.is-has-close-button.svelte-xurmir{background-color:#000;color:#fff}.sm-unit-header-button-container.svelte-xurmir{display:flex;width:30px;align-items:center}.ad-unit-wrapper.svelte-xurmir{position:relative;width:100%;background-color:#000;z-index:1;overflow:hidden;display:flex;justify-content:center;align-items:center}.sm-unit-display.svelte-xurmir{display:grid}.content.svelte-xurmir,.overlay.svelte-xurmir{grid-area:1 / 1}
`)();function Kn(t){let e,i,n,r,a,s=t[2].config.advertisementText+"",o,c,d,y,f,p,x,E=(t[2].config.isHasCloseButton||t[8])&&t[2].config.playerCloseButtonPositioning==="LEFT"&&Gn(t),v=(t[2].config.isHasCloseButton||t[8])&&t[2].config.playerCloseButtonPositioning==="RIGHT"&&jn(t);return p=new Wn({props:{expandFunction:t[31]}}),{c(){e=G("div"),i=G("div"),n=G("div"),E&&E.c(),r=ue(),a=G("div"),o=It(s),c=ue(),d=G("div"),v&&v.c(),y=ue(),f=G("div"),Ce(p.$$.fragment),L(n,"class","sm-unit-header-button-container svelte-xurmir"),L(a,"class","sm-advertisement-text-container"),L(d,"class","sm-unit-header-button-container svelte-xurmir"),L(i,"class","sm-unit-header-container svelte-xurmir"),ve(i,"overlay",t[19]),ve(i,"is-has-close-button",t[2].config.isHasCloseButton||t[8]),L(f,"class","ad-unit-wrapper svelte-xurmir"),F(f,"height",t[9].height+"px"),ve(f,"content",t[19]),L(e,"class","sm-unit svelte-xurmir"),ve(e,"sm-unit-display",t[19])},m(q,C){ke(q,e,C),N(e,i),N(i,n),E&&E.m(n,null),N(i,r),N(i,a),N(a,o),N(i,c),N(i,d),v&&v.m(d,null),N(e,y),N(e,f),Ee(p,f,null),t[32](e),x=!0},p(q,C){(q[2].config.isHasCloseButton||q[8])&&q[2].config.playerCloseButtonPositioning==="LEFT"?E?(E.p(q,C),C[0]&260&&B(E,1)):(E=Gn(q),E.c(),B(E,1),E.m(n,null)):E&&(Fe(),H(E,1,1,()=>{E=null}),Ue()),(!x||C[0]&4)&&s!==(s=q[2].config.advertisementText+"")&&Gt(o,s),(q[2].config.isHasCloseButton||q[8])&&q[2].config.playerCloseButtonPositioning==="RIGHT"?v?(v.p(q,C),C[0]&260&&B(v,1)):(v=jn(q),v.c(),B(v,1),v.m(d,null)):v&&(Fe(),H(v,1,1,()=>{v=null}),Ue()),C[0]&260&&ve(i,"is-has-close-button",q[2].config.isHasCloseButton||q[8]),(!x||C[0]&512)&&F(f,"height",q[9].height+"px")},i(q){x||(B(E),B(v),B(p.$$.fragment,q),x=!0)},o(q){H(E),H(v),H(p.$$.fragment,q),x=!1},d(q){q&&Pe(e),E&&E.d(),v&&v.d(),De(p),t[32](null)}}}function Gn(t){let e,i;return e=new mi({}),e.$on("click",t[20]),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function jn(t){let e,i;return e=new mi({}),e.$on("click",t[20]),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function Hn(t){let e,i,n,r,a,s=t[2].config.advertisementText+"",o,c,d,y,f,p,x,E,v,q,C,m,W,g=(t[2].config.isHasCloseButton||t[8])&&t[2].config.playerCloseButtonPositioning==="LEFT"&&Jn(t),w=(t[2].config.isHasCloseButton||t[8])&&t[2].config.playerCloseButtonPositioning==="RIGHT"&&Yn(t),b=t[1]&&Qn(t),A=(!t[2].config.isSticky||t[2].config.autoPlay)&&Xn(t),I=!t[2].config.isSticky&&!t[2].config.isFloating&&Zn(t),h=t[11]&&t[2].config.passBackType==Rt.VidsPlayer&&$n(t),S=t[2].config.passBackType==Rt.INSTREAM&&er(),V=t[12]&&tr(),K=t[7]&&ir(t);return{c(){e=G("div"),i=G("div"),n=G("div"),g&&g.c(),r=ue(),a=G("div"),o=It(s),c=ue(),d=G("div"),w&&w.c(),y=ue(),f=G("div"),b&&b.c(),p=ue(),A&&A.c(),x=ue(),I&&I.c(),E=ue(),h&&h.c(),v=ue(),S&&S.c(),q=ue(),V&&V.c(),C=ue(),K&&K.c(),m=wi(),L(n,"class","sm-unit-header-button-container svelte-xurmir"),L(a,"class","sm-advertisement-text-container"),L(d,"class","sm-unit-header-button-container svelte-xurmir"),L(i,"class","sm-unit-header-container svelte-xurmir"),ve(i,"overlay",t[19]),ve(i,"is-has-close-button",t[2].config.isHasCloseButton||t[8]),L(f,"class","ad-unit-wrapper svelte-xurmir"),F(f,"height",t[9].height+"px"),ve(f,"content",t[19]),L(e,"class","sm-unit svelte-xurmir"),ve(e,"sm-unit-display",t[19])},m(z,U){ke(z,e,U),N(e,i),N(i,n),g&&g.m(n,null),N(i,r),N(i,a),N(a,o),N(i,c),N(i,d),w&&w.m(d,null),N(e,y),N(e,f),b&&b.m(f,null),N(f,p),A&&A.m(f,null),N(f,x),I&&I.m(f,null),N(f,E),h&&h.m(f,null),N(f,v),S&&S.m(f,null),N(f,q),V&&V.m(f,null),t[35](e),ke(z,C,U),K&&K.m(z,U),ke(z,m,U),W=!0},p(z,U){(z[2].config.isHasCloseButton||z[8])&&z[2].config.playerCloseButtonPositioning==="LEFT"?g?(g.p(z,U),U[0]&260&&B(g,1)):(g=Jn(z),g.c(),B(g,1),g.m(n,null)):g&&(Fe(),H(g,1,1,()=>{g=null}),Ue()),(!W||U[0]&4)&&s!==(s=z[2].config.advertisementText+"")&&Gt(o,s),(z[2].config.isHasCloseButton||z[8])&&z[2].config.playerCloseButtonPositioning==="RIGHT"?w?(w.p(z,U),U[0]&260&&B(w,1)):(w=Yn(z),w.c(),B(w,1),w.m(d,null)):w&&(Fe(),H(w,1,1,()=>{w=null}),Ue()),U[0]&260&&ve(i,"is-has-close-button",z[2].config.isHasCloseButton||z[8]),z[1]?b?(b.p(z,U),U[0]&2&&B(b,1)):(b=Qn(z),b.c(),B(b,1),b.m(f,p)):b&&(Fe(),H(b,1,1,()=>{b=null}),Ue()),!z[2].config.isSticky||z[2].config.autoPlay?A?(A.p(z,U),U[0]&4&&B(A,1)):(A=Xn(z),A.c(),B(A,1),A.m(f,x)):A&&(Fe(),H(A,1,1,()=>{A=null}),Ue()),!z[2].config.isSticky&&!z[2].config.isFloating?I?(I.p(z,U),U[0]&4&&B(I,1)):(I=Zn(z),I.c(),B(I,1),I.m(f,E)):I&&(Fe(),H(I,1,1,()=>{I=null}),Ue()),z[11]&&z[2].config.passBackType==Rt.VidsPlayer?h?(h.p(z,U),U[0]&2052&&B(h,1)):(h=$n(z),h.c(),B(h,1),h.m(f,v)):h&&(Fe(),H(h,1,1,()=>{h=null}),Ue()),z[2].config.passBackType==Rt.INSTREAM?S?U[0]&4&&B(S,1):(S=er(),S.c(),B(S,1),S.m(f,q)):S&&(Fe(),H(S,1,1,()=>{S=null}),Ue()),z[12]?V?U[0]&4096&&B(V,1):(V=tr(),V.c(),B(V,1),V.m(f,null)):V&&(Fe(),H(V,1,1,()=>{V=null}),Ue()),(!W||U[0]&512)&&F(f,"height",z[9].height+"px"),z[7]?K?K.p(z,U):(K=ir(z),K.c(),K.m(m.parentNode,m)):K&&(K.d(1),K=null)},i(z){W||(B(g),B(w),B(b),B(A),B(I),B(h),B(S),B(V),W=!0)},o(z){H(g),H(w),H(b),H(A),H(I),H(h),H(S),H(V),W=!1},d(z){z&&Pe(e),g&&g.d(),w&&w.d(),b&&b.d(),A&&A.d(),I&&I.d(),h&&h.d(),S&&S.d(),V&&V.d(),t[35](null),z&&Pe(C),K&&K.d(z),z&&Pe(m)}}}function Jn(t){let e,i;return e=new mi({}),e.$on("click",t[20]),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function Yn(t){let e,i;return e=new mi({}),e.$on("click",t[20]),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function Qn(t){let e,i,n={};return e=new ks({props:n}),t[33](e),{c(){Ce(e.$$.fragment)},m(r,a){Ee(e,r,a),i=!0},p(r,a){const s={};e.$set(s)},i(r){i||(B(e.$$.fragment,r),i=!0)},o(r){H(e.$$.fragment,r),i=!1},d(r){t[33](null),De(e,r)}}}function Xn(t){let e,i,n;var r=t[5];function a(s){return{props:{expanded:s[6],isExpandAnimationRunning:nr}}}return r&&(e=new r(a(t))),{c(){e&&Ce(e.$$.fragment),i=wi()},m(s,o){e&&Ee(e,s,o),ke(s,i,o),n=!0},p(s,o){const c={};if(o[0]&64&&(c.expanded=s[6]),r!==(r=s[5])){if(e){Fe();const d=e;H(d.$$.fragment,1,0,()=>{De(d,1)}),Ue()}r?(e=new r(a(s)),Ce(e.$$.fragment),B(e.$$.fragment,1),Ee(e,i.parentNode,i)):e=null}else r&&e.$set(c)},i(s){n||(e&&B(e.$$.fragment,s),n=!0)},o(s){e&&H(e.$$.fragment,s),n=!1},d(s){s&&Pe(i),e&&De(e,s)}}}function Zn(t){let e,i;return e=new Vn({props:{sizeStore:t[13],domRect:t[21],expanded:t[6],isExpandAnimationRunning:nr}}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p(n,r){const a={};r[0]&64&&(a.expanded=n[6]),e.$set(a)},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function $n(t){let e,i;return e=new Fr({props:{expandFunction:t[34]}}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function er(t){let e,i;return e=new ia({}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function tr(t){let e,i;return e=new Wn({}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function ir(t){let e,i;return{c(){e=G("img"),ot(e.src,i="http://pixel.adsafeprotected.com/?anId=931566&advId="+t[24]+"&campId="+t[25]+"&pubId="+t[26]+"&chanId="+t[27]+"&placementId="+t[23]+"&dealId="+t[28]+"&adsafe_par&bidurl="+t[29]+"&ias_xps="+t[30])||L(e,"src",i),L(e,"height","1"),L(e,"width","1"),L(e,"alt","")},m(n,r){ke(n,e,r)},p:ne,d(n){n&&Pe(e)}}}function na(t){let e,i,n,r=t[3]&&Kn(t),a=!t[10]&&!t[3]&&Hn(t);return{c(){r&&r.c(),e=ue(),a&&a.c(),i=wi()},m(s,o){r&&r.m(s,o),ke(s,e,o),a&&a.m(s,o),ke(s,i,o),n=!0},p(s,o){s[3]?r?(r.p(s,o),o[0]&8&&B(r,1)):(r=Kn(s),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(Fe(),H(r,1,1,()=>{r=null}),Ue()),!s[10]&&!s[3]?a?(a.p(s,o),o[0]&1032&&B(a,1)):(a=Hn(s),a.c(),B(a,1),a.m(i.parentNode,i)):a&&(Fe(),H(a,1,1,()=>{a=null}),Ue())},i(s){n||(B(r),B(a),n=!0)},o(s){H(r),H(a),n=!1},d(s){r&&r.d(s),s&&Pe(e),a&&a.d(s),s&&Pe(i)}}}const nr=!1;function ra(t,e,i){let n,r,a,s,o,c;const d=R(ft),y=R($e);Ne(t,y,_=>i(9,a=_));const f=R(Et);Ne(t,f,_=>i(11,o=_));const p=R($t);Ne(t,p,_=>i(12,c=_));const x=R(Tt);Ne(t,x,_=>i(37,n=_));const E=R(Xt);Ne(t,E,_=>i(8,r=_));const v=R(_t.KEY);v.getAppStore();let q,C=!1;const m=R(Be.KEY);R(st.KEY).Info("player init");const g=re(!1);Ne(t,g,_=>i(10,s=_));let w=!1;const b=R(Bn);let A=!1;const I=m.config.advertisementLocation==="IN";let h;const S=R(kt.KEY),V=R(ti),K=setTimeout(()=>{try{clearTimeout(K)}catch(_){P.error("timeOutForImpression_err",_,{})}},1e4);try{let _=window;const X=Se=>{clearTimeout(K),_.removeEventListener("click",X),_.removeEventListener("scroll",X),_.removeEventListener("mousemove",X),_.removeEventListener("touchstart",X),_.removeEventListener("touchend",X),_.removeEventListener("touchcancel",X),_.removeEventListener("touchmove",X)};_.addEventListener("click",X),_.addEventListener("scroll",X),_.addEventListener("mousemove",X),_.addEventListener("touchstart",X),_.addEventListener("touchend",X),_.addEventListener("touchcancel",X),_.addEventListener("touchmove",X)}catch{}w=m.config.displayOnly,m.config.isSticky&&f.subscribe(_=>{!_&&!A&&(A=!0,ze(m.config.unitContainer,Nn(m.config)))});const z=R(ei);function U(){j(E)?(d.DispatchEvent(O.UserClose),m.config.isSticky&&v.setState(gi.SKIP),m.config.isFloating&&(i(2,m.config.isDetachToFloating=!1,m),E.set(!1)),ze(m.config.unitContainer,zs(m.config)),(m.config.isFloating||m.config.isSticky)&&m.config.smUnitFloaterBg&&(m.config.smUnitFloaterBg.style.removeProperty("position"),m.config.smUnitFloaterBg.style.removeProperty("width"),m.config.smUnitFloaterBg.style.removeProperty("height"),m.config.smUnitFloaterBg.style.removeProperty("top"),m.config.smUnitFloaterBg.style.removeProperty("bottom"),m.config.smUnitFloaterBg.style.removeProperty("left"),m.config.smUnitFloaterBg.style.removeProperty("right"),m.config.smUnitFloaterBg.style.removeProperty("z-index"),m.config.smUnitFloaterBg.style.removeProperty("background")),m.config.isSticky&&z.set(Oe.STOP),A=!1):m.config.isSticky&&(d.DispatchEvent(O.UserClose),d.DispatchEvent(O.PlayerTerminated),ee())}b.subscribe(_=>{try{_&&m.config.multiPlayer&&U()}catch{}});const ee=()=>{const _={height:"0px"};m.config.isExpandable&&ze(m.config.unitContainer,_),ze(m.config.targetElement,_),setTimeout(()=>{g.set(!0),m.config.targetElement.removeChild(m.config.unitContainer),m.config.targetElement.parentNode.removeChild(m.config.targetElement)},m.config.openingAnimationTime)},J={inArticle:Tn,floating:Xs};let Y;!m.config.isFloating&&!m.config.isSticky&&(Y=J.inArticle),m.config.isFloating&&(Y=J.floating);const fe=re(Vt(m.config.targetElement));let T=!m.config.isExpandable;const Q=R(Dt),ae=()=>{!T&&!m.config.isSticky&&(i(2,m.config.targetElement.style.height=`${m.config.height+m.getHeaderHeight()}px`,m),i(2,m.config.targetElement.style.transition=`all ${m.config.openingAnimationTime}ms`,m),i(2,m.config.unitContainer.style.height=`${m.config.height+m.getHeaderHeight()}px`,m),setTimeout(()=>{i(6,T=!0),i(2,m.config.unitContainer.style.transition="none",m),i(2,m.config.targetElement.style.transition="none",m)},m.config.openingAnimationTime))},ye=Q.subscribe(_=>{try{_&&_.adEvent===D.IMPRESSION&&(i(2,m.config.firstImpression=!0,m),ye())}catch(X){P.error("imaEventStore_subscribe",X)}});if(m.config.isFloating){const _=R(Zt),X=x.subscribe(async Se=>{Se.viewAbility&&(_.set(!0),await Mt(),X&&X())})}const Me=m.config.tagId,Qe=m.config.tagId,tt=m.config.tagId,Je=m.config.publisherId,it=m.config.tagId,he=m.config.tagId,we=encodeURIComponent(m.config.url),nt=m.config.tagId;let _e=m.config.enableIas;_e=!1,(m.config.publisherId=="02e0283e-7e2e-49d6-8af8-041b6c5c1e33"||m.config.publisherId=="413cb585-3a5f-47af-b38f-bfa872f9a666")&&(_e=!1);async function at(){await Mt(),i(1,C=!0),!m.config.isFloating&&!m.config.isSticky&&fe.subscribe(_=>{Bi(m.config.unitContainer,_)})}dt(()=>{S.setFloatingConfig(h),b.init(h);const _=X=>new Promise(Se=>setTimeout(Se,X));m.config.notGoogleAutoPlay?setTimeout(async()=>{let X=n.viewAbility;for(;!X;)await _(200),X=n.viewAbility;at()},200):at()}),z.subscribe(async _=>{if(_==Oe.STOP)try{g.set(!0),m.config.targetElement.removeChild(m.config.unitContainer)}catch{}if(_==Oe.HEAVY_AD)try{const X=Se=>new Promise(mt=>setTimeout(mt,Se));d.DispatchEvent(O.ImpressionInSession2),d.DispatchEvent(O.PlayerTerminated),V.dispatchEvent({type:"heavy_ad",message:""}),await X(2e3),ee()}catch{}});const pt=()=>{ae()};function xt(_){Re[_?"unshift":"push"](()=>{h=_,i(4,h)})}function k(_){Re[_?"unshift":"push"](()=>{q=_,i(0,q)})}const ge=()=>{ae()};function We(_){Re[_?"unshift":"push"](()=>{h=_,i(4,h)})}return[q,C,m,w,h,Y,T,_e,r,a,s,o,c,y,f,p,x,E,g,I,U,fe,ae,Me,Qe,tt,Je,it,he,we,nt,pt,xt,k,ge,We]}class sa extends He{constructor(e){super(),je(this,e,ra,na,Ge,{},null,[-1,-1])}}function aa(t,e){t.selectMediaEventStore.subscribe(function(i){if(i==null)return;const n=document.createElement("img");n.src=i.url}),t.selectMediaBulkEventStore.subscribe(async function(i){if(i!=null)try{const r=JSON.stringify(i);let a="//track-selectmedia.com/trackv4?bulkV3=true&version="+Ut+"&uuid="+rr();e.config.mockServer&&(a="//staging.track-selectmedia.com/trackv4?bulkV3=true&version="+Ut+"&uuid="+rr());var n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json"),n.send(r)}catch(r){const a=JSON.stringify(i,oa(i));P.error("bulkEvent",r,{payload:a})}})}function oa(t){var e=0;return function(i,n){return e!==0&&typeof t=="object"&&typeof n=="object"&&t==n?"[Circular]":e>=29?"[Unknown]":(++e,n)}}function rr(){var t=new Date().getTime(),e=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var n=Math.random()*16;return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),(i==="x"?n:n&3|8).toString(16)})}function la(t,e){t.selectMediaEventStore.subscribe(function(i){i!=null})}function ca(t,e="background:lightblue; color:white;border-radius: 3px;  font-size: small;"){t.subscribe(function(i){if(i!=null&&i.adEvent==D.AD_ERROR)try{console.log("%c selectMediaPlayer",e,"Error","code",i.data.getError().getErrorCode(),"message",i.data.getError().getMessage())}catch{console.log("%c selectMediaPlayer",e,"Error catch",i)}})}const da="background:green; color:white;border-radius: 3px;  font-size: small;";function ua(t){t.logEventStore.subscribe(function(e){e!=null&&console.log("%c selectMediaPlayer",da,e.logLevel.toUpperCase(),...e.data)})}class fa{constructor(e,i){l(this,"waterFallUrl");l(this,"waterfallStore");l(this,"waterfall");l(this,"startTime");l(this,"configManager");l(this,"isDesktop");this.configManager=e,this.waterfallStore=i,this.waterFallUrl=e.waterfallServer,this.isDesktop=e.config.isDesktop?1:0,this.waterfall=null}async getWaterfallStoreResponse(){P.incWFRun(),this.startTime=null,this.waterfall=null;const n=await(await ut(this.waterFallUrl)).json();this.waterfallStore.set(n)}async getWaterfall(){return new Promise(async(e,i)=>{let n=null,r=null;try{if(this.configManager.config.mockServer){P.incWFRun();const x=await(await ut(this.configManager.config.mockServerUrl,{retry:0,timeout:1e3})).json();let E=0;x.ts&&x.ts.a&&x.ts.t===2&&(E=x.ts.a);const v=this.configManager.config.width,q=this.configManager.config.height;for(let C=0;C<x.adSources.length;C++)if(x.adSources[C].adSourceKey=x.adSources[C].adSourceKeyV2,x.adSources[C].trafficSourceRevShare=E,x.adSources[C].enableSelectedAdsSourceSize=!1,this.configManager.config.enableAdSourcesABCpm){let m=[];m.push(new ai(v,q)),x.adSources[C].adsSourceSize!=null&&(m=JSON.parse(JSON.stringify(x.adSources[C].adsSourceSize)),m=m.filter(w=>w.width>=v&&w.height>q),m.push(new ai(v,q)));const W=m.map(w=>w.width+"_"+w.height),g=m.filter(({id:w},b)=>!W.includes(w,b+1));if(g.length>0){const w=g[Math.floor(Math.random()*g.length)];x.adSources[C].enableSelectedAdsSourceSize=!0,x.adSources[C].selectedAdsSourceSize=w}}x.baseUrl=x.baseUrlV2,e(JSON.parse(JSON.stringify(x)));return}if(this.waterfall!=null){P.incWFRun();let p=new Date().getTime()-this.startTime.getTime();var a=Math.round(p/1e3);if(a<600){e(JSON.parse(JSON.stringify(this.waterfall)));return}}P.incWFRun(),n=this.waterFallUrl+`&cb=${un()}&is_desktop=${this.isDesktop}`,r=await Mr(n,1,2e4);const s=JSON.parse(r);if(s==null||s.ts==null||s.ts.id==null||s.ts.id==""){P.error("x2_Waterfall_error",null,{u:n,waterfall:s,response:r}),e(JSON.parse(JSON.stringify(this.waterfall)));return}let o=0;s.ts&&s.ts.a&&s.ts.t===2&&(o=s.ts.a);const c=this.configManager.config.width,d=this.configManager.config.height,y=["d886d053-717e-4d12-8718-be44dc364706","7b96b956-0893-44a3-9201-258ca5badffa","6f69abfa-7d21-44cb-b70c-81c1eb2ced01","949a7ae3-7057-43f8-b0d7-02ad1c026bdf","c8fad9c6-61e3-4b13-9a50-44cd18232796","1b6b25ea-0afa-47a2-8da3-6b4a17848810"];for(let f=0;f<s.adSources.length;f++)if(y.includes(s.adSources[f].advertiserId),s.adSources[f].adSourceKey=s.adSources[f].adSourceKeyV2,s.adSources[f].enableSelectedAdsSourceSize=!1,s.adSources[f].trafficSourceRevShare=o,this.configManager.config.enableAdSourcesABCpm){let p=[];p.push(new ai(c,d)),s.adSources[f].adsSourceSize!=null&&(p=JSON.parse(JSON.stringify(s.adSources[f].adsSourceSize)),p=p.filter(v=>v.width>=c&&v.height>d),p.push(new ai(c,d)));const x=p.map(v=>v.width+"_"+v.height),E=p.filter(({id:v},q)=>!x.includes(v,q+1));if(E.length>0){const v=E[Math.floor(Math.random()*E.length)];s.adSources[f].enableSelectedAdsSourceSize=!0,s.adSources[f].selectedAdsSourceSize=v}}s.baseUrl=s.baseUrlV2,this.startTime=new Date,this.waterfall=JSON.parse(JSON.stringify(s)),e(JSON.parse(JSON.stringify(s)))}catch{e(JSON.parse(JSON.stringify(this.waterfall)));return}})}async getWaterfallCache(){return new Promise(async(e,i)=>{e(JSON.parse(JSON.stringify(this.waterfall)))})}getWaterfallStore(){return this.waterfallStore}}const ha={};class ga{constructor(e,i,n,r,a,s){l(this,"iMAManagerStore");l(this,"eventManager");l(this,"adSourceKeyEventMap");l(this,"cpmMap");l(this,"adsourceMap");l(this,"prebidVastHistory",new Map);l(this,"duplicateImpression",new Map);l(this,"events",[]);l(this,"viewabilityStore");l(this,"isRunningFloatingModeStore");l(this,"trafficSourceInventoryOK");l(this,"eventDispatcher");l(this,"impressionInSessionCount",0);l(this,"configManager");l(this,"init",async()=>{this.iMAManagerStore.subscribe(this.subscribeIMA)});l(this,"subscribeIMA",e=>{if(e!=null)try{switch(this.events.push({adEvent:e.adEvent,tine:new Date}),e.adEvent){case D.VOLUME_CHANGED:{const i=e.imaManager.getVastModel().imaVastModel,n=this.adSourceKeyEventMap.get(e.key);break}case D.VOLUME_MUTED:{const i=this.adSourceKeyEventMap.get(e.key);P.error("VOLUME_MUTED",null,{adSource:i});break}case D.IMPRESSION:{this.events.push({adEvent:e.adEvent,imaVastModel:e.imaManager.getVastModel().imaVastModel});let i=JSON.parse(JSON.stringify(this.adSourceKeyEventMap.get(e.key)));if(this.cpmMap[e.key]!==void 0&&(i.cpm=this.cpmMap[e.key]),this.duplicateImpression.has(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.LOADED))break;this.duplicateImpression.set(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.LOADED,!0);try{i.duration=e.duration}catch{}this.eventManager.DispatchEvent(O.Impression,JSON.parse(JSON.stringify(i)));const n=JSON.parse(JSON.stringify(i));try{n.type==le.IMA&&(n.cpm=n.googleImaGrossRate);const r=n.revShare,a=n.trafficSourceRevShare,s=n.cpm;n.pCpm=s*(1-r/100)*(a/100)}catch{}this.impressionInSession(i);try{this.eventDispatcher.dispatchEvent({type:"impression",message:n})}catch{}(j(this.viewabilityStore).viewAbility||j(this.isRunningFloatingModeStore))&&this.eventManager.DispatchEvent(O.ViewableImpression,i),j(this.isRunningFloatingModeStore)&&this.eventManager.DispatchEvent(O.FloatingImpression,i);break}case D.PREBID_REQUEST:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.ALL_ADS_COMPLETED:{const i=this.adSourceKeyEventMap.get(e.key);this.eventManager.DispatchEvent(O.AllAdsCompleted,i);break}case D.SKIPPED:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.RESUMED:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.PAUSED:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.COMPLETE:{const i=this.adSourceKeyEventMap.get(e.key);this.eventManager.DispatchEvent(O.Complete,i);try{this.eventDispatcher.dispatchEvent({type:"complete",message:""})}catch{}break}case D.THIRD_QUARTILE:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.MIDPOINT:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.FIRST_QUARTILE:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.STARTED:{const i=this.adSourceKeyEventMap.get(e.key);break}case D.CLICK:{const i=this.adSourceKeyEventMap.get(e.key);this.eventManager.DispatchEvent(O.Click,i);try{this.eventDispatcher.dispatchEvent({type:"click",message:""})}catch{}break}case D.REQUEST:{const i=this.adSourceKeyEventMap.get(e.key);this.eventManager.DispatchEvent(O.Request,i);break}case D.ADS_LOADER_ADS_MANAGER_LOADED:{if(this.duplicateImpression.has(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED))break;this.duplicateImpression.set(e.imaManager.getVastModel().imaVastModel.uuid+"_"+D.ADS_LOADER_ADS_MANAGER_LOADED,!0),this.prebidVastHistory.set(e.key.vast,!0);const i=this.adSourceKeyEventMap.get(e.key.adSourceKey);this.cpmMap[e.key.adSourceKey]!==void 0&&(i.cpm=this.cpmMap[e.key.adSourceKey]),this.adsourceMap[e.key.uuid]!==void 0&&(i.amznbId=this.adsourceMap[e.key.uuid].amznbId),i.type==le.IMA&&this.eventManager.DispatchEvent(O.Bid,i);break}case D.LOADED:break;case D.ADS_LOADER_AD_ERROR:{const i=this.adSourceKeyEventMap.get(e.key);try{if(e.data==null)break;const n=e.data.getErrorCode();switch(n){case 1009:break;case 301:break;case 1005:break;case 1010:break;case 303:break;default:P.error("ImaAdEvent_ADS_LOADER_AD_ERROR",null,{errorCode:n});break}}catch(n){P.error("ImaAdEvent_ADS_LOADER_AD_ERROR_err",n,{})}break}}}catch(i){P.error("ServerEventManager",i,{adEvent:e.adEvent,key:e.key})}});l(this,"mapAdSourceKey",e=>{this.adSourceKeyEventMap.set(e.adSourceKey,e)});l(this,"updateCpm",(e,i)=>{this.cpmMap[e]=i});l(this,"updateAdsourceMap",e=>{this.adsourceMap[e.uuid]=e});l(this,"inventoryRequest",()=>{if(this.eventManager.DispatchEvent(O.InventoryRequest,null),this.trafficSourceInventoryOK==!1){if(this.trafficSourceInventoryOK=!0,this.configManager.config.inventoryIgnore)return;this.eventManager.DispatchEvent(O.Inventory,null),this.eventManager.DispatchEvent(O.TrafficSourceInventory,null)}});l(this,"impressionInSession",e=>{try{if(this.impressionInSessionCount++,this.impressionInSessionCount==2){this.eventManager.DispatchEvent(O.ImpressionInSession2,e);return}if(this.impressionInSessionCount==3){this.eventManager.DispatchEvent(O.ImpressionInSession3,e);return}if(this.impressionInSessionCount==4){this.eventManager.DispatchEvent(O.ImpressionInSession4,e);return}if(this.impressionInSessionCount==5){this.eventManager.DispatchEvent(O.ImpressionInSession5,e);return}if(this.impressionInSessionCount==6){this.eventManager.DispatchEvent(O.ImpressionInSession6,e);return}if(this.impressionInSessionCount==7){this.eventManager.DispatchEvent(O.ImpressionInSession7,e);return}if(this.impressionInSessionCount==8){this.eventManager.DispatchEvent(O.ImpressionInSession8,e);return}if(this.impressionInSessionCount==9){this.eventManager.DispatchEvent(O.ImpressionInSession9,e);return}if(this.impressionInSessionCount==10){this.eventManager.DispatchEvent(O.ImpressionInSession10,e);return}if(this.impressionInSessionCount==11){this.eventManager.DispatchEvent(O.ImpressionInSession11,e);return}if(this.impressionInSessionCount==12){this.eventManager.DispatchEvent(O.ImpressionInSession12,e);return}if(this.impressionInSessionCount==13){this.eventManager.DispatchEvent(O.ImpressionInSession13,e);return}if(this.impressionInSessionCount==14){this.eventManager.DispatchEvent(O.ImpressionInSession14,e);return}if(this.impressionInSessionCount==15){this.eventManager.DispatchEvent(O.ImpressionInSession15,e);return}if(this.impressionInSessionCount>15){this.eventManager.DispatchEvent(O.ImpressionInSession16AndMore,e);return}const i=pa[this.impressionInSessionCount]}catch(i){P.error("impressionInSession",i,{adSource:e,impressionInSessionCount:this.impressionInSessionCount})}});this.iMAManagerStore=e,this.eventManager=i,this.adSourceKeyEventMap=new Map,this.configManager=s,this.cpmMap={},this.adsourceMap={},this.viewabilityStore=n,this.isRunningFloatingModeStore=r,this.trafficSourceInventoryOK=!1,this.eventDispatcher=a}}const pa={2:O.ImpressionInSession2,3:O.ImpressionInSession3,4:O.ImpressionInSession4,5:O.ImpressionInSession5,6:O.ImpressionInSession6,7:O.ImpressionInSession7,8:O.ImpressionInSession8,9:O.ImpressionInSession9,10:O.ImpressionInSession10,11:O.ImpressionInSession11,12:O.ImpressionInSession12,13:O.ImpressionInSession13,14:O.ImpressionInSession14,15:O.ImpressionInSession15};class xa{constructor(e,i,n){l(this,"adSourceId");l(this,"_canPlay");l(this,"PlayEveyTime");l(this,"play",()=>{this._canPlay=!1});l(this,"canPlay",()=>this._canPlay);this.adSourceId=e,this._canPlay=i,this.PlayEveyTime=n,setInterval(()=>{this._canPlay=!0},n*1e3)}}function ma(t){return Math.round(60/t)}class ya{constructor(){l(this,"mapAdsManagerV2");this.mapAdsManagerV2=new Map}filterAds(e,i){const n=[];for(let r=0;r<e.length;r++){const a=e[r],s=a.id;if(!a.maxPlayerRequestPerMinuteEnabled){n.push(a);continue}this.mapAdsManagerV2.has(s)||this.mapAdsManagerV2.set(s,new xa(s,!0,ma(a.maxPlayerRequestPerMinute))),this.mapAdsManagerV2.get(s).canPlay()!=!1&&(this.mapAdsManagerV2.get(s).play(),n.push(a))}return n}}function Aa(t){let e,i;return e=new sa({}),{c(){Ce(e.$$.fragment)},m(n,r){Ee(e,n,r),i=!0},p:ne,i(n){i||(B(e.$$.fragment,n),i=!0)},o(n){H(e.$$.fragment,n),i=!1},d(n){De(e,n)}}}function Sa(t,e,i){const n=new Gs;Z(ti,n);const r=new _t(re(gi.APP_LOADING));Z(_t.KEY,r);const a=re(null),s=new st(a);let{configManager:o}=e;Z(Be.KEY,o);const c=re(-1);Z(ln,c);const d=re(new Nt(!1,""));Z(Ci,d),Z(st.KEY,s),s.Info("context init");const y=re(),f=new fa(o,y);Z(Xr,f);const p=re({width:o.config.width,height:o.config.height}),x=re(!1),E=re(),v=re(),q=new Ji,C=new kr(o.baseUrl,E,q,o.isDebug,c,p,x,n,o,v,s);aa(C,o);const m=new li("sel2",18e4,"adsource");Z(ft,C),Z(li.KEY,m),Z(On,us);const W=re(null);W.subscribe(function(_e){}),Z(Dt,W),Z(cn,Pr),o.isDebug&&(la(C),ua(s),s.Info("configManager",o)),o.isDebugError&&ca(W);const g=re(!0),w=re(""),b=re(!1),A=re(!1),I=re(!0),h=re(!1),S=re(null),V=re(null),K=re(new ii(!1,0,0));o.config.autoPlay===!0&&K.set(new ii(!0,0,0));const z=re(!1);o.config.autoPlay&&z.set(!0);const U=rn([K,x,z],([_e,at,pt],xt)=>{let k=at===!0||_e.viewAbility===!0||pt===!0;o.config.firstImpression&&!o.config.pauseOnUnseen&&(k=!0),xt(k)}),ee=new Hs(s,K);Z(Bn,ee);const J=new oi(o),Y=new ci(o),fe=new di(o),T=new ui(o);Z(Et,g),Z($e,p),Z(Tt,K),Z(Xt,x),Z(Ei,U),Z(Zt,z),Z(sn,w),Z(an,b),Z(Di,A),Z(on,I),Z(oi.KEY,J),Z(ci.KEY,Y),Z(di.KEY,fe),Z(ui.KEY,T),Z($t,h),Z(ki,S),Z(Ri,V),o.config.isSticky&&(K.set(new ii(!1,0,0)),p.set({width:o.config.floatingWidth,height:o.config.floatingHeight}),x.set(!0));const Q=new kt(o,s),ae=new ws(o,p,K),ye=new ga(W,C,K,x,n,o),Me=new ya,Qe=new jr(f,ae,C,o,ye,Me,U,w,b,I,Q,J,Y,fe,T,ee,s);ye.init(),Z(bn,Qe),Z(Ln,ae),Z(ha,ye),Z(kt.KEY,Q);const tt=new yi(n,ee,o);Z(yi.KEY,tt);const Je=re(Oe.PLAY);Z(ei,Je);const it=()=>{Je.set(Oe.STOP)},he=()=>{Je.set(Oe.PAUSE)},we=()=>{Je.set(Oe.RESUME)},nt=_e=>{for(const at in _e)i(0,o.config[at]=_e[at],o)};return t.$$set=_e=>{"configManager"in _e&&i(0,o=_e.configManager)},[o,n,it,he,we,nt]}class va extends He{constructor(e){super(),je(this,e,Sa,Aa,Ge,{eventDispatcher:1,configManager:0,Stop:2,Pause:3,Resume:4,UpdateConfig:5},null,[-1,-1])}get eventDispatcher(){return this.$$.ctx[1]}get Stop(){return this.$$.ctx[2]}get Pause(){return this.$$.ctx[3]}get Resume(){return this.$$.ctx[4]}get UpdateConfig(){return this.$$.ctx[5]}}function ba(t){return dr.reduce((e,i)=>[...e,`${i.toLowerCase()}=${t[i]}`],[]).join("&")}function wa(t,e,i){let n,r,a;try{if(n=document.querySelector(t.selector),n===null&&(n=top.document.querySelector(t.selector)),n===null)return{targetElement:n};const s=Vt(n),o=_n("div");if(a=_n("div"),ze(o,{transition:`all ${t.openingAnimationTime}ms`}),e){const c=Ts(t);ze(o,c),ze(o,{transition:"all 0.5s ease-in-out"})}if(i){const c=qs(t,n);ze(o,c),t.isExpandable&&(ze(o,{overflow:"hidden",transition:`all ${t.openingAnimationTime}ms`}),ze(n,{transition:`all ${t.openingAnimationTime}ms`})),(t.positioning=="TOP"||t.positioning=="BOTTOM")&&Vi(n,a)}if(e?(Vi(document.querySelector("body"),o),ze(n,{height:" 0px"})):(Vi(n,o),Bi(o,s)),t.customCSS&&t.customCSS!=="")if(t.customCSS.startsWith("{"))try{const d=JSON.parse(t.customCSS);ze(o,d)}catch{}else Bs(t.customCSS);r=o}catch(s){P.error("getTargetAndContainer",s,{targetElement:n,selector:t.selector})}return{targetElement:n,unitContainer:r,smUnitFloaterBg:a}}function Ia(t){let e=Object.assign({},cr),i;try{const n=new Ji,r=n.isMockTagId();r&&(t.tagId=r),e=Object.assign(e,t),t.prebidScriptUrl="//serv-selectmedia.com/cdn/player/prebid/8_45_1/prebid.js";const a=wa(e,e.isSticky,e.isFloating);if(a.targetElement===null)return;e=Object.assign(e,a),e.waterfallServer=`${e.waterfallServer}?${ba(e)}`;const s=new Be(e,n);s.config.offsetWidth=e.unitContainer.offsetWidth,s.config.offsetHeight=e.unitContainer.offsetHeight,i=new va({target:e.unitContainer,props:{configManager:s}})}catch(n){if(n.message.indexOf("IntersectionObserver")!==-1)return}return i}window.NewSMPlayer=Ia})();
